!function(){"use strict";function t(e,n,i){for(var o,a,s,r=0,c=e.cssRules.length,d=void 0,l=void 0;r<c;){if((d=e.cssRules[r]).type===d.STYLE_RULE){for(o=["animationName","webkitAnimationName","msAnimationName","oAnimationName","mozAnimationName"],a=0;a<o.length;a++)if(d.style[o[a]]){if(0===d.style[o[a]].indexOf(i))continue;d.style[o[a]]=i+d.style[o[a]]}l=n+" "+(s=d.selectorText.replace(/,/g,", "+n+" "))+" {"+d.style.cssText+"}",e.deleteRule(r),e.insertRule(l,r)}else d.type===d.KEYFRAMES_RULE||d.type===d.WEBKIT_KEYFRAMES_RULE||d.type===d.MOZ_KEYFRAMES_RULE||d.type===d.MS_KEYFRAMES_RULE?d.name=i+d.name:d.cssRules&&d.cssRules.length?t(d,n,i):d.type===d.IMPORT_RULE&&(e.deleteRule(r),r--,c--);r++}}function e(t,n,i){var o,a,s,r,c,d,l,u=this;if(t.length){for(a=(o=t.shift()).hasAttribute("src"),s=document.createElement("script"),r=function(){e.call(u,t,n,i)},c=function(){if(-1!==i){var t=gt.call(u);vt.call(u,s,r.bind(u),t)}else r();wt.call(u)},s.addEventListener("load",c),s.addEventListener("error",c),d=o.attributes,l=0;l<d.length;l++)s.setAttribute(d[l].name,d[l].value);a||s.setAttribute("src","data:text/javascript;base64,"+btoa(encodeURIComponent(o.innerHTML).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)}))),s.innerHTML=o.innerHTML,xt.call(u,function(){-1!==i&&kt.call(u,s),o.parentNode.replaceChild(s,o)},!0===i)}else n&&n()}function n(){var t=this,e=t.positionsQueue.shift();t.positionsQueueActive=!0,e(function(){0===t.positionsQueue.length?t.positionsQueueActive=!1:n.call(t)})}function i(){var t=this,e=t.documentWatchers.shift();try{e.call(t),t.documentWatchers.length&&i.call(t)}catch(t){}}function o(t,e,n){var i,a,s,r=this;if(0!==t.length)if(n=n||{},"auto"===(i=t[0]).mode&&"native"!==i.type||"external-js"===i.mode&&e)Dt.call(r,t,n);else{if(("auto"===i.mode||"system"===i.mode)&&"native"===i.type)if(n&&(n.selectors||n.element)){if(t.length>1)return void t.map(function(t){var e=n.selectors[r.segmentData["device_type"]];e&&e[t.placement]&&(t.mode="selector",t.meta=e[t.placement],o.call(r,[t],!1,n))})}else a=Qt.call(r,E),Ot.call(r,function(){W.call(r,r.nativeWrapperPlugin)(a)});switch("html-markup"===i.mode&&(i.mode="selector",i.meta=".hpmds-position-"+i.id),i.mode){case"internal-js":case"system":e?Dt.call(r,t,n):(s={ready:function(e){n.element=e,o.call(r,t,!0,n)},requestBanners:Nt.bind(r)},W.call(r,i.meta)(s));break;case"selector":Ot.call(r,function(){var e,o=[].slice.call(document.querySelectorAll(i.meta));for(e=0;e<o.length;e++)i.already&&!i.multi||o[e].querySelector(".hpmds-slot")||(n.element=o[e],Dt.call(r,t,n),i.already=!0)});break;case"link-click":Rt.call(r,t,n,function(e){document.documentElement.addEventListener("click",function i(o){var a,s,c=o.target;if(c){a=!1;do{(a="A"===c.tagName)||(c=c.parentNode)}while(c&&!a);if(a&&(!c.hasAttribute("target")||"_self"===c.getAttribute("target"))&&(s=c.getAttribute("href"))&&!(s.indexOf("#")>-1))return r.interstitialAnchorLink=s,document.documentElement.removeEventListener("click",i),It.call(r,t,n),e?(o.preventDefault(),o.stopPropagation(),e.allocateView(),e.hpmd.data.openBanner(),!1):void 0}})},!1);break;case"scroll":Rt.call(r,t,n,function(){window.addEventListener("scroll",function e(){window.pageYOffset>1.2*window.innerHeight&&(window.removeEventListener("scroll",e),It.call(r,t,n))})})}}}function a(t,e){t.hpmd={data:{},events:{add:I.bind(e),remove:At.bind(e),fire:function(n,i){"close"!==n?A.call(e,n,i):"interstitial"===t.format?window.location.href=e.interstitialAnchorLink:function(){try{t.hpmd.data.destroy()}catch(t){}if(t.nodes&&t.nodes.length)for(var e=0;e<t.nodes.length;e++)try{t.nodes[e].parentNode.removeChild(t.nodes[e])}catch(t){}}()}},getSegment:B.bind(e),getStylesheet:function(){var e=t.nodes[0];return e instanceof HTMLStyleElement?e.sheet:e},passback:function(){Mt.call(e,t)},convert:function(){T.call(e,t)},push:Bt},M.call(e,t);var n=W.call(e,e.clientConfig)();return t.hpmd.getConfig=function(){return n},e.siteId||(t.hpmd.setSegments=function(t){e.segmentData=t}),t.hpmd}var s,r,c,d,l,u,h,m,p,f,g,v,w,y,b,k,x,_,S,E,C,I,W,L,R,D,N,O,P,M,A,B,T,U,V,j,H,z,F,q,J,Q,Y,K,X,$,Z,G,tt,et,nt,it,ot,at,st,rt,ct,dt,lt,ut,ht,mt,pt,ft,gt,vt,wt,yt,bt,kt,xt,_t,St,Et,Ct,It,Wt,Lt,Rt,Dt,Nt,Ot,Pt,Mt,At,Bt,Tt,Ut,Vt,jt,Ht,zt,Ft,qt,Jt,Qt,Yt,Kt,Xt,$t,Zt,Gt,te,ee,ne,ie=void 0;ie="function"!=typeof Object.assign?function(t){var e,n,i,o;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(e=Object(t),n=1;n<arguments.length;n++)if(void 0!==(i=arguments[n])&&null!==i)for(o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);return e}:Object.assign,s=ie,r=".hpmdnetwork.ru",c="1",d=function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},l=function(){var t,e=this,n=document.getElementsByTagName("script"),i=new RegExp("^(?:https?:)?//[^/]*"+d(e.domain));for(t=0;t<n.length;t++)n[t].hasAttribute("src")&&n[t].getAttribute("src").match(i)&&(e.hpmd_script=n[t])},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.hostname,e=this,n=1,i=t.split(".").length,o=null;do{if(e.cookieDomain=t.split(".").splice(i-n,i).join("."),e.cookieDomain.indexOf(":")&&(o=e.cookieDomain+":"+Math.random()),document.cookie="hpmd_cd="+o+"; path=/; domain="+e.cookieDomain,document.cookie.indexOf("hpmd_cd="+o)>-1)return;n++}while(n<=i);e.cookieDomain=t},h=function(t){var e,n,i=this;null!==t&&(e=t.getAttribute("src"),(n=/client\/(\d+)\.(min\.)?js/.exec(e))&&n[1]&&(i.siteId=parseInt(n[1]),i.isDemoStand=[50,51,52].indexOf(i.siteId)>-1))},m=function(){var t=this,e=/hpmd_user_segments=(\[[\d+,]+\])(;|$)/.exec(document.cookie);e&&(t.user_segments=JSON.parse(e[1]))},p=function(t){var e,n=this;t.method||(t.method="POST"),t.url||(t.url=n.protocol+"//banner"+n.domain+"/"),t.data?"string"==typeof t.data?t.type||(t.type="application/x-www-form-urlencoded"):(t.data=JSON.stringify(t.data),t.type||(t.type="application/json")):t.data="",!t.forceAsync&&window.hpmd.sync?(window.hpmd.syncb=window.hpmd.syncb||[],window.hpmd.syncb.push(function(e){t.success&&t.success.bind({json:e})()}),document.write('\n            <script \n                src="'+t.url+"jsonp\n                ?n="+(window.hpmd.syncb.length-1)+"\n                &p="+encodeURIComponent(t.data)+'">\n            <\/script>\n        ')):((e=new XMLHttpRequest).open(t.method,t.url,!0),e.withCredentials=!0,t.type&&e.setRequestHeader("Content-Type",t.type),t.success&&(e.onreadystatechange=function(){if(4===this.readyState){try{this.json=JSON.parse(this.responseText)}catch(t){this.json=null}t.success.call(this)}}),e.send(t.data))},f=function(t){var e,n=this;n.bodyReadyCallbacks.push(t),1===n.bodyReadyCallbacks.length&&(e=function t(){if(document.body){for(var e=0;e<n.bodyReadyCallbacks.length;e++)n.bodyReadyCallbacks[e]();n.bodyReadyCallbacks=[]}else n.bodyReadyTimeout||(n.bodyReadyTimeout=setTimeout(function(){n.bodyReadyTimeout=null,t()},300))})()},g=function(){this.trackingCallbacks.map(function(t){try{t()}catch(t){console&&console.error("onUserIdentified(): callback couldn't be executed",t)}}),this.trackingCallbacks=[]},v=function(t){this.trackingCallbacks.push(t.bind(this))},w=function(t,e,n){var i,o=this,a="";n&&(a=(i=new Date(Date.now()+1e3*n)).toUTCString()),document.cookie=t+"="+e+"; path=/; domain="+o.cookieDomain+"; expires="+a},y=function(t){this.uid=t,w.call(this,"hpmd_uid2",this.uid,31536e3)},b=function(){try{this.trackingIframe.contentWindow.postMessage("hpmd.setuid"+this.uid,"*")}catch(t){console&&console.error("HPMD.sendUid(): Cant connect to trackingIframe",t)}},k=function(){var t=this,e=/hpmd_uid2=(\d+)(;|$)/.exec(document.cookie);e&&(t.uid=parseInt(e[1])),window.hpmd.sync?g.call(t):(window.addEventListener("message",function(e){var n,i,o;e.origin===t.origin&&"string"==typeof e.data&&("hpmd.uid"===(n=e.data.substring(0,8))?(i=parseInt(e.data.substring(8)),!isNaN(i)&&i<t.uid&&(t.uid=i),t.uid&&(y.call(t,t.uid),v.call(t,b)),g.call(t)):"hpmd.uts"===n?t.uts=JSON.parse(e.data.substring(8)):"hpmd.cts"===n&&(o=JSON.parse(e.data.substring(8)),p.call(t,{data:{method:"confirm.timestamp",data:{uid:t.uid,objects:o}}})))}),t.trackingIframe=document.createElement("iframe"),t.trackingIframe.style.cssText="height:1px;left:-100px;position:absolute;top:-100px;width:1px;",t.trackingIframe.setAttribute("src",t.origin+"/track/handler"+t.trackHandlerVersion+".html"),f.call(t,function(){window.document.body.appendChild(t.trackingIframe)}))},x=function(){var t=this,e=void 0,n=/hpmd_demo=(\d+)\.([a-f0-9]{40})((\.\w+)+)?/;(e=n.exec(location.href)||n.exec(document.cookie))&&(t.demoSettings={banner_id:parseInt(e[1]),hash:e[2]},e[3]&&(t.demoSettings.extra=e[3].substring(1,1e3).split("."))),(e=/hpmd_bind_native=([0-3])/.exec(location.href))?"0"===e[1]?w.call(t,"hpmd_bind","",-86400):(t.boundNative=parseInt(e[1]),w.call(t,"hpmd_bind",e[1])):(e=/hpmd_bind=([0-3])/.exec(document.cookie))&&(t.boundNative=parseInt(e[1]))},_=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?window.screen.height/window.screen.width==736/414&&3===window.devicePixelRatio?"iPhone 6/6S/7/8 Plus":window.screen.height/window.screen.width==667/375&&2===window.devicePixelRatio?"iPhone 6/6S/7/8":window.screen.height/window.screen.width==812/375&&3===window.devicePixelRatio?"iPhone X":window.screen.height/window.screen.width==1.775&&2===window.devicePixelRatio?"iPhone 5/5C/5S":window.screen.height/window.screen.width==1.5&&2===window.devicePixelRatio?"iPhone 4/4S":window.screen.height/window.screen.width==1.5&&1===window.devicePixelRatio?"iPhone 1/3G/3GS":null:null},S=0,E=2,C=3,I=function(t,e){if(void 0===this.listeners[t])throw new Error("HPMD: addEventListener: Unknown event "+t);this.listeners[t].push(e)},W=function(t){return this.globalEval("(function(hpmd){ "+t+" })")},L=function(t){return void 0===t?null:t},R=function(t,e,n,i){var o=this,a=o.protocol+"//banner"+o.domain+"/track/event?uid="+o.uid+"&dbid="+o.dbid+"&banner_id="+t.id+"&view="+o.viewId+"&event="+encodeURIComponent(e)+"&redirect_uri="+encodeURIComponent(n)+"&url="+encodeURIComponent(location.href.toString()),s=L(i);return null!==s&&(a+="&data="+encodeURIComponent(JSON.stringify(s))),a},D=function(t){var e=document.createElement("img");e.setAttribute("src",t.replace(/\{RND\}/g,function(){return Math.random()})),e.style.cssText="position:absolute;left:-10000px;width:1px;height:1px;",document.body.appendChild(e)},N=function(t,e,n){var i,o,a=this;if(p.call(a,{forceAsync:!0,data:{method:"ad.event",data:{banner_id:t.id,view:a.viewId,uid:a.uid,dbid:a.dbid,event:e,data:L(n)}},success:function(){}}),t.pixels&&t.pixels[e])for(i=t.pixels[e],o=0;o<i.length;o++)D(i[o])},O=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=this,s=R.call(a,t,e,n,o);i.newWindow?window.open(s,i.name?i.name:null,i.specs?i.specs:null,i.useReplace):location.href=s},P=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this,o=void 0;t.links&&(o=t.links[e]),o||(o="http://www"+i.domain+"/"),o=(o=o.replace(/\{RND\}/g,function(){return Math.random()})).replace(/\{(\w+)\}/g,function(t){var e=t.slice(1,-1);return n[e]?n[e]:""}),O.call(i,t,"hpmd.link"+e,o,{newWindow:!0})},M=function(t){var e=this,n=[],i=[],o=[];t.hpmd.trackEvent=function(i,o){t.allocated?N.call(e,t,i,o):n.push([].slice.call(arguments))},t.hpmd.prepareLink=function(n,i,o){if(!t.allocated)throw new Error("hpmd.banner.link(): this banner has not been initialized yet");R.call(e,t,n,i,o)},t.hpmd.trackLink=function(n,o,a,s){t.allocated?O.call(e,t,n,o,a,s):i.push([].slice.call(arguments))},t.hpmd.link=function(n,i){P.call(e,t,n,i)},t.hpmd.ready=function(e){t.allocated?e():o.push(e)},t.hpmd.asyncPrepareLink=function(e,n,i,o){t.allocated?o(t.hpmd.prepareLink.apply(this,[].slice.call(arguments,0,arguments.length-1))):t.hpmd.ready(function(){t.hpmd.asyncPrepareLink.apply(this,[].slice.call(arguments))})},t.viewAllocated=function(){var e,a,s;for(e=0;e<n.length;e++)t.hpmd.trackEvent.apply(this,n[e]);for(a=0;a<i.length;a++)t.hpmd.trackLink.apply(this,i[a]);for(s=0;s<o.length;s++)o[s]();n=null,i=null,o=null}},A=function(t,e){var n,i=this;for(n=0;n<i.listeners[t].length;n++)if(i.listeners[t][n])try{i.listeners[t][n](e)}catch(e){console&&console.error("fireEvent: cannot execute listener for event "+t,e)}},B=function(t){return this.segmentData[t]},T=function(t){t.hpmd.trackEvent("hpmd.click")},U=function(t){if(t)try{t.parentNode.removeChild(t)}catch(t){console.log("Provided element wasn't found in DOM")}else console.log("Be sure to pass DOM Element")},V=function(t,e,n){var i=this,o=document.createElement("div");return o.setAttribute("id","hpmds-slot-"+n+"-"+e.placement),o.classList.add("hpmds-slot"),t.onViewportUpdate&&(o.onViewportUpdate=t.onViewportUpdate),t.element.appendChild(o),t.element.style.display="block",t.element.style.visibility="visible",e.auto_size&&(o.style.position="relative",o.style.overflow="hidden",o.style.zIndex="1",o.style.paddingTop="1px",o.style.marginTop="-1px","tablet"===i.segmentData["device_type"]?(o.style.margin="auto",o.style.width=window.innerWidth+"px",o.style.maxWidth=.75*window.innerWidth+"px"):(o.style.marginLeft=window.pageXOffset-o.getBoundingClientRect().left+"px",o.style.marginRight=window.innerWidth-o.getBoundingClientRect().right+window.pageXOffset+"px",o.style.width=window.innerWidth+"px",o.onViewportUpdate=function(){for(var t,e=0,n=0,i=o.parentNode,a=function(t,e){return parseFloat(e.getPropertyValue(t))||0};i&&i!==window.document;){try{e+=a("padding-left",t=window.getComputedStyle(i))+a("border-left",t)+a("margin-left",t),n+=a("padding-right",t)+a("border-right",t)+a("margin-right",t)}catch(t){}i=i.parentNode}o.style.marginLeft=-e+"px",o.style.marginRight=-n+"px"})),o},j=function(t){var e=[],n=!1;t.hpmd.playbackReady=function(t){n?t():e.push(t)},t.setPlaybackReady=function(){n=!0,e.map(function(t){try{t()}catch(t){}})}},H=function(e,n,i){var o=document.createElement("style");return o.innerHTML=e,document.body.appendChild(o),o.sheet.disabled=!0,t(o.sheet,n,i),o.sheet.disabled=!1,o.sheet},z=function(){var t="scrollLeft"in document.documentElement?"documentElement":"body",e={};return e.left=document[t].scrollLeft,e.top=document[t].scrollTop,e.right=e.left+window.innerWidth,e.bottom=e.top+window.innerHeight,e},F=function(t){var e=0,n=0,i=t;do{e+=i.offsetLeft,n+=i.offsetTop,i=i.offsetParent}while(i);return{left:e,top:n,right:e+t.clientWidth,bottom:n+t.clientHeight}},q=function(t){var e,n,i,o=this;for(e=0;e<o.voWatchedSlots.length;e++)o.voWatchedBanners[e].allocateView&&("video"===(n=o.voWatchedBanners[e].subformat)&&"video-expanding"===n&&"in-read"===n||(i=F(o.voWatchedSlots[e]),t.right>=i.left&&t.left<=i.right&&t.bottom>=i.top&&t.top<=i.bottom&&o.voWatchedBanners[e].allocateView()))},J=function(){return this.currentFrame||(this.currentFrame=z()),q.call(this,this.currentFrame)},Q=function(t,e){return{left:Math.min(t.left,e.left),right:Math.max(t.right,e.right),top:Math.min(t.top,e.top),bottom:Math.max(t.bottom,e.bottom)}},Y=function(){var t=this,e=z(),n=t.currentFrame;n||(n=z()),e.left===n.left&&e.right===n.right&&e.top===n.top&&e.bottom===n.bottom||(q.call(t,Q(n,e)),t.currentFrame=e)},K=function(t){var e,n,i,o,a=this;if(t||a.windowWidth!==window.innerWidth){for(a.windowWidth=window.innerWidth,e=a.voWatchedSlots,n=0;n<e.length;n++)e[n].onViewportUpdate&&e[n].onViewportUpdate();for(i=a.voWatchedBanners,o=0;o<i.length;o++)i[o].hpmd.data.onViewportUpdate&&i[o].hpmd.data.onViewportUpdate()}Y.call(a)},X=function(t,e){var n,i=this;i.voWatchedBanners.push(e),i.voWatchedSlots.push(t),e.data&&e.data.onViewportUpdate&&e.data.onViewportUpdate(),i.viewportObservationLaunched||(J.call(i),i.voLaunched=!0,i.windowWidth=window.innerWidth,n=K.bind(i),setInterval(n,300),window.addEventListener("orientationchange",function(){n(!0)}),window.addEventListener("resize",n,!1))},$=function(t){for(var e=window.pageXOffset,n=window.pageYOffset,i=e+window.innerWidth,o=n+window.innerHeight,a=t.getUIConfig().height,s=t.container.offsetLeft,r=t.container.offsetTop,c=void 0,d=void 0,l=void 0,u=void 0,h=t.container.offsetParent;h;)s+=h.offsetLeft,r+=h.offsetTop,h=h.offsetParent;return c=s+t.container.offsetWidth,d=r+a,l=(s+c)/2,u=(r+d)/2,r>o||d<n||s>i||c<e?0:u<n||u>o||l<e||l>i?1:s>=e&&c<=i&&r>=n&&d<=o?3:2},Z=function(t){var e=$(t),n=function(){var n={visibility:e};t.onVisibilityChange&&t.onVisibilityChange(n);try{t.hpmd.data.onVisibilityChange&&t.hpmd.data.onVisibilityChange(n)}catch(t){}};window.addEventListener("scroll",function(){var i=$(t);e!==i&&(e=i,n())}),n()},G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},et=function(){function t(t,e){var n,i;for(n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),nt=function(t,e){"video-expading"===t.subformat||"in-read"===t.subformat?t.getUIConfig=function(){if(t.expanded)return{height:Math.max(1,e.clientHeight)};var n=void 0;if(t.hpmd.data.ui&&"function"==typeof t.hpmd.data.ui.getConfig)try{n=t.hpmd.data.ui.getConfig()}catch(t){}return"object"!==(void 0===n?"undefined":G(n))&&(n={}),n.height||(n.height=Math.min(.5625*e.clientWidth,.6*window.innerHeight)),n.height>.7*window.innerHeight&&(n.height=.7*window.innerHeight),n}:t.getUIConfig=function(){return{height:Math.max(1,e.clientHeight)}}},it=function(t,e){t.visibility>=2&&!e.awaitingInitialization?e.awaitingInitialization=setTimeout(function(){delete e.onVisibilityChange,delete e.awaitingInitialization,e.allocateView()},2e3):t.visibility<2&&e.awaitingInitialization&&(clearTimeout(e.awaitingInitialization),delete e.awaitingInitialization)},ot=function(t){var e,n;switch(t.subformat){case"video":t.onVisibilityChange=function(e){it(e,t)};break;case"in-read":e=0,t.onVisibilityChange=function(n){n.visibility>=e&&(e=n.visibility)>=3&&t.setPlaybackReady(),n.visibility>=3&&(setTimeout(function(){t.expanded=!0},420),t.allocateView(),delete t.onVisibilityChange)};break;case"video-expanding":n=0,t.onVisibilityChange=function(e){e.visibility>n&&(n=e.visibility)>=3&&(t.setPlaybackReady(),t.expanding=setTimeout(function(){t.expanded=!0,delete t.expanding},420)),(t.expanding||t.expanded)&&it(e,t)}}},at=function(t,e){nt(t,e),ot(t),Z(t),X.call(this,e,t),f.call(this,J.bind(this))},st=function(t){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),e},rt=function(t,e){return(e||[]).concat([].slice.call(t.querySelectorAll("script")))},ct=function(){var t,e=this,n=e.documentWritePosition.nextSibling;try{e.documentWritePosition.insertAdjacentHTML("afterend",e.documentWriteBuffer)}catch(t){}for(t=e.documentWritePosition.nextSibling;t&&n!==t;)e.documentWrittenNodes.push(t),t=t.nextSibling;e.documentWrittenNodes.length&&(e.documentWritePosition=e.documentWrittenNodes[e.documentWrittenNodes.length-1]),e.documentWriteBuffer=""},dt="loading",lt="interactive",ut="complete",ht=function(){this.documentWriteBuffer="",this.documentWrittenNodes.map(function(t){U(t)}),this.documentWrittenNodes=[]},mt=function(t){var e=this,n=document.querySelectorAll("script"),i=function(n,i){t?n.addEventListener(i,ht.bind(e)):n.removeEventListener(i,ht.bind(e))};[].map.call(n,function(t){i(t,"load"),i(t,"error")})},pt=function(t){try{Object.defineProperty(document,"readyState",{configurable:!0,get:function(){return t}})}catch(e){document.readyState=t}},ft=function(){var t,e=this;document.write=e.originalDocumentWrite,document.writeln=e.originalDocumentWriteln,document.open=e.originalDocumentOpen,document.close=e.originalDocumentClose,e.documentComplete&&(pt(ut),(t=document.createEvent("Event")).initEvent("readystatechange",!0,!0),document.dispatchEvent(t)),e.traversalOverrides.map(function(t){document[t]=e.documentOriginalMethods[t],Element.prototype[t]&&(Element.prototype[t]=e.elementOriginalMethods[t])}),mt.call(e,!1)},gt=function(){return ct.call(this),ft.call(this),this.documentWrittenNodes},vt=function(t,e,n){_t.call(this,t,n,e,null,!0)},wt=function(){this.scriptExecutionQueue.length?(this.scriptExecutionLocked=!0,this.scriptExecutionQueue.shift()()):this.scriptExecutionLocked=!1},yt=function(t){if(t)try{t.parentNode.removeChild(t)}catch(t){console.log("Provided element wassn't found in DOM")}else console.log("Be sure to pass DOM Element")},bt=function(){var t,e,n=this;if(document.readyState!==dt)return!0;try{return t="hpmds-as",n.originalDocumentWrite.call(document,'<ins id="'+t+'"></ins>'),!(e=document.getElementById(t))||(yt(e),!1)}catch(t){return!0}},kt=function(t){var e,n=this;n.documentWritePosition=t,n.documentWriteBuffer="",n.documentWrittenNodes=[],mt.call(n,!0),document.write=function(t){bt.call(n)?n.documentWriteBuffer+=t:n.originalDocumentWrite.call(document,t)},document.writeln=function(t){document.write(t+"\n")},document.open=function(){return this},document.close=function(){},n.documentComplete=document.readyState===ut,n.documentComplete&&pt(lt),e=function(t){n.documentOriginalMethods[t]=document[t],document[t]=function(){return ct.call(n),n.documentOriginalMethods[t].apply(this,[].slice.call(arguments))},Element.prototype[t]&&(n.elementOriginalMethods[t]=Element.prototype[t],Element.prototype[t]=function(){return ct.call(n),n.elementOriginalMethods[t].apply(this,[].slice.call(arguments))})},n.traversalOverrides.map(e)},xt=function(t,e){this.scriptExecutionQueue[e?"unshift":"push"](t),this.scriptExecutionLocked||wt.call(this)},_t=function(t,n,i,o,a){var s=this,r=void 0,c=void 0,d=document.createElement("div");if("string"==typeof n)d.innerHTML=n;else for(;c=n.shift();)d.appendChild(c);for(r=rt(d);d.childNodes.length>0;)c=d.childNodes[0],!0===a?(t.parentNode.insertBefore(c,t.nextSibling),t=c):t.appendChild(c),o&&o(c);e.call(s,r,i,a)},St=function(t,e){var n;e||(e=this.principalBanner),n={exception:t.stack?{message:t.message,name:t.name,source:{file:t.fileName,line:t.lineNumber,char:t.columnNumber},stack:t.stack}:{name:t.message?t.message:t.error}},e.hpmd.trackEvent("hpmd.js-exception",n),window.console&&console.error("HPMD: banner error",t)},Et=function(t,e,n){var i,o=this;Qt.call(o,S,t),i=function(){var i,a,s;o.principalBanner||(o.principalBanner=t),t.nodes=["native"===t.format?H(t.css,"#hpmds-slot-"+t.id+"-"+n,"hpmds-slot-kf-"+t.id+"-"+n):st(t.css)],"native"===t.format&&(t.hpmd.getContainer=function(){return e},t.container=e,"video-expanding"!==t.subformat&&"in-read"!==t.subformat||j(t)),e&&e.onViewportUpdate&&e.onViewportUpdate(),i="native"===t.format?e:document.body,a=function(){var n=t.initializer||o.pendingInitializer;n&&W.call(o,n)(t.hpmd);try{W.call(o,t.js)(t.hpmd)}catch(e){t.imitation?t.onException(e):St.call(o,e,t)}"native"===t.format&&at.call(o,t,e)},s=function(e){t.nodes.push(e)},_t.call(o,i,t.html,a,s,!1)},f.call(o,i)},Ct=function(t){p.call(this,{forceAsync:!0,data:{method:"ad.get",data:{capacity:[t.id],dbid:this.dbid,demo:null,native:0,positions:[],skip:[],uid:this.uid,user_segments:this.user_segments,view:this.viewId}}})},It=function(t,e){var n,i,o=this,a=t[0],s=!!a.banner;o.demoSettings||(n=t.map(function(t){return{id:t.id,meta:t.meta,mode:t.mode,placement:t.placement,type:t.type}}),A.call(o,"view",{context:e,hasBanner:s,positions:n,uid:o.uid}),"native"===a.type&&A.call(o,"native",{container:e.element,device_type:o.segmentData["device_type"],hasBanner:s,placement:a.placement,selector:a.meta})),i=a.banner,"line-click"!==a.mode&&"scroll"!==a.mode||Ct.call(o,a),i&&(i.positions=t,i.context=e,"native"===a.type&&(i.slot=V.call(o,e,a,i.id)),i&&!o.firstBanner&&(o.firstBanner=i,Yt.call(o)),i.allocateView=function(){i.allocateView=function(){},i.allocating=!0,"number"!=typeof i.view&&p.call(o,{forceAsync:!0,data:{method:"ad.view",data:{banner_id:i.id,buffer_id:i.view.id,dbid:o.dbid,demo:!!o.demoSettings||!!o.boundNative,hash:i.view.hash,position:i.position,uid:o.uid,view_id:o.viewId}},success:function(){!0===this.json.success&&(i.allocating=!1,i.allocated=!0,i.viewAllocated())}})},"native"!==i.format&&"interstitial"!==i.format&&i.allocateView(),Et.call(o,i,i.slot,a.placement))},Wt=function(){var t,e=this;for(e.isDataReady=!0,t=0;t<e.dataReadyCallbacks.length;t++)try{e.dataReadyCallbacks[t]()}catch(e){console&&console.error("HPMD: dataReadyHandler(): cannot execute a callback at index "+t+".",e)}},Lt=function(t){this.imitatedFormat&&this.imitatedFormat.onUnsupported(t)},Rt=function(t,e,i,o){function a(e,n){p.call(u,{data:{method:"ad.get",data:{capacity:[],dbid:u.dbid,fixed_campaign_id:d,imitate:{format:u.imitatedFormat.format,subformat:u.imitatedFormat.subformat},positions:[e[0]],skip:[],uid:u.uid,user_segments:u.user_segments,view:u.viewId}},success:function(){var e=this.json,o=JSON.parse(JSON.stringify(u.imitatedBanner));o.initializer=e.data.initializer||null,t[0].banner=o,i(o),e.data.unsupported&&Lt.call(u),n&&n()}})}function s(t){i(null),Pt.call(u,null,null,!0),t&&t()}function r(n){var a=t.filter(function(t){return t.avail}).map(function(t){return t.id}),s=o||e&&e.skipCapacity?[]:t.filter(function(t){return"line-click"!==t.mode&&"scroll"!==t.mode}).map(function(t){return t.id});p.call(u,{forceAsync:"native"===t[0].type,data:{method:"ad.get",data:{capacity:s,dbid:u.dbid,demo:u.demoSettings,fixed_campaign_id:d,native:u.boundNative,positions:a,segments:u.externalSegments,skip:u.campaigns,uid:u.uid,user_segments:u.user_segments,view:u.viewId}},success:function(){var o,a=this.json,s=!1;a.success?(a.data.supported||Lt.call(u),u.pendingInitializer=a.data.initializer,(o=t[0]).banner=a.data.banner||null,o.banner&&("sizmek"===o.banner.subformat&&(o.banner.html=o.banner.html.replace("[timestamp]",Date.now())),u.campaigns.push(o.banner.cid),u.bannersMap[o.banner.key]=o.banner,s=!0),i(o.banner),o.banner&&Wt.call(u)):(u.errorInfo=a,1002===a.error&&(Lt.call(u,!0),Wt.call(u))),n&&n(),"native"===t[0].type||s||e&&"{}"!=JSON.stringify(e)||Pt.call(u,null,null,!0)}})}var c,d,l,u=this;0!==t.length&&(c=void 0,d=top.hpmd.fixed_campaign_id?top.hpmd.fixed_campaign_id:0,c=u.imitatedFormat?(l=t.filter(function(t){return"fullscreen"===t.type&&"link-click"===t.mode&&"interstitial"===u.imitatedFormat.format||t.type===u.imitatedFormat.format})).length?function(t){a(l,t)}:function(t){s(t)}:function(t){r(t)},u.positionsQueue.push(c),u.positionsQueueActive||n.call(u))},Dt=function(t,e){var n=this;Rt.call(n,t,e,function(){It.call(n,t,e)})},Nt=function(t){var e,n,i=this;i.demoSettings||(n=(e=i.positions.filter(function(e){return!(t||!e.default)||!(t.positions&&-1===t.positions.indexOf(e.id)||t.except_format&&t.except_format.indexOf(e.type)>-1||t.formats&&-1===t.formats.indexOf(e.type)||t.format&&t.format!==e.type||t.format&&"interstitial"!==t.format&&"link-click"===e.mode||t.formats&&-1===t.formats.indexOf("interstitial")&&"link-click"===e.mode)})).filter(function(t){return"native"===t.type&&"auto"===t.mode}),!t.selectors&&n.length>0&&(i.nativeContext=t),t.segments&&(i.externalSegments=t.segments),i.externalSegments&&e.length===i.positions.length?Pt.call(i,null,t):e.length&&Pt.call(i,e.map(function(t){return t.id}),t))},Ot=function(t){var e,n=this;n.documentWatchers.push(t),e=function t(){i.call(n),document.removeEventListener("DOMContentLoaded",t),window.removeEventListener("load",t)},"loading"!==document.readyState||n.isDocumentWatchersSet?i.call(n):(n.isDocumentWatchersSet=!0,document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e))},Pt=function(t,e,n){var i=this;t?o.call(i,i.positions.filter(function(e){return t.indexOf(e.id)>-1}),!0,e):(i.overlayChain.length&&o.call(i,i.overlayChain.shift()),n||i.positions.filter(function(t){return"native"===t.type}).map(function(t){o.call(i,[t])}))},Mt=function(t){function e(){p.call(o,{data:{method:"ad.passback",data:{uid:o.uid,dbid:o.dbid,view:o.viewId,banner_id:t.id}}})}var n,i,o=this;t.allocated?e():(n=t.viewAllocated,t.viewAllocated=function(){e(),n&&n.call(this)},t.allocating||t.allocateView()),t.slot&&U(t.slot),t.context.skipCapacity=!0,i=t.positions.map(function(t){return t.id}),Pt.call(o,i,t.context)},At=function(t,e){var n,i=this;if(void 0===i.listeners[t])throw new Error("HPMD: removeEventListener: Unknown event "+t);for(n=0;n<i.listeners[t].length;n++)i.listeners[t][n]===e&&(i.listeners[t][n]=null)},Bt=function(t){try{t()}catch(t){window.console&&console.log("hpmd: callback error:",t)}},Tt=function t(e){tt(this,t),this.context=e.nativeContext,this.getSegment=B.bind(e),this.slotReady=function(t){var n,i=e.positions.filter(function(e){return"native"===e.type&&("auto"===e.mode||"system"===e.mode)&&e.placement===t.attributes.placement});i.length>0&&(i[0].mode="system",(n=JSON.parse(JSON.stringify(e.nativeContext))||{}).element=t.container,n.onViewportUpdate=t.onViewportUpdate,Pt.call(e,[i[0].id],n))}},Ut=function(){this.bypassRequest=!0},Vt=function(t){this.isDataReady?t():this.dataReadyCallbacks.push(t)},jt=function(t){var e=new RegExp("dmp_sync_"+t+"=1").exec(document.cookie);return!!e&&!!e[0]},Ht=function(t){var e=document.createElement("img");e.setAttribute("src","//x01.aidata.io/0.gif?pid=HPMD&id="+t),e.style.cssText="position:absolute;left:-10000px;width:1px;height:1px",document.body.appendChild(e)},zt=function(t){window.adcm_config={id:1071,profileId:""+t,platformId:71,init:function(){window.adcm.call()}};var e=document.createElement("script");e.setAttribute("src","//tag.digitaltarget.ru/adcm.js"),e.async=!0,document.querySelector("head").appendChild(e)},Ft=function(t,e){var n,i,o,a=this;t&&(n=1209600,i="amberdata",-1===e.indexOf(i)||jt(i)||(zt(t),w.call(a,"dmp_sync_"+i,"1",n)),o="aidata",-1===e.indexOf(o)||jt(o)||(Ht(t),w.call(a,"dmp_sync_"+o,"1",n)))},qt=function(t){var e,n=this,i=t.positions;n.positions=i.positions,n.viewId=i.view,n.dbid=i.dbid,Ft.call(n,i.uid,i.dmp.send_uid),(e=i.uid)&&y.call(n,e),n.segmentData=i.segment||{},n.segmentData.site=n.siteId,i.config&&i.config.site&&(n.clientConfig=i.config.site),i.positions[0].banner=t.get.banner,It.call(n,i.positions,{})},Jt=function t(e){tt(this,t),this.events={add:I.bind(e),remove:At.bind(e),fire:A.bind(e)},this.INITIALIZED=!0,this.sync=window.hpmd&&window.hpmd.sync,this.syncb=window.hpmd?window.hpmd.syncb||[]:[],this.convert=function(t){e.bannersMap[t]&&T.call(e,e.bannersMap[t])},this.mute=Ut.bind(e),this.passback=function(t){e.bannersMap[t]&&Mt.call(e,e.bannersMap[t])},this.push=Bt.bind(e),this.receive=qt.bind(e),this.requestBanners=Nt.bind(e),e.isDemoStand&&(this.registerException=St.bind(e),this.getBannerInfo=function(t){Vt.call(e,function(){t(e.principalBanner,e.errorInfo)})},this.getUid=function(){return e.uid})},Qt=function(t,e){return t===C?new Jt(this):t===S?a(e,this):t===E?new Tt(this):void 0},Yt=function(){var t,e,n=this;n._isPublicApiPresented&&(window.hpmd&&window.hpmd.INITIALIZED||(n.isDemoStand?(n.firstBanner?window.hpmd=n.firstBanner.hpmd:n.siteId?window.hpmd=Qt.call(n,C):window.hpmd=Qt.call(n,S,{}),n.demoSettings&&(window.hpmd.getViewId=function(){return n.firstBanner.viewId}),window.hpmd.imitate=function(t,e){n.imitatedBanner={id:1,cid:1,html:t.html,css:t.css,js:t.js,format:t.format,subformat:t.subformat,placement:t.placement,imitation:!0,onException:t.onException,onUnsupported:t.onUnsupported,view:1},e&&e()},window.hpmd.imitatePlugins=function(t){n.nativeWrapperPlugin=t.js},window.hpmd.imitateFormat=function(t,e,i){n.imitatedFormat={format:t,subformat:e,onUnsupported:i}}):window.hpmd=Qt.call(n,C),t=function(t){var e,n=["trackEvent","trackLink","prepareLink","asyncPrepareLink"];for(e=0;e<n.length;e++)window.hpmd[n[e]]=t.hpmd[n[e]]},n.boundNative&&(n.firstBanner?t(n.firstBanner):(e={data:{id:0}},Qt.call(n,S,e),t(e)),window.hpmd.getSegment=B.bind(n))))},Kt=function(){var t,e,n=this,i=n.deferredCallbacks;if(i.length)for(t=0;t<i.length;t++)(e=i[t])&&"string"==typeof e&&0===e.indexOf("s/")?n.sectionId=parseInt(e.substring(2,1e3),10):e&&"function"==typeof e&&Bt(e)},Xt=function(){Yt.call(this),Kt.call(this)},$t=function(){var t,e,n,i,o=this;return null!==o.newSession?o.newSession:(t=void 0,t=!document.referrer||!!(e=/\/\/([^\/]+)\//.exec(document.referrer))&&!(n=e[1]===o.cookieDomain||e[1].indexOf("."+o.cookieDomain)===e[1].length-o.cookieDomain.length-1),i=!/hpmd_session=/.exec(document.cookie),w.call(o,"hpmd_session","1",1800),o.newSession=t&&i,o.newSession)},Zt=function(){var t=2===this.boundNative?"-dev.hpmdnetwork.ru":".hpmd.local",e=document.createElement("script");e.setAttribute("src","//misc"+t+"/native/debug/merge.js?"+Math.random()),document.head.appendChild(e)},Gt=function(t){w.call(this,"hpmd_user_segments",JSON.stringify(t),7200)},te=function(t,e){var n,i,o,a,s,r=this;if(t.unique_in.length){n={},i=t.section_id,(o=function(e){return-1!==t.unique_in.indexOf(e)})("system")&&(r.uts["sy"]=t.view_timestamp,n.system={}),o("site")&&(r.uts["si"+e]=t.view_timestamp,n.site={site_id:e}),o("site_section")&&((a=r.uts["sise"+e])||(a={}),a[i]=t.view_timestamp,n.site_section={site_id:e,section_id:i});try{s={uts:JSON.stringify(r.uts),confirm:t.csots?n:{}},r.trackingIframe.contentWindow.postMessage("hpmd.setuts"+JSON.stringify(s),"*")}catch(t){}}},ee=function(){var t,e,n=this;window.hpmd_ss?Xt.call(n):(x.call(n),t=_.call(n),e=function(){var t,e=this.json;e.success?(te.call(n,e.data,n.siteId),n.positions=e.data.positions,n.viewId=e.data.view,n.dbid=e.data.dbid,JSON.stringify(n.user_segments)!==JSON.stringify(e.data.user_segments)&&(Gt.call(n,e.data.user_segments),m.call(n)),e.data.uid&&(t=parseInt(e.data.uid,10),(!n.uid||n.uid>t)&&y.call(n,t)),n.segmentData=e.data.segment||{},n.segmentData.site=n.siteId,e.data.config&&e.data.config.site&&(n.clientConfig=e.data.config.site),n.nativeWrapperPlugin=e.data.native,Ft.call(n,e.data.uid,e.data.dmp.send_uid)):n.positions=[],n.positions.map(function(t){"teaser"!==t.type&&"fullscreen"!==t.type||("auto"===t.mode?n.overlayChain[0].push(t):n.overlayChain.push([t]))}),n.overlayChain[0].length||n.overlayChain.shift(),Xt.call(n),(!n.bypassRequest||n.demoSettings||n.boundNative)&&Pt.call(n),n.boundNative>1&&Zt.call(n)},p.call(n,{data:{method:"ad.positions",data:{demo:!!n.demoSettings||!!n.boundNative,force_model:t,new_session:$t.call(n),section_id:n.sectionId,site_id:n.siteId,uid:n.uid,url:location.href,user_segments:n.user_segments,uts:{system:n.uts["sy"],site:n.uts["si"+n.siteId],site_section:n.uts["sise"+n.siteId]}}},success:e}))},ne=function(){function t(e){tt(this,t),this._assignDefaultValues(),this._assignHijackedDocumentWriteProperties(),this._assignScrollManagerProperties(),s(this,e)}return et(t,[{key:"_assignDefaultValues",value:function(){this._isPublicApiPresented=!!window.hpmd,this.bannersMap={},this.bodyReadyCallbacks=[],this.bodyReadyTimeout=null,this.boundNative=0,this.bypassRequest=!1,this.campaigns=[],this.clientConfig=null,this.cookieDomain="",this.dataReadyCallbacks=[],this.dbid=null,this.deferredCallbacks=function(t){return t._isPublicApiPresented?window.hpmd:[]}(this),this.demoSettings=null,this.documentWatchers=[],this.domain=r,this.errorInfo=null,this.externalSegments=null,this.firstBanner=null,this.globalEval=window.eval,this.hpmd_script=null,this.imitatedBanner=null,this.imitatedFormat=null,this.interstitialAnchorLink=null,this.isDataReady=!1,this.isDemoStand=!1,this.isDocumentWatchersSet=!1,this.listeners={close:[],collapse:[],expand:[],interstitial:[],native:[],view:[]},this.nativeContext=null,this.positionsQueue=[],this.positionsQueueActive=!1,this.nativeWrapperPlugin=null,this.newSession=null,this.origin="https://banner"+r,this.original_domain=r,this.overlayChain=[[]],this.pendingInitializer=null,this.positions=null,this.principalBanner=null,this.protocol="https:"===location.protocol?"https:":"http:",this.sectionId=null,this.segmentData={},this.siteId=null,this.trackHandlerVersion=c,this.trackingIframe=null,this.trackingCallbacks=[],this.uid=null,this.user_segments=[],this.uts=null,this.viewId=null}},{key:"_assignHijackedDocumentWriteProperties",value:function(){this.documentComplete=null,this.documentOriginalMethods={},this.documentWriteBuffer=null,this.documentWritePosition=null,this.documentWrittenNodes=[],this.elementOriginalMethods={},this.originalDocumentClose=document.close,this.originalDocumentOpen=document.open,this.originalDocumentWrite=document.write,this.originalDocumentWriteln=document.writeln,this.scriptExecutionLocked=!1,this.scriptExecutionQueue=[],this.traversalOverrides=["getElementsByTagName","getElementsByTagNameNS","getElementsByClassName","querySelector","querySelectorAll","getElementById","getElementsByName"]}},{key:"_assignScrollManagerProperties",value:function(){this.currentFrame=null,this.voLaunched=!1,this.voWatchedBanners=[],this.voWatchedSlots=[],this.windowWidth=0}}]),t}(),s(ne.prototype,{checkHpmdScript:l,detectCookieDomain:u,detectSiteId:h,detectUserSegments:m,initializeUserIdentification:k,loadPositions:ee,pushTrackingCallbacks:v}),function(t){if(!t.hpmd_initialized){t.hpmd_initialized=!0;var e=new ne;t.addEventListener("message",function(n){"object"===G(n.data)&&n.data.hash&&(t.opener.postMessage("success","*"),w.call(e,"hpmd_demo",n.data.hash,31536e3),t.location.reload())}),e.detectCookieDomain(),e.checkHpmdScript(),e.detectSiteId(e.hpmd_script),e.detectUserSegments(),e.pushTrackingCallbacks(function(){e.loadPositions()}),e.initializeUserIdentification(),t.addEventListener("scroll",Y.bind(e),!1)}}(window)}();
