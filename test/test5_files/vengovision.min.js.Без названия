/*! iVengo-SDK 1.0.20 27-12-2017 02:48 */
window.VengoVision&&!window.VengoVision.temporaryVengoVision||(window.VengoVision={},window.VengoSystem=window.VengoVision,window.VengoVision.config={system:"VengoVision",serverUrl:"https://api.vengovision.ru/",trackingServerUrl:"https://tracking.vengovision.ru/",udidUrl:"https://tracking.vengovision.ru/web/uuid.php",scriptUrl:"https://s.vengovision.ru/js/vengovision.min.js"},window.iVengo||(window.iVengo=window.VengoVision,window.iVengo.temporaryiVengo=!0),function(a,b){var c={};c.empty=function(a){},c.init=function(b){var d={log:[1,1,1,1,1],debug:[0,1,1,1,1],info:[0,0,1,1,1],warn:[0,0,0,1,1],error:[0,0,0,0,1],none:[0,0,0,0,0]},e=d[b];e||(e=d.error);var f;f=window.console&&console.log?console.log:c.empty,c._log=function(){},c._debug=function(){},c._info=function(){},c._warn=function(){},c._error=function(){},a.isLegacyBrowser()||(e[0]&&(c._log=f),e[1]&&(window.console&&console.debug?c._debug=console.debug:c._debug=f),e[2]&&(window.console&&console.info?c._info=console.info:c._info=f),e[3]&&(window.console&&console.warn?c._warn=console.warn:c._warn=f),e[4]&&(window.console&&console.error?c._error=console.error:c._error=f))},a.initLog=c.init,a.log=function(a){c._log.apply(window.console,Array.prototype.slice.call(arguments))},a.debug=function(a){c._debug.call(window.console,a)},a.info=function(a){c._info.call(window.console,a)},a.warn=function(a){c._warn.call(window.console,a)},a.error=function(a){c._error.call(window.console,a)},a.exception=function(a,b){c._warn.call(window.console,a),b&&b.stack&&c._warn.call(window.console,b.stack)}}(window.VengoSystem),function(a,b){function c(){this.event_stack={}}c.prototype.trigger=function(b){var c,d,e,f,g=Array.prototype.slice.call(arguments,1),h=this,i=!1;if(g.push(function(){i=!0}),this.event_stack&&this.event_stack[b])for(var j in this.event_stack[b])if(a.isNumeric(j)&&(c=this.event_stack[b][j],"undefined"!=typeof c&&c)){d=c[1],e=c[2]||!1;try{f=d.apply(c[0]||h,g)}catch(k){a.warn("["+a.config.system+"] Error in event listener for "+b+"; please check your integration"),a.warn(k)}if(e&&(h.event_stack[b][j]=null),f===!1||i)return!1}if(this.event_stack&&this.event_stack.all)for(var j in this.event_stack.all)c=this.event_stack.all[j],"undefined"!=typeof c&&c&&(d=c[1],g.unshift(b),d.apply(c[0]||h,g));return!0},c.prototype.on=function(a,b,c,d){return"object"==typeof this.event_stack&&null!==this.event_stack||(this.event_stack={}),this.event_stack[a]||(this.event_stack[a]=[]),this.event_stack[a].push([c||this,b,d||!1]),this},c.prototype.one=function(a,b,c){return this.on(a,b,c,!0)},c.prototype.off=function(a,b,c){var d,e=this;if(null===this.event_stack&&(this.event_stack={}),!this.event_stack[a])return this;if(!b&&!c)return this.event_stack[a]=[],this;for(var f in this.event_stack[a])d=this.event_stack[a][f],!d||d[1]!==b||c&&c!==d[0]||e.event_stack[a].splice(f,1);return this},a.Events=c}(window.VengoSystem),function(a,b){a.makeid=function(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",c=0;c<5;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a},a.isTouchDevice=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints>0},a.isMobilePhone=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},a.isLegacyBrowser=function(){var a=navigator.userAgent.toLowerCase(),b=a.indexOf("msie")!=-1&&parseInt(a.split("msie")[1]);return b&&b<9},a.isIE=function(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");if(b>0)return!0;var c=a.indexOf("Trident/");if(c>0)return!0;var d=a.indexOf("Edge/");return d>0},a.isChome=function(){var a=navigator.userAgent;return a.indexOf("Chrome/")>-1&&a.indexOf("Chromium")<0},a.isFirefox=function(){var a=navigator.userAgent;return a.indexOf("Firefox/")>-1&&a.indexOf("Seamonkey")<0},a.isOpera=function(){var a=navigator.userAgent;return a.indexOf("Opera/")>-1||a.indexOf("OPR")>-1},a.isSafari=function(){var a=navigator.userAgent;return a.indexOf("Safari/")>-1&&a.indexOf("Chrome")<0&&a.indexOf("Chromium")<0},a.isiOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},a.isAndroid=function(){return navigator.userAgent.indexOf("ndroid")>-1},a.getDesktopSafariVersion=function(){if(a.isiOS())return b;if(navigator.userAgent.indexOf("Safari/")!==-1&&navigator.userAgent.indexOf("Chrome/")===-1&&navigator.userAgent.indexOf("Chromium/")===-1){var c=/Version\/(\d+)(\.\d+)?(\.\d+)?\s*Safari\/(\d+)(\.\d+)?(\.\d+)?/,d=c.exec(navigator.userAgent),e=d[1];if(!isNaN(e))return e}return b},a.getBrowser=function(){return this.isIE()?"ie":this.isChome()?"chrome":this.isSafari()?"safari":this.isOpera()?"opera":this.isFirefox()?"firefox":"unknown"},a.getAndroidVersion=function(){var a=a||navigator.userAgent,b=a.match(/Android\s([0-9\.]*)/);return b?parseFloat(b[1]):NaN},a.addOrientationChangeListener=function(a){"orientation"in window&&"onorientationchange"in window&&window.addEventListener("orientationchange",function(){a(90===Math.abs(window.orientation)?"landscape":"portrait")})},a.parseTime=function(a){if(!a)return b;var c,d,e,f=/(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})(\.\d+)?/g,g=f.exec(a);return g?(c=g[1]?parseInt(g[1],10):0,d=g[2]?parseInt(g[2],10):0,e=g[3]?parseInt(g[3],10):0,1e3*(3600*c+60*d+e)):b},a.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.toString.call(a)},a.makeArray=function(b){if(b){if(a.isArray(b))return b;var c=[];return c.push(b),c}return[]},a.convertStyleName=function(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})},a.setStyle=function(b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&b.style.setProperty(a.convertStyleName(d),c[d])},a.resetStyle=function(a){this.setStyle(a,{position:"initial",display:"block",margin:"0px",padding:"0px",border:"none",outline:"none",color:"#000000",width:"initial",height:"initial",zIndex:"auto",left:"initial",right:"initial",top:"initial",bottom:"initial",visibility:"visible",maxWidth:"initial",background:"none"})},a.createElement=function(a,c,d){c==b&&(c=!0);var e=document.createElement(a);return c&&this.resetStyle(e),this.setStyle(e,d),e},a.applyTemplateParams=function(a,b){b||(b={});for(var c,d,e=/\{(.+?)\}/,f=e.exec(a);null!=f;)c=f[1],d=b[c],"undefined"==typeof d&&(d=""),a=a.substring(0,f.index)+d+a.substring(f.index+c.length+2,a.length),f=e.exec(a);return a},a.getXmlHttp=function(){var a;if("undefined"!=typeof XMLHttpRequest)a=new XMLHttpRequest;else try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(d){a=b}}return a},a.setTextContent=function(a,b){for(;null!==a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))},a.replaceSchema=function(a){var b="https:"==document.location.protocol;return a.replace(/\s*https?:/,b?"https:":"http:")},a.isNumeric=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},a.injectCss=function(){if(!a.cssInjected){a.cssInjected=!0;var b=document.createElement("style");b.type="text/css",b.innerHTML="body.ivengo-disable-scrolling{     position:fixed !important;     overflow:hidden !important; }",document.getElementsByTagName("head")[0].appendChild(b)}},a.hasClass=function(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},a.addClass=function(b,c){a.hasClass(b,c)||(b.className+=" "+c)},a.removeClass=function(b,c){if(a.hasClass(b,c)){var d=new RegExp("(\\s|^)"+c+"(\\s|$)");b.className=b.className.replace(d," ")}},a.wrapElement=function(a,b){if(a.parentNode){var c=a.parentNode;c.insertBefore(b,a),c.removeChild(a)}b.appendChild(a)},a.getElementPosX=function(c,d){var e=window,f=c,g=0;do{for(;f&&"body"!==f.tagName.toLowerCase();)g+=f.offsetLeft,f=f.offsetParent;if(d){var h=a.frameManipulator.findContainingIFrame(e);h?(e=e.parent,f=h):e=b}else e=b}while(e);return g},a.getElementPosY=function(c,d){var e=window,f=c,g=0;do{for(;f&&"body"!==f.tagName.toLowerCase();)g+=f.offsetTop,f=f.offsetParent;if(d){var h=a.frameManipulator.findContainingIFrame(e);h?(e=e.parent,f=h):e=b}else e=b}while(e);return g},a.isElementScrollable=function(a){return a.scrollHeight>a.clientHeight},a.getAbsoluteUrl=function(a,b){var c=function(a){return 0===a.indexOf("http:")||0===a.indexOf("https:")||0===a.indexOf("ftp:")||0===a.indexOf("//")},d=function(a,b){return"/"===a.charAt(a.length-1)&&"/"===b.charAt(0)?a+b.substr(1):"/"!==a.charAt(a.length-1)&&"/"!==b.charAt(0)?a+"/"+b:a+b};if(c(b))return b;var e;return c(a)?e=a.replace(/\/?[^\/]*$/,""):(e="//"+window.location.hostname,e=d(e,window.location.pathname.replace(/\/?[^\/]*$/,"")),e=d(e,a.replace(/\/?[^\/]*$/,""))),d(e,b)},a.getContentPageDomain=function(){var a="";try{a=window.top.location.hostname}catch(b){a=window.location.hostname}return a},a.fillParameters=function(c,d){for(var e,f=/(\{\{|\{|%7B%7B|%7B|\[|%5B)([\w\d-_]+)(\}\}|\}|%7D%7D|%7D|\]|%5D)/g,g=c;e=f.exec(c);){var h=e[2];switch(h){case"content_page":g=g.replace(e[0],a.getContentPageDomain());break;case"content_page_href":var i="";try{i=encodeURIComponent(window.top.location.href)}catch(j){i=encodeURIComponent(window.location.href)}g=g.replace(e[0],i);break;case"cb":case"random":var k=Math.floor(89999*Math.random()+1e4);g=g.replace(e[0],k.toString());break;case"app_id":case"site_id":g=g.replace(e[0],a.appId);break;case"referer":case"referrer":g=g.replace(e[0],encodeURI(document.referrer));break;default:d&&d[h]!==b&&(g=g.replace(e[0],d[h]))}}return g}}(window.VengoSystem),function(a,b){function c(){this.cache={},this.webstorageSupported=null}c.prototype.isWebstorageSupported=function(){if(null===this.webstorageSupported)try{var a="ivengo-localstorage-test",b=Math.floor(100*Math.random()+1).toString();window.localStorage.setItem(a,b);var c=window.localStorage.getItem(a);window.localStorage.removeItem(a),this.webstorageSupported=b===c}catch(d){this.webstorageSupported=!1}return this.webstorageSupported},c.prototype.getItem=function(b,c){var d;if(this.isWebstorageSupported())try{d=localStorage.getItem(b)}catch(e){a.warn("Failed to retrieve a value from local storage"),d=this.cache[b]}else d=this.cache[b];return d||(d=c),d},c.prototype.setItem=function(b,c){if(this.cache[b]=c,this.isWebstorageSupported())try{localStorage.setItem(b,c)}catch(d){a.warn("Failed to save a value to local storage")}},c.prototype.clearCache=function(a){this.isWebstorageSupported()&&(localStorage.removeItem?localStorage.removeItem(a):localStorage.setItem(a,b))},c.prototype.clearCacheLike=function(a,b){if(this.isWebstorageSupported()){var c=new RegExp(a);Object.keys(localStorage).forEach(function(a){c.test(a)&&(b&&b.indexOf(a)>=0||this.clearCache(a))}.bind(this))}},c.prototype.clearAllCache=function(){this.isWebstorageSupported()&&Object.keys(localStorage).forEach(function(a){/^ivengo_/.test(a)&&localStorage.removeItem(a)})},a.localStorage=new c}(window.VengoSystem),function(a,b){function c(b,c){this.id=a.makeid(),this.type=b,this.url=c}c.fromXml=function(b){var d,e,f,g,h,i;switch(b.tagName){case"Impression":g=c.IMPRESSION;break;case"ClickTracking":g=c.CLICK;break;case"Tracking":switch(d=a.getRequiredAttribute(b,"event")){case"start":case"creativeView":g=c.IMPRESSION;break;case"skip":case"onSkipAd":g=c.SKIP;break;case"progress":g=c.PROGRESS,e=a.getRequiredAttribute(b,"offset"),f=a.parseTime(e),h=f?f:e;break;default:g=d}}return i=new c(g,a.getTagValue(b)),i.value=h,i},c.fromJson=function(b){var d=b.type,e=a.parseTime(b.offset),f=b.url,g=new c(d,f);return g.value=e,g},c.typeFromString=function(a){var b=a;switch(a){case"loading_complete":b=c.LOADING_COMPLETE;break;case"loading_failed":b=c.LOADING_FAILED;break;case"impression":b=c.IMPRESSION;break;case"impression_failed":b=c.IMPRESSION_FAILED;break;case"close":b=c.CLOSE;break;case"autoclose":b=c.AUTOCLOSE;break;case"click":b=c.CLICK;break;case"no_content":b=c.NO_CONTENT}return b},c.prototype.type,c.prototype.value,c.prototype.url,c.LOADING_COMPLETE="loading_complete",c.LOADING_FAILED="loading_failed",c.IMPRESSION="impression",c.IMPRESSION_FAILED="impression_failed",c.CLOSE="close",c.AUTOCLOSE="autoclose",c.FIRST_QUARTILE="firstQuartile",c.MIDPOINT="midpoint",c.THIRD_QUARTILE="thirdQuartile",c.COMPLETE="complete",c.PROGRESS="progress",c.SKIP="skip",c.CLICK="click",c.NO_CONTENT="no_content",c.prototype.send=function(b){var c=a.applyTemplateParams(this.url,b),d=new Image;d.src=c},c.prototype.toString=function(){return"[iVengo.TrackingEvent#"+this.id+"]"},a.TrackingEvent=c}(window.VengoSystem),function(a,b){function c(){}c.prototype.getBasicParameters=function(c,d){var e={app_id:a.appId,apiver:"3.0",libplatform:"Web",libver:a.libVer,dev_width:screen.width,dev_height:screen.height,dev_density:window.devicePixelRatio,domain:a.getContentPageDomain()};navigator.language&&navigator.language.length>=2&&(e.locale=navigator.language.substring(0,2)),a.frameManipulator.isInsideIFrame()&&(e.is_mediation=!0),a.isAnonymous()&&(e.is_anonymous=!0),a.getCachedUdid()&&(e.device_id=a.getCachedUdid());var f=function(a){for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];d!==b&&(e[c]=btoa(d))}};f(a.dmpManager.getValidCachedDmps()),c?a.geo.getLocation(function(a,b,c){a&&b&&(e.lat=a,e.lon=b),c&&(e.acc=c),d(e)}):d(e)},c.prototype.paramsToString=function(a){var b,c="";for(b in a)a.hasOwnProperty(b)&&(c&&(c+="&"),c+=b+"="+encodeURIComponent(a[b]));return c},c.prototype.toString=function(){return"[iVengo.CommonApiParameters]"},a.commonApiParameters=new c}(window.VengoSystem),function(a,b){function c(a){this.key=a.key,this.width=a.width,this.minWidth=a.minWidth,this.height=a.height,this.minHeight=a.minHeight,this.fullscreen=!!a.fullscreen,this.proportion=a.proportion?a.proportion:b,this.desktopMaxWidth=a.desktopMaxWidth,this.desktopMaxHeight=a.desktopMaxHeight,this.additionalHeight=a.additionalHeight}c.prototype.key,c.prototype.width,c.prototype.minWidth,c.prototype.height,c.prototype.minHeight,c.prototype.desktopMaxWidth=b,c.prototype.desktopMaxHeight=b,c.prototype.fullscreen,c.prototype.proportion,c.prototype.additionalHeight,c.BANNER_STANDARD=new c({key:"standart",width:320,height:50}),c.BANNER_CUBE=new c({key:"cube",width:320,height:320}),c.BANNER_INSITE=new c({key:"insite",proportion:16/9,desktopMaxWidth:640,additionalHeight:20}),c.BANNER_TOPLINE=new c({key:"insite",proportion:16/9,desktopMaxWidth:640,additionalHeight:20}),c.BANNER_INLINE=new c({key:"insite",proportion:16/9,desktopMaxWidth:640,additionalHeight:20}),c.BANNER_FULLSCREEN=new c({key:"fullscreen",fullscreen:!0}),c.VIDEO_SLIM=new c({key:"slim_video",width:320,height:50}),c.VIDEO_CUBE=new c({key:"inline_video",width:320,height:320}),c.VIDEO_FULLSCREEN=new c({key:"fullscreen_video",fullscreen:!0}),c.STATIC_FULLSCREEN=new c({key:"fullscreen_static",fullscreen:!0}),c.fromString=function(a){if("object"==typeof a&&a.key)return a;if("topline"===a)return c.BANNER_TOPLINE;if("inline"===a)return c.BANNER_INLINE;if("slim"===a)return c.BANNER_STANDARD;var d,e;for(d in c)if(c.hasOwnProperty(d)&&(e=c[d],e.key===a))return e;return b},c.prototype.toString=function(){return this.key},a.AdType=c}(window.VengoSystem),function(a,b){function c(b){this.id=a.makeid(),this.type=b,this.trackingEvents=[]}c.fromString=function(b,c){if(/^\s*\{/.test(c))return new a.BannerAd(b,c);if(/^\s*</.test(c))return new a.VideoAd(b,c);throw new Error("Cannot parse server response: "+c)},c.prototype.id,c.prototype.type,c.prototype.trackingEvents,c.prototype.addTrackingEvent=function(a){this.trackingEvents.push(a)},c.prototype.sendTrackingEvents=function(a,b){var c,d,e=this.trackingEvents.length;for(c=0;c<e;++c)d=this.trackingEvents[c],d.type===a&&d.send(b)},a.Ad=c}(window.VengoSystem),function(a,b){function c(b,c){var d;if(d="string"==typeof c||c instanceof String?JSON.parse(c):c,a.Ad.apply(this,arguments),this.originalResponse=d,this.type=b,this.code=d.code,d.hasOwnProperty("tracking")){var e,f,g,h,i;for(e in d.tracking)if(d.tracking.hasOwnProperty(e))if(f=a.TrackingEvent.typeFromString(e),g=d.tracking[e],a.isArray(g))for(i=g.length,h=0;h<i;++h)this.addTrackingEvent(new a.TrackingEvent(f,g[h]));else this.addTrackingEvent(new a.TrackingEvent(f,g))}if(d.hasOwnProperty("logo")){var j=typeof d.logo;"boolean"==j?this.watermark=d.logo:"number"==j?this.watermark=Boolean(d.logo):"string"==j?this.watermark=!/^(false|off)$/i.test(d.logo.toString()):this.watermark=!0}}c.prototype.__proto__=a.Ad.prototype,a.ImhoAd=c}(window.VengoSystem),function(a,b){function c(){this.loading=!1,this.loaded=!1,this.cacheTime=0,this.trackingEvents={},this.dmps={},this.loadCallbacks=[],this.delayed=[];var a=this.loadFromCache();a&&this.parseTrackingEvents(a)}c.prototype.isCacheValid=function(a,b){var c=(new Date).getTime();if(a){var d=(c-a)/6e4;return b?d<5:d<60}return!1},c.prototype.loadFromCache=function(){var b,c=a.localStorage.getItem(a.config.system+"_sdkeevents_cache");if(!c)return null;try{b=JSON.parse(c)}catch(d){}return b&&b.trackingEvents&&b.time&&this.isCacheValid(b.time)?(this.cacheTime=b.time,b.trackingEvents):null},c.prototype.saveToCache=function(b){var c={trackingEvents:b,time:(new Date).getTime()};a.localStorage.setItem(a.config.system+"_sdkeevents_cache",JSON.stringify(c))},c.prototype.loadFromServer=function(){a.debug(this+" Starting load");var b=0,c=a.trackingServerUrl+"sdkevents.json",d=this,e=a.getXmlHttp(),f=function(){b=0,e&&e.abort()};this.loading=!0,e.open("POST",c,!0);try{e.withCredentials=!0}catch(g){return a.error(d+" withCredentials attribute for xmlHttpRequest is not supported, aborting"),void this.onLoaded()}e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){if(4==e.readyState)if(200==e.status){a.debug(d+" Finished successfully"),clearTimeout(b),b=0;try{var c=JSON.parse(e.responseText);d.onLoaded(c)}catch(f){a.exception(d+" Failed to parse response "+f.message+" | "+e.responseText,f),d.onLoaded()}}else a.debug(d+" Failed with code "+e.status+": "+e.responseText),d.onLoaded()},e.onabort=function(){a.debug(d+" Request aborted on timeout"),d.onLoaded()},a.commonApiParameters.getBasicParameters(!1,function(c){try{var g=a.getUrlParameter("dsp_name");if(g){var h=parseInt(/rest_(\d+)/.exec(g)[1],10);c.ad_unit_id=h}}catch(i){a.warn(d+" Unrecognized dsp name format, skipping")}e.send(a.commonApiParameters.paramsToString(c)),b=setTimeout(f,1e4)})},c.prototype.parseTrackingEvents=function(b){if(this.trackingEvents=JSON.parse(JSON.stringify(b)),this.trackingEvents.hasOwnProperty("apiCall")?(this.dmps=this.trackingEvents.apiCall,delete this.trackingEvents.apiCall):this.dmps={},this.trackingEvents.hasOwnProperty("additionalDsp")){this.additionalDsp=this.trackingEvents.additionalDsp,this.imhoDsp={};var c="imho_";for(var d in this.additionalDsp)if(0===d.indexOf(c)){var e=this.additionalDsp[d];delete this.additionalDsp[d];var f=d.substr(c.length),g=a.AdType.fromString(f);if(!g)continue;var h=new a.ImhoAd(g,e);this.imhoDsp[g.key]=h}delete this.trackingEvents.additionalDsp}else this.additionalDsp={},this.imhoDsp={}},c.prototype.trackDelayed=function(){var a,b=this.delayed.length;for(a=0;a<b;++a)this.sendTracking(this.delayed.shift())},c.prototype.load=function(b){return this.isLoaded()?void b():void(this.isCacheValid(this.cacheTime,!0)?b():(this.loadCallbacks.push(b),a.getUDID(function(){this.isLoading()||this.loadFromServer()}.bind(this))))},c.prototype.onLoaded=function(b){for(this.loading=!1,this.loaded=!0,b&&(this.parseTrackingEvents(b),this.saveToCache(b),this.trackDelayed(),a.dmpManager.loadData(this.dmps,function(a){}.bind(this)));this.loadCallbacks.length;){var c=this.loadCallbacks.shift();c()}},c.prototype.isLoading=function(){return this.loading},c.prototype.isLoaded=function(){return this.loaded},c.prototype.track=function(a,b){var c=new Image;c.src=b},c.prototype.sendTracking=function(b){var c=this.trackingEvents[b];if(c&&a.isArray(c)){var d,e=c.length;for(d=0;d<e;++d)this.track(b,c[d])}else this.delayed.push(b)},c.prototype.getDsps=function(){return this.additionalDsp},c.prototype.getImhoAd=function(a){return this.imhoDsp?this.imhoDsp[a.key]:b},c.prototype.toString=function(){return"[iVengo.AdditionalTracking]"},a.additionalTracking=new c}(window.VengoSystem),function(a,b){function c(){if(this.insideIFrame=window.self!==window.top,this.framesStack=[],this.insideIFrame){var a;do{var b=a?a.window.parent:window.self;a=this.findWrapper(b),a&&this.framesStack.push(a)}while(a);var c,d=this.framesStack.length;for(c=0;c<d;++c)a=this.framesStack[c],0===c&&(this.iframe=a.iframe,this.iframeParent=a.iframeParent,this.isAdFox=!1,this.isDfp=!1,this.manipulateParent=!!this.iframeParent),this.isAdFox=this.isAdFox||a.isAdFox,this.isDfp=this.isDfp||a.isDfp,this.isAn=this.isAn||a.isAn}}c.prototype.__proto__=a.Events.prototype,c.prototype.findWrapper=function(a){if(a===a.parent)return b;var c={window:a,iframe:b,iframeParent:b,isAdFox:!1,isDfp:!1,isAn:!1,canManipulate:!1};try{var d=this.findContainingIFrame(a);if(d==b)return c;c.iframe=d,c.iframe.id&&c.iframe.id.toLowerCase().indexOf("adfox")!=-1&&(c.isAdFox=!0);for(var e=c.iframe.parentNode;e;){if(e.className){var f=e.className;if(f.indexOf("adfox-container")!==-1||f.indexOf("ivengo-container")!==-1){c.isAdFox=!0;break}if(f.indexOf("video-an")!==-1){c.isAn=!0;break}}if(e.id){var g=e.id;if(g.toLowerCase().indexOf("adfox")!=-1&&(c.isAdFox=!0),g.indexOf("gpt-ad")!==-1||g.indexOf("google_ads_iframe")!==-1){c.isDfp=!0;break}}e=e.parentNode}e||(e=c.iframe.parentNode),c.iframeParent=e,c.canManipulate=!!c.iframeParent}catch(h){c.canManipulate=!1}return c},c.prototype.getTopContainer=function(){return this.framesStack[this.framesStack.length-1].iframeParent},c.prototype.findContainingIFrame=function(a){if(a===a.parent)return b;for(var c=a.parent.document.getElementsByTagName("iframe"),d=0;d<c.length;d++)if(c[d].contentWindow&&c[d].contentWindow===a)return c[d];return b},c.prototype.isInsideIFrame=function(){return this.insideIFrame},c.prototype.isInsideBannerNetwork=function(){return this.isAdFox||this.isDfp},c.prototype.guessBannerWidth=function(){if(!this.isInsideBannerNetwork())return 0;try{for(var a=this.iframeParent;a&&a.clientWidth<10;)a=a.parentNode;return a?a.clientWidth:0}catch(b){return 0}},c.prototype.alignParentNode=function(){this.isInsideBannerNetwork()&&(this.iframeParent.style.margin="auto")},c.prototype.canManipulateParent=function(){return this.manipulateParent},c.prototype.getHostWindow=function(){return window.top},c.prototype.propertiesToSave=["display","margin","padding","border","outline","background","color","width","height","position","left","top","bottom","right","zIndex"],c.prototype.saveStyle=function(a){var b,c={},d=this.propertiesToSave.length;for(b=0;b<d;++b)c[this.propertiesToSave[b]]=a.style[this.propertiesToSave[b]];return c},c.prototype.resetStyle=function(a){a.style.display="block",a.style.margin="0px",a.style.padding="0px",a.style.border="none",a.style.outline="none",a.style.background="",a.style.color="#000000",a.style.width="initial",a.style.height="initial"},c.prototype.restoreStyle=function(a,b){var c,d=this.propertiesToSave.length;for(c=0;c<d;++c)a.style[this.propertiesToSave[c]]=b[this.propertiesToSave[c]]},c.prototype.resize=function(a,b){if(this.isInsideIFrame()&&this.canManipulateParent()&&!this.expanded){var c,d=this.framesStack.length;for(c=0;c<d;++c){var e=this.framesStack[c];e.canManipulate&&(a&&(e.iframe.style.width=a,e.iframeParent.style.width=a),b&&(e.iframe.style.height=b,e.iframeParent.style.height=b))}}},c.prototype.expand=function(){if(this.canManipulateParent()){this.expanded=!0,a.fullscreenMode.enable();var b,c=this.framesStack.length;for(b=0;b<c;++b){var d=this.framesStack[b];d.canManipulate&&(d.parentSavedState=this.saveStyle(d.iframeParent),d.iframeSavedState=this.saveStyle(d.iframe),this.resetStyle(d.iframe),d.iframe.style.position="absolute",d.iframe.style.width="100%",d.iframe.style.height="100%",d.iframe.style.overflow="hidden",d.iframe.scrolling="no",this.resetStyle(d.iframeParent),d.iframeParent.style.display="block",d.iframeParent.style.visibility="visible",d.iframeParent.style.margin="0px",d.iframeParent.style.padding="0px",d.iframeParent.style.border="none",d.iframeParent.style.outline="none",d.iframeParent.style.background="rgba(0,0,0,0.5)",d.iframeParent.style.position="fixed",d.iframeParent.style.width="100%",d.iframeParent.style.height="100%",d.iframeParent.style.left="0",d.iframeParent.style.top="0",d.iframeParent.style.right="0",d.iframeParent.style.bottom="0",d.iframeParent.style.zIndex=Math.pow(2,53))}}},c.prototype.collapse=function(){if(this.canManipulateParent()){this.expanded=!1,a.fullscreenMode.disable();var c,d=this.framesStack.length;for(c=0;c<d;++c){var e=this.framesStack[c];e.iframeSavedState&&(e.restoreStyle(e.iframe,e.iframeSavedState),e.iframeSavedState=b),e.parentSavedState&&(e.restoreStyle(e.iframeParent,e.parentSavedState),e.parentSavedState=b)}}},c.prototype.hide=function(a,c,d){if(a==b&&(a=0),a<0&&(a=0),this.canManipulateParent()){var e,f=this.framesStack.length;for(e=0;e<f;++e){var g=this.framesStack[e];g.canManipulate&&(a?(g.iframeParent.style.transition="height "+a+"ms, opacity "+a+"ms",g.iframeParent.style.height=0,g.iframeParent.style.opacity=0):(g.iframeParent.style.display="none",g.iframeParent.style.visibility="hidden"))}}a?setTimeout(function(){var a=function(){d&&d()};c?(c(),setTimeout(a,20)):a()},a):d&&d()},c.prototype.show=function(a,c,d){if(a==b&&(a=0),a<0&&(a=0),this.canManipulateParent()){var e,f=this.framesStack.length;for(e=0;e<f;++e){var g=this.framesStack[e];g.canManipulate&&(a?(g.iframeParent.style.height=0,g.iframeParent.style.opacity=0,g.iframeParent.style.transition="height "+a+"ms, opacity "+a+"ms ease-in",setTimeout(function(b){b.style.visibility="visible",b.style.height=parseInt(c)+"px",b.style.opacity=1,setTimeout(function(a){a.style.transition=""}.bind(this,b),a)}.bind(this,g.iframeParent),1)):(g.iframeParent.style.display="block",g.iframeParent.style.visibility="visible"))}this.iframe.style.display="block",this.iframe.style.visibility="visible",this.iframe.marginwidth="0",this.iframe.marginheight="0",this.iframe.frameBorder="0",this.iframe.scrolling="no",document&&document.body&&(document.body.style.margin="0")}a?setTimeout(function(){d&&d()}.bind(this),a):d&&d()},a.frameManipulator=new c}(window.VengoSystem),function(a,b){function c(){a.frameManipulator.canManipulateParent()?this.hostWindow=a.frameManipulator.getHostWindow():this.hostWindow=window,this.startViewportMetaTag=this.hostWindow.document.querySelector("meta[name='viewport']")}c.prototype.__proto__=a.Events.prototype,c.prototype.getHostPageViewportTag=function(){return this.startViewportMetaTag},c.prototype.getDeviceWidth=function(){return this.viewportAltered?window.innerWidth:a.isMobilePhone()&&window.orientation!==b?90==Math.abs(window.orientation)||270==window.orientation?Math.max(screen.height,screen.width):Math.min(screen.height,screen.width):screen.width},c.prototype.getViewportWidth=function(){var b,c;return a.frameManipulator.isInsideIFrame()&&a.frameManipulator.canManipulateParent()?(b=this.hostWindow,c=b.document):(b=window,c=b.document),b.innerWidth?b.innerWidth:c&&c.documentElement&&!isNaN(c.documentElement.clientWidth)?c.documentElement.clientWidth:0},c.prototype.getViewportHeight=function(b){var c;return b||(b=a.frameManipulator.isInsideIFrame()&&a.frameManipulator.canManipulateParent()?this.hostWindow:window),c=b.document,b.innerWidth?b.innerHeight:c&&c.documentElement&&!isNaN(c.documentElement.clientHeight)?c.documentElement.clientHeight:0},c.prototype.getViewportScrollX=function(){var b=window;return a.frameManipulator.isInsideIFrame()&&a.frameManipulator.canManipulateParent()&&(b=this.hostWindow),b.pageXOffset?b.pageXOffset:Math.max(b.document.documentElement.scrollLeft,b.document.body.scrollLeft)},c.prototype.getViewportScrollY=function(){var b=window;return a.frameManipulator.isInsideIFrame()&&a.frameManipulator.canManipulateParent()&&(b=this.hostWindow),b.pageYOffset?b.pageYOffset:Math.max(b.document.documentElement.scrollTop,b.document.body.scrollTop)},c.prototype.getViewportScale=function(){return this.getDeviceWidth()/this.hostWindow.innerWidth},c.prototype.isProperViewport=function(){var a=this.hostWindow.document.querySelector("meta[name='viewport']");if(a){var b=a.getAttribute("content");if(b){if(/width\s*=\s*device-width/.test(b))return!0;var c=/initial-scale\s*=\s*([\d\.]+)/.exec(b);if(c){var d=parseFloat(c[1]);if(Math.abs(d-1)<.001)return!0}var e=/maximum-scale\s*=\s*([\d\.]+)/.exec(b),f=/minimum-scale\s*=\s*([\d\.]+)/.exec(b);if(f&&e){var g=parseFloat(e[1]),h=parseFloat(f[1]);if(Math.abs(h-1)<.001&&Math.abs(g-1)<.001)return!0}}}return!1},c.prototype.isViewportScaled=function(){return Math.abs(this.getViewportScale()-1)>.001},c.prototype.saveState=function(){this.startScale=this.getViewportScale();var c=this.hostWindow.document.querySelector("meta[name='viewport']");c?(this.startViewportMetaTag=c,this.startViewport=c.getAttribute("content"),a.log(this.toString()+" Saved viewport: "+this.startViewport)):(this.startViewport=b,a.log(this.toString()+" No viewport to save"))},c.prototype.setUnscaledViewport=function(){if(this.isViewportScaled()){a.log(this.toString()+" Altering viewport"),a.injectCss(),a.addClass(this.hostWindow.document.body,"ivengo-disable-margins"),this.viewportAltered=!0;var b="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"+(a.isiOS()?", shrink-to-fit=no":"");this.startViewportMetaTag?this.startViewportMetaTag.setAttribute("content",b):(this.temporaryMetaTag=this.hostWindow.document.createElement("meta"),this.temporaryMetaTag.name="viewport",this.temporaryMetaTag.content=b,this.hostWindow.document.getElementsByTagName("head")[0].appendChild(this.temporaryMetaTag))}else a.log(this.toString()+" Viewport is ok, not doing any modifications"),this.viewportAltered=!1},c.prototype.restoreViewport=function(){if(this.viewportAltered){var c="initial-scale="+this.startScale+", minimum-scale="+this.startScale+", maximum-scale="+this.startScale+(a.isiOS()?", shrink-to-fit=no":"");a.log(this.toString()+" Restoring viewport to scale "+this.startScale),a.removeClass(this.hostWindow.document.body,"ivengo-disable-margins"),this.startViewportMetaTag?this.startViewportMetaTag.setAttribute("content",c):this.temporaryMetaTag.setAttribute("content",c);var d=function(){if(this.startViewportMetaTag)this.startViewportMetaTag.setAttribute("content",this.startViewport);else{var c="minimum-scale=0.1, maximum-scale=10.0, user-scalable=yes"+(a.isiOS()?", shrink-to-fit=yes":"");this.temporaryMetaTag.setAttribute("content",c),this.temporaryMetaTag.parentNode.removeChild(this.temporaryMetaTag),this.temporaryMetaTag=b}}.bind(this);a.isiOS()?setTimeout(d,500):d(),this.viewportAltered=!1}},c.prototype.toString=function(){return"[iVengo.ViewportManipulator]"},a.viewportManipulator=new c}(window.VengoSystem),function(a){"use strict";function b(){return Date.now?Date.now():(new Date).now()}function c(a,b,c){var d=a.indexOf("?")>=0?"&":"?";return a+d+encodeURIComponent(b)+"="+encodeURIComponent(c)}function d(b){this.pos=0,this.chunkSize=b?b:1e4,this.contentSize=void 0,this.onDataReceived=null,this.onFinish=null,this.url=null,this.xhr=null,this.downloadSpeed=void 0,this.isIPhone=!!/iphone/i.exec(a.navigator.userAgent)}d.prototype.open=function(a){this.url=a,this.pos=0,this.requestNext()},d.prototype.requestNext=function(){var a=Math.round(this.chunkSize);this.contentSize&&(a=Math.min(a,this.contentSize-this.pos));var d=this;this.xhr=new XMLHttpRequest,this.xhr.responseType="arraybuffer";var e=this.pos+"-"+(this.pos+a-1),f=this.url;this.isIPhone&&(f=c(f,"range",e)),this.queriedRange={start:this.pos,end:this.pos+a-1},this.xhr.open("GET",f,!0),this.xhr.setRequestHeader("Range","bytes="+e),this.xhr.onreadystatechange=function(){if(d.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&(d.speedTime=b()),d.xhr.readyState===XMLHttpRequest.DONE){if(!d.xhr||!d.xhr.response)return;var a=d.xhr.response.byteLength,c=b();if(d.downloadSpeed=a/((c-d.speedTime)/1e3),!d.contentSize){var e=d.xhr.getResponseHeader("Content-Range");if(e){var f=/(\d+)-(\d+)\/(\d+)$/.exec(e);if(!f)throw new Error("Content-range does not exists in response");
var g=parseInt(f[1]),h=parseInt(f[2]);if(d.contentSize=parseInt(f[3]),d.queriedRange.start!==g||d.queriedRange.end!==h)throw new Error("Invalid queried range in response")}else d.contentSize=a}d.onDataReceived&&d.onDataReceived(d.xhr.response),d.pos+=a,d.pos<d.contentSize?d.requestNext():d.onFinish&&d.onFinish()}},this.xhr.send()},d.prototype.cancel=function(){this.xhr&&this.xhr.abort()};var e=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)}}(),f=function(a,b){b=b||{},this.progressive=b.progressive!==!1,this.benchmark=!!b.benchmark,this.canvas=b.canvas||document.createElement("canvas"),this.autoplay=!!b.autoplay,this.wantsToPlay=this.autoplay,this.loop=!!b.loop,this.seekable=!!b.seekable,this.externalLoadCallback=b.onload||null,this.externalDecodeCallback=b.ondecodeframe||null,this.externalFinishedCallback=b.onfinished||null,this.streamReaderAllowed=void 0===b.streamReaderAllowed||b.streamReaderAllowed,this.fetchAllowed=void 0===b.fetchAllowed||b.fetchAllowed,this.showLoader=b.showLoader,this.customIntraQuantMatrix=new Uint8Array(64),this.customNonIntraQuantMatrix=new Uint8Array(64),this.blockData=new Int32Array(64),this.zeroBlockData=new Int32Array(64),this.fillArray(this.zeroBlockData,0),this.duration=b.duration,this.dataSize=b.dataSize,this.fetching=!1,this.prefetchDuration=b.prefetchDuration?b.prefetchDuration:1e3,!b.forceCanvas2D&&this.initWebGL()?this.renderFrame=this.renderFrameGL:(this.canvasContext=this.canvas.getContext("2d"),this.renderFrame=this.renderFrame2D),a instanceof WebSocket?(this.client=a,this.client.onopen=this.initSocketClient.bind(this)):this.load(a)};f.prototype.getCurrentTime=function(){return this.currentTime},f.prototype.waitForIntraFrame=!0,f.prototype.socketBufferSize=524288,f.prototype.initSocketClient=function(){this.buffer=new J(new ArrayBuffer(this.socketBufferSize)),this.nextPictureBuffer=new J(new ArrayBuffer(this.socketBufferSize)),this.nextPictureBuffer.writePos=0,this.nextPictureBuffer.chunkBegin=0,this.nextPictureBuffer.lastWriteBeforeWrap=0,this.client.binaryType="arraybuffer",this.client.onmessage=this.receiveSocketMessage.bind(this)},f.prototype.decodeSocketHeader=function(a){a[0]===g.charCodeAt(0)&&a[1]===g.charCodeAt(1)&&a[2]===g.charCodeAt(2)&&a[3]===g.charCodeAt(3)&&(this.width=256*a[4]+a[5],this.height=256*a[6]+a[7],this.initBuffers())},f.prototype.receiveSocketMessage=function(a){var b=new Uint8Array(a.data);this.sequenceStarted||this.decodeSocketHeader(b);var c=this.buffer,d=this.nextPictureBuffer;d.writePos+b.length>d.length&&(d.lastWriteBeforeWrap=d.writePos,d.writePos=0,d.index=0),d.bytes.set(b,d.writePos),d.writePos+=b.length;for(var f=0;;){if(f=d.findNextMPEGStartCode(),f===J.NOT_FOUND||d.index>>3>d.writePos)return void(d.index=Math.max(d.writePos-3,0)<<3);if(f===C)break}if(this.waitForIntraFrame)return d.advance(10),void(d.getBits(3)===w&&(this.waitForIntraFrame=!1,d.chunkBegin=d.index-13>>3));this.currentPictureDecoded||this.decodePicture(h);var g=d.index>>3;if(g>d.chunkBegin)c.bytes.set(d.bytes.subarray(d.chunkBegin,g)),c.writePos=g-d.chunkBegin;else{c.bytes.set(d.bytes.subarray(d.chunkBegin,d.lastWriteBeforeWrap));var i=d.lastWriteBeforeWrap-d.chunkBegin;c.bytes.set(d.bytes.subarray(0,g),i),c.writePos=g+i}c.index=0,d.chunkBegin=g,this.currentPictureDecoded=!1,e(this.scheduleDecoding.bind(this),this.canvas)},f.prototype.scheduleDecoding=function(){this.decodePicture(),this.currentPictureDecoded=!0},f.prototype.isRecording=!1,f.prototype.recorderWaitForIntraFrame=!1,f.prototype.recordedFrames=0,f.prototype.recordedSize=0,f.prototype.didStartRecordingCallback=null,f.prototype.recordBuffers=[],f.prototype.canRecord=function(){return this.client&&this.client.readyState===this.client.OPEN},f.prototype.startRecording=function(a){if(this.canRecord()){this.discardRecordBuffers(),this.isRecording=!0,this.recorderWaitForIntraFrame=!0,this.didStartRecordingCallback=a||null,this.recordedFrames=0,this.recordedSize=0;var b=this.width>>4,c=(15&this.width)<<4|this.height>>8,d=255&this.height;this.recordBuffers.push(new Uint8Array([0,0,1,179,b,c,d,19,255,255,225,88,0,0,1,184,0,8,0,0,0,0,1,0]))}},f.prototype.recordFrameFromCurrentBuffer=function(){if(this.isRecording){if(this.recorderWaitForIntraFrame){if(this.pictureCodingType!==w)return;this.recorderWaitForIntraFrame=!1,this.didStartRecordingCallback&&this.didStartRecordingCallback(this)}this.recordedFrames++,this.recordedSize+=this.buffer.writePos,this.recordBuffers.push(new Uint8Array(this.buffer.bytes.subarray(0,this.buffer.writePos)))}},f.prototype.discardRecordBuffers=function(){this.recordBuffers=[],this.recordedFrames=0},f.prototype.stopRecording=function(){var a=new Blob(this.recordBuffers,{type:"video/mpeg"});return this.discardRecordBuffers(),this.isRecording=!1,a},f.prototype.intraFrames=[],f.prototype.currentFrame=-1,f.prototype.currentTime=0,f.prototype.frameCount=0,f.prototype.duration=0,f.prototype.progressiveMinSize=10240,f.prototype.fetchReaderPump=function(a){var b=this;a.read().then(function(c){b.fetchReaderReceive(a,c)})},f.prototype.fetchData=function(a,b){if(b){if(this.seekable){var c=this.buffer.index;this.collectIntraFrames(),this.buffer.index=c}return this.duration=this.frameCount/this.pictureRate,this.lastFrameIndex=this.buffer.writePos<<3,this.sequenceStarted&&this.wantsToPlay&&!this.playing&&this.play(),!1}if(this.buffer.push(a),this.lastFrameIndex=this.findLastPictureStartCode(1),!this.sequenceStarted&&this.buffer.writePos>=this.progressiveMinSize)this.findStartCode(z),this.firstSequenceHeader=this.buffer.index,this.decodeSequenceHeader(),this.nextFrame(),this.autoplay&&this.play(),this.externalLoadCallback&&this.externalLoadCallback(this);else if(this.sequenceStarted&&this.wantsToPlay&&!this.playing){if(this.dataSize&&this.duration){var d=this.buffer.writePos-(this.buffer.index>>3),e=this.dataSize/this.duration,f=d/e;if(f<this.prefetchDuration)return!0}this.play()}else if(!this.sequenceStarted){var g={loaded:this.buffer.writePos,total:this.progressiveMinSize};this.showLoader&&(this.gl?this.updateLoaderGL(g):this.updateLoader2D(g))}return!0},f.prototype.fetchReaderReceive=function(a,b){this.fetchData(b.value,b.done)&&this.fetchReaderPump(a)},f.prototype.findLastPictureStartCode=function(a){void 0===a&&(a=1);for(var b=this.buffer.bytes,c=this.buffer.writePos;c>3;c--)if(b[c]==C&&1==b[c-1]&&0==b[c-2]&&0==b[c-3]&&(a--,0===a))return c-3<<3;return 0},f.prototype.load=function(b){this.url=b,this.fetching=!0;var c=this;if(this.progressive&&this.fetchAllowed&&a.fetch&&a.ReadableByteStream){var e=new Headers;e.append("Content-Type","video/mpeg"),fetch(b,{headers:e}).then(function(a){var b=a.headers.get("Content-Length"),d=a.body.getReader();c.buffer=new J(new ArrayBuffer(b)),c.buffer.writePos=0,c.fetchReaderPump(d)})}else if(this.progressive&&this.streamReaderAllowed){var f=new d;this.streamReader=f,f.onDataReceived=function(a){c.dataSize=f.contentSize,f.chunkSize=Math.min(f.downloadSpeed,1e6),c.buffer||(c.buffer=new J(new ArrayBuffer(f.contentSize)),c.buffer.writePos=0),c.fetchData(new Uint8Array(a))},f.onFinish=function(){c.fetchData(null,!0)},f.open(b)}else{var g=new XMLHttpRequest;g.onreadystatechange=function(){g.readyState===g.DONE&&200===g.status&&c.loadCallback(g.response)},this.showLoader&&(g.onprogress=this.gl?this.updateLoaderGL.bind(this):this.updateLoader2D.bind(this)),g.open("GET",b),g.responseType="arraybuffer",g.send()}},f.prototype.updateLoader2D=function(a){var b=a.loaded/a.total,c=this.canvas.width,d=this.canvas.height,e=this.canvasContext;e.fillStyle="#222",e.fillRect(0,0,c,d),e.fillStyle="#fff",e.fillRect(0,d-d*b,c,d*b)},f.prototype.updateLoaderGL=function(a){var b=this.gl;b.uniform1f(b.getUniformLocation(this.loadingProgram,"loaded"),a.loaded/a.total),b.drawArrays(b.TRIANGLE_STRIP,0,4)},f.prototype.loadCallback=function(a){this.buffer=new J(a),this.seekable&&(this.collectIntraFrames(),this.buffer.index=0),this.findStartCode(z),this.firstSequenceHeader=this.buffer.index,this.decodeSequenceHeader(),this.duration=this.frameCount/this.pictureRate,this.nextFrame(),this.autoplay&&this.play(),this.externalLoadCallback&&this.externalLoadCallback(this)},f.prototype.collectIntraFrames=function(){var a;for(a=0;this.findStartCode(C)!==J.NOT_FOUND;a++)this.buffer.advance(10),this.buffer.getBits(3)===w&&this.intraFrames.push({frame:a,index:this.buffer.index-13});this.frameCount=a},f.prototype.seekToFrame=function(a,b){if(a<0||a>=this.frameCount||!this.intraFrames.length)return!1;for(var c=null,d=0;d<this.intraFrames.length&&this.intraFrames[d].frame<=a;d++)c=this.intraFrames[d];if(this.buffer.index=c.index,this.currentFrame=c.frame-1,b){for(var e=c.frame;e<a;e++)this.decodePicture(h),this.findStartCode(C);this.currentFrame=a-1}return this.decodePicture(),!0},f.prototype.seekToTime=function(a,b){this.seekToFrame(a*this.pictureRate|0,b)},f.prototype.play=function(){this.playing||(this.targetTime=this.now(),this.playing=!0,this.wantsToPlay=!0,this.scheduleNextFrame(),this.fetching=!1)},f.prototype.pause=function(){this.playing=!1,this.wantsToPlay=!1},f.prototype.stop=function(){this.currentFrame=-1,this.buffer&&(this.buffer.index=this.firstSequenceHeader),this.streamReader&&(this.streamReader.cancel(),this.streamReader=null),this.playing=!1,this.client&&(this.client.close(),this.client=null),this.wantsToPlay=!1},f.prototype.readCode=function(a){var b=0;do b=a[b+this.buffer.getBits(1)];while(b>=0&&0!==a[b]);return a[b+2]},f.prototype.findStartCode=function(a){for(var b=0;;)if(b=this.buffer.findNextMPEGStartCode(),b===a||b===J.NOT_FOUND)return b},f.prototype.fillArray=function(a,b){for(var c=0,d=a.length;c<d;c++)a[c]=b},f.prototype.pictureRate=30,f.prototype.lateTime=0,f.prototype.firstSequenceHeader=0,f.prototype.targetTime=0,f.prototype.benchmark=!1,f.prototype.benchFrame=0,f.prototype.benchDecodeTimes=0,f.prototype.benchAvgFrameTime=0,f.prototype.now=function(){return a.performance?a.performance.now():Date.now()},f.prototype.nextFrame=function(){if(this.buffer)for(var a=this.now();;){var b=this.buffer.tryFindNextMPEGStartCode();if(b.code===z)this.buffer.index=b.index,this.decodeSequenceHeader();else{if(b.code===C)return this.progressive&&b.index>=this.lastFrameIndex?(this.playing=!1,void(this.fetching=!0)):(this.buffer.index=b.index,this.playing&&this.scheduleNextFrame(),this.decodePicture(),this.benchDecodeTimes+=this.now()-a,this.canvas);if(b.code===J.NOT_FOUND)return this.buffer.index=b.index,this.stop(),this.externalFinishedCallback&&this.externalFinishedCallback(this),this.loop&&this.sequenceStarted&&this.play(),null;this.buffer.index=b.index}}},f.prototype.scheduleNextFrame=function(){this.lateTime=this.now()-this.targetTime;var b=Math.max(0,1e3/this.pictureRate-this.lateTime);this.targetTime=this.now()+b,this.benchmark?(this.benchFrame++,this.benchFrame>=120&&(this.benchAvgFrameTime=this.benchDecodeTimes/this.benchFrame,this.benchFrame=0,this.benchDecodeTimes=0,a.console&&console.log("Average time per frame:",this.benchAvgFrameTime,"ms")),setTimeout(this.nextFrame.bind(this),0)):b<18?this.scheduleAnimation():setTimeout(this.scheduleAnimation.bind(this),b)},f.prototype.scheduleAnimation=function(){e(this.nextFrame.bind(this),this.canvas)},f.prototype.decodeSequenceHeader=function(){this.width=this.buffer.getBits(12),this.height=this.buffer.getBits(12),this.buffer.advance(4),this.pictureRate=i[this.buffer.getBits(4)],this.buffer.advance(30),this.initBuffers();var a;if(this.buffer.getBits(1)){for(a=0;a<64;a++)this.customIntraQuantMatrix[j[a]]=this.buffer.getBits(8);this.intraQuantMatrix=this.customIntraQuantMatrix}if(this.buffer.getBits(1)){for(a=0;a<64;a++)this.customNonIntraQuantMatrix[j[a]]=this.buffer.getBits(8);this.nonIntraQuantMatrix=this.customNonIntraQuantMatrix}},f.prototype.initBuffers=function(){if(this.intraQuantMatrix=k,this.nonIntraQuantMatrix=l,this.mbWidth=this.width+15>>4,this.mbHeight=this.height+15>>4,this.mbSize=this.mbWidth*this.mbHeight,this.codedWidth=this.mbWidth<<4,this.codedHeight=this.mbHeight<<4,this.codedSize=this.codedWidth*this.codedHeight,this.halfWidth=this.mbWidth<<3,this.halfHeight=this.mbHeight<<3,this.quarterSize=this.codedSize>>2,!this.sequenceStarted){this.sequenceStarted=!0;var b=a.Uint8ClampedArray||a.Uint8Array;a.Uint8ClampedArray||(this.copyBlockToDestination=this.copyBlockToDestinationClamp,this.addBlockToDestination=this.addBlockToDestinationClamp),this.currentY=new b(this.codedSize),this.currentY32=new Uint32Array(this.currentY.buffer),this.currentCr=new b(this.codedSize>>2),this.currentCr32=new Uint32Array(this.currentCr.buffer),this.currentCb=new b(this.codedSize>>2),this.currentCb32=new Uint32Array(this.currentCb.buffer),this.forwardY=new b(this.codedSize),this.forwardY32=new Uint32Array(this.forwardY.buffer),this.forwardCr=new b(this.codedSize>>2),this.forwardCr32=new Uint32Array(this.forwardCr.buffer),this.forwardCb=new b(this.codedSize>>2),this.forwardCb32=new Uint32Array(this.forwardCb.buffer),this.canvas.width=this.width,this.canvas.height=this.height,this.gl?(this.gl.useProgram(this.program),this.gl.viewport(0,0,this.width,this.height)):(this.currentRGBA=this.canvasContext.getImageData(0,0,this.width,this.height),this.fillArray(this.currentRGBA.data,255))}},f.prototype.currentY=null,f.prototype.currentCr=null,f.prototype.currentCb=null,f.prototype.currentRGBA=null,f.prototype.pictureCodingType=0,f.prototype.forwardY=null,f.prototype.forwardCr=null,f.prototype.forwardCb=null,f.prototype.fullPelForward=!1,f.prototype.forwardFCode=0,f.prototype.forwardRSize=0,f.prototype.forwardF=0,f.prototype.decodePicture=function(a){if(this.currentFrame++,this.currentTime=this.currentFrame/this.pictureRate,this.buffer.advance(10),this.pictureCodingType=this.buffer.getBits(3),this.buffer.advance(16),!(this.pictureCodingType<=0||this.pictureCodingType>=y)){if(this.pictureCodingType===x){if(this.fullPelForward=this.buffer.getBits(1),this.forwardFCode=this.buffer.getBits(3),0===this.forwardFCode)return;this.forwardRSize=this.forwardFCode-1,this.forwardF=1<<this.forwardRSize}var b=0;do b=this.buffer.findNextMPEGStartCode();while(b===D||b===E);for(;b>=A&&b<=B;)this.decodeSlice(255&b),b=this.buffer.findNextMPEGStartCode();if(this.buffer.rewind(32),this.recordFrameFromCurrentBuffer(),a!==h&&(this.renderFrame(),this.externalDecodeCallback&&this.externalDecodeCallback(this,this.canvas)),this.pictureCodingType===w||this.pictureCodingType===x){var c=this.forwardY,d=this.forwardY32,e=this.forwardCr,f=this.forwardCr32,g=this.forwardCb,i=this.forwardCb32;this.forwardY=this.currentY,this.forwardY32=this.currentY32,this.forwardCr=this.currentCr,this.forwardCr32=this.currentCr32,this.forwardCb=this.currentCb,this.forwardCb32=this.currentCb32,this.currentY=c,this.currentY32=d,this.currentCr=e,this.currentCr32=f,this.currentCb=g,this.currentCb32=i}}},f.prototype.YCbCrToRGBA=function(){for(var a,b,c,d,e,f=this.currentY,g=this.currentCb,h=this.currentCr,i=this.currentRGBA.data,j=0,k=this.codedWidth,l=this.codedWidth+(this.codedWidth-this.width),m=0,n=this.halfWidth-(this.width>>1),o=0,p=4*this.width,q=4*this.width,r=this.width>>1,s=this.height>>1,t=0;t<s;t++){for(var u=0;u<r;u++){a=g[m],b=h[m],m++,c=b+(103*b>>8)-179,d=(88*a>>8)-44+(183*b>>8)-91,e=a+(198*a>>8)-227;var v=f[j++],w=f[j++];i[o]=v+c,i[o+1]=v-d,i[o+2]=v+e,i[o+4]=w+c,i[o+5]=w-d,i[o+6]=w+e,o+=8;var x=f[k++],y=f[k++];i[p]=x+c,i[p+1]=x-d,i[p+2]=x+e,i[p+4]=y+c,i[p+5]=y-d,i[p+6]=y+e,p+=8}j+=l,k+=l,o+=q,p+=q,m+=n}},f.prototype.renderFrame2D=function(){this.YCbCrToRGBA(),this.canvasContext.putImageData(this.currentRGBA,0,0)},f.prototype.gl=null,f.prototype.program=null,f.prototype.YTexture=null,f.prototype.CBTexture=null,f.prototype.CRTexture=null,f.prototype.createTexture=function(a,b){var c=this.gl,d=c.createTexture();return c.bindTexture(c.TEXTURE_2D,d),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.uniform1i(c.getUniformLocation(this.program,b),a),d},f.prototype.compileShader=function(a,b){var c=this.gl,d=c.createShader(a);if(c.shaderSource(d,b),c.compileShader(d),!c.getShaderParameter(d,c.COMPILE_STATUS))throw new Error(c.getShaderInfoLog(d));return d},f.prototype.initWebGL=function(){var a;try{a=this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")}catch(b){return!1}if(!a)return!1;if(this.glBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.glBuffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),a.STATIC_DRAW),this.program=a.createProgram(),a.attachShader(this.program,this.compileShader(a.VERTEX_SHADER,H)),a.attachShader(this.program,this.compileShader(a.FRAGMENT_SHADER,F)),a.linkProgram(this.program),!a.getProgramParameter(this.program,a.LINK_STATUS))throw new Error(a.getProgramInfoLog(this.program));a.useProgram(this.program),this.YTexture=this.createTexture(0,"YTexture"),this.CBTexture=this.createTexture(1,"CBTexture"),this.CRTexture=this.createTexture(2,"CRTexture");var c=a.getAttribLocation(this.program,"vertex");return a.enableVertexAttribArray(c),a.vertexAttribPointer(c,2,a.FLOAT,!1,0,0),this.loadingProgram=a.createProgram(),a.attachShader(this.loadingProgram,this.compileShader(a.VERTEX_SHADER,H)),a.attachShader(this.loadingProgram,this.compileShader(a.FRAGMENT_SHADER,G)),a.linkProgram(this.loadingProgram),a.useProgram(this.loadingProgram),c=a.getAttribLocation(this.loadingProgram,"vertex"),a.enableVertexAttribArray(c),a.vertexAttribPointer(c,2,a.FLOAT,!1,0,0),!0},f.prototype.renderFrameGL=function(){var a=this.gl,b=new Uint8Array(this.currentY.buffer),c=new Uint8Array(this.currentCr.buffer),d=new Uint8Array(this.currentCb.buffer);a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.YTexture),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,this.codedWidth,this.height,0,a.LUMINANCE,a.UNSIGNED_BYTE,b),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.CBTexture),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,this.halfWidth,this.height/2,0,a.LUMINANCE,a.UNSIGNED_BYTE,c),a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,this.CRTexture),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,this.halfWidth,this.height/2,0,a.LUMINANCE,a.UNSIGNED_BYTE,d),a.drawArrays(a.TRIANGLE_STRIP,0,4)},f.prototype.quantizerScale=0,f.prototype.sliceBegin=!1,f.prototype.decodeSlice=function(a){for(this.sliceBegin=!0,this.macroblockAddress=(a-1)*this.mbWidth-1,this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0,this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.quantizerScale=this.buffer.getBits(5);this.buffer.getBits(1);)this.buffer.advance(8);do this.decodeMacroblock();while(!this.buffer.nextBytesAreStartCode())},f.prototype.macroblockAddress=0,f.prototype.mbRow=0,f.prototype.mbCol=0,f.prototype.macroblockType=0,f.prototype.macroblockIntra=!1,f.prototype.macroblockMotFw=!1,f.prototype.motionFwH=0,f.prototype.motionFwV=0,f.prototype.motionFwHPrev=0,f.prototype.motionFwVPrev=0,f.prototype.decodeMacroblock=function(){for(var a=0,b=this.readCode(n);34===b;)b=this.readCode(n);for(;35===b;)a+=33,b=this.readCode(n);if(a+=b,this.sliceBegin)this.sliceBegin=!1,this.macroblockAddress+=a;else{if(this.macroblockAddress+a>=this.mbSize)return;for(a>1&&(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.pictureCodingType===x&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0));a>1;)this.macroblockAddress++,this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb),a--;this.macroblockAddress++}this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.macroblockType=this.readCode(I[this.pictureCodingType]),this.macroblockIntra=1&this.macroblockType,this.macroblockMotFw=8&this.macroblockType,0!==(16&this.macroblockType)&&(this.quantizerScale=this.buffer.getBits(5)),this.macroblockIntra?(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0):(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.decodeMotionVectors(),this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb));for(var c=0!==(2&this.macroblockType)?this.readCode(r):this.macroblockIntra?63:0,d=0,e=32;d<6;d++)0!==(c&e)&&this.decodeBlock(d),e>>=1},f.prototype.decodeMotionVectors=function(){var a,b,c=0;this.macroblockMotFw?(a=this.readCode(s),0!==a&&1!==this.forwardF?(c=this.buffer.getBits(this.forwardRSize),b=(Math.abs(a)-1<<this.forwardRSize)+c+1,a<0&&(b=-b)):b=a,this.motionFwHPrev+=b,this.motionFwHPrev>(this.forwardF<<4)-1?this.motionFwHPrev-=this.forwardF<<5:this.motionFwHPrev<-this.forwardF<<4&&(this.motionFwHPrev+=this.forwardF<<5),this.motionFwH=this.motionFwHPrev,this.fullPelForward&&(this.motionFwH<<=1),a=this.readCode(s),0!==a&&1!==this.forwardF?(c=this.buffer.getBits(this.forwardRSize),b=(Math.abs(a)-1<<this.forwardRSize)+c+1,a<0&&(b=-b)):b=a,this.motionFwVPrev+=b,this.motionFwVPrev>(this.forwardF<<4)-1?this.motionFwVPrev-=this.forwardF<<5:this.motionFwVPrev<-this.forwardF<<4&&(this.motionFwVPrev+=this.forwardF<<5),this.motionFwV=this.motionFwVPrev,this.fullPelForward&&(this.motionFwV<<=1)):this.pictureCodingType===x&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0)},f.prototype.copyMacroblock=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o=this.currentY32,p=this.currentCb32,q=this.currentCr32;f=this.codedWidth,g=f-16,h=a>>1,i=b>>1,j=1===(1&a),k=1===(1&b),l=((this.mbRow<<4)+i)*f+(this.mbCol<<4)+h,m=this.mbRow*f+this.mbCol<<2,n=m+(f<<2);var r,s,t,u;if(j)if(k)for(;m<n;){for(s=c[l]+c[l+f],l++,r=0;r<4;r++)t=c[l]+c[l+f],l++,u=s+t+2>>2&255,s=c[l]+c[l+f],l++,u|=s+t+2<<6&65280,t=c[l]+c[l+f],l++,u|=s+t+2<<14&16711680,s=c[l]+c[l+f],l++,u|=s+t+2<<22&4278190080,o[m++]=u;m+=g>>2,l+=g-1}else for(;m<n;){for(s=c[l++],r=0;r<4;r++)t=c[l++],u=s+t+1>>1&255,s=c[l++],u|=s+t+1<<7&65280,t=c[l++],u|=s+t+1<<15&16711680,s=c[l++],u|=s+t+1<<23&4278190080,o[m++]=u;m+=g>>2,l+=g-1}else if(k)for(;m<n;){for(r=0;r<4;r++)u=c[l]+c[l+f]+1>>1&255,l++,u|=c[l]+c[l+f]+1<<7&65280,l++,u|=c[l]+c[l+f]+1<<15&16711680,l++,u|=c[l]+c[l+f]+1<<23&4278190080,l++,o[m++]=u;m+=g>>2,l+=g}else for(;m<n;){for(r=0;r<4;r++)u=c[l],l++,u|=c[l]<<8,l++,u|=c[l]<<16,l++,u|=c[l]<<24,l++,o[m++]=u;m+=g>>2,l+=g}f=this.halfWidth,g=f-8,h=a/2>>1,i=b/2>>1,j=1===(a/2&1),k=1===(b/2&1),l=((this.mbRow<<3)+i)*f+(this.mbCol<<3)+h,m=this.mbRow*f+this.mbCol<<1,n=m+(f<<1);var v,w,x,y,z,A;if(j)if(k)for(;m<n;){for(v=d[l]+d[l+f],y=e[l]+e[l+f],l++,r=0;r<2;r++)w=d[l]+d[l+f],z=e[l]+e[l+f],l++,x=v+w+2>>2&255,A=y+z+2>>2&255,v=d[l]+d[l+f],y=e[l]+e[l+f],l++,x|=v+w+2<<6&65280,A|=y+z+2<<6&65280,w=d[l]+d[l+f],z=e[l]+e[l+f],l++,x|=v+w+2<<14&16711680,A|=y+z+2<<14&16711680,v=d[l]+d[l+f],y=e[l]+e[l+f],l++,x|=v+w+2<<22&4278190080,A|=y+z+2<<22&4278190080,q[m]=x,p[m]=A,m++;m+=g>>2,l+=g-1}else for(;m<n;){for(v=d[l],y=e[l],l++,r=0;r<2;r++)w=d[l],z=e[l++],x=v+w+1>>1&255,A=y+z+1>>1&255,v=d[l],y=e[l++],x|=v+w+1<<7&65280,A|=y+z+1<<7&65280,w=d[l],z=e[l++],x|=v+w+1<<15&16711680,A|=y+z+1<<15&16711680,v=d[l],y=e[l++],x|=v+w+1<<23&4278190080,A|=y+z+1<<23&4278190080,q[m]=x,p[m]=A,m++;m+=g>>2,l+=g-1}else if(k)for(;m<n;){for(r=0;r<2;r++)x=d[l]+d[l+f]+1>>1&255,A=e[l]+e[l+f]+1>>1&255,l++,x|=d[l]+d[l+f]+1<<7&65280,A|=e[l]+e[l+f]+1<<7&65280,l++,x|=d[l]+d[l+f]+1<<15&16711680,A|=e[l]+e[l+f]+1<<15&16711680,l++,x|=d[l]+d[l+f]+1<<23&4278190080,A|=e[l]+e[l+f]+1<<23&4278190080,l++,q[m]=x,p[m]=A,m++;m+=g>>2,l+=g}else for(;m<n;){for(r=0;r<2;r++)x=d[l],A=e[l],l++,x|=d[l]<<8,A|=e[l]<<8,l++,x|=d[l]<<16,A|=e[l]<<16,l++,x|=d[l]<<24,A|=e[l]<<24,l++,q[m]=x,p[m]=A,m++;m+=g>>2,l+=g}},f.prototype.blockData=null,f.prototype.decodeBlock=function(a){var b,c=0;if(this.macroblockIntra){var d,e;if(a<4?(d=this.dcPredictorY,e=this.readCode(t)):(d=4===a?this.dcPredictorCr:this.dcPredictorCb,e=this.readCode(u)),e>0){var f=this.buffer.getBits(e);0!==(f&1<<e-1)?this.blockData[0]=d+f:this.blockData[0]=d+(-1<<e|f+1)}else this.blockData[0]=d;a<4?this.dcPredictorY=this.blockData[0]:4===a?this.dcPredictorCr=this.blockData[0]:this.dcPredictorCb=this.blockData[0],this.blockData[0]<<=8,b=this.intraQuantMatrix,c=1}else b=this.nonIntraQuantMatrix;for(var g=0;;){var h=0,i=this.readCode(v);if(1===i&&c>0&&0===this.buffer.getBits(1))break;65535===i?(h=this.buffer.getBits(6),g=this.buffer.getBits(8),0===g?g=this.buffer.getBits(8):128===g?g=this.buffer.getBits(8)-256:g>128&&(g-=256)):(h=i>>8,g=255&i,this.buffer.getBits(1)&&(g=-g)),c+=h;var k=j[c];c++,g<<=1,this.macroblockIntra||(g+=g<0?-1:1),g=g*this.quantizerScale*b[k]>>4,0===(1&g)&&(g-=g>0?1:-1),g>2047?g=2047:g<-2048&&(g=-2048),this.blockData[k]=g*m[k]}var l,n,o;a<4?(l=this.currentY,o=this.codedWidth-8,n=this.mbRow*this.codedWidth+this.mbCol<<4,0!==(1&a)&&(n+=8),0!==(2&a)&&(n+=this.codedWidth<<3)):(l=4===a?this.currentCb:this.currentCr,o=(this.codedWidth>>1)-8,n=(this.mbRow*this.codedWidth<<2)+(this.mbCol<<3)),this.macroblockIntra?1===c?(this.copyValueToDestination(this.blockData[0]+128>>8,l,n,o),this.blockData[0]=0):(this.IDCT(),this.copyBlockToDestination(this.blockData,l,n,o),this.blockData.set(this.zeroBlockData)):1===c?(this.addValueToDestination(this.blockData[0]+128>>8,l,n,o),this.blockData[0]=0):(this.IDCT(),this.addBlockToDestination(this.blockData,l,n,o),this.blockData.set(this.zeroBlockData)),c=0},f.prototype.copyBlockToDestination=function(a,b,c,d){for(var e=0;e<64;e+=8,c+=d+8)b[c+0]=a[e+0],b[c+1]=a[e+1],b[c+2]=a[e+2],b[c+3]=a[e+3],b[c+4]=a[e+4],b[c+5]=a[e+5],b[c+6]=a[e+6],b[c+7]=a[e+7]},f.prototype.addBlockToDestination=function(a,b,c,d){for(var e=0;e<64;e+=8,c+=d+8)b[c+0]+=a[e+0],b[c+1]+=a[e+1],b[c+2]+=a[e+2],b[c+3]+=a[e+3],b[c+4]+=a[e+4],b[c+5]+=a[e+5],b[c+6]+=a[e+6],b[c+7]+=a[e+7]},f.prototype.copyValueToDestination=function(a,b,c,d){for(var e=0;e<64;e+=8,c+=d+8)b[c+0]=a,b[c+1]=a,b[c+2]=a,b[c+3]=a,b[c+4]=a,b[c+5]=a,b[c+6]=a,b[c+7]=a},f.prototype.addValueToDestination=function(a,b,c,d){for(var e=0;e<64;e+=8,c+=d+8)b[c+0]+=a,b[c+1]+=a,b[c+2]+=a,b[c+3]+=a,b[c+4]+=a,b[c+5]+=a,b[c+6]+=a,b[c+7]+=a},f.prototype.copyBlockToDestinationClamp=function(a,b,c,d){for(var e=0,f=0;f<8;f++){for(var g=0;g<8;g++){var h=a[e++];b[c++]=h>255?255:h<0?0:h}c+=d}},f.prototype.addBlockToDestinationClamp=function(a,b,c,d){for(var e=0,f=0;f<8;f++){for(var g=0;g<8;g++){var h=a[e++]+b[c];b[c++]=h>255?255:h<0?0:h}c+=d}},f.prototype.IDCT=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this.blockData;for(s=0;s<8;++s)a=t[32+s],b=t[16+s]+t[48+s],c=t[40+s]-t[24+s],f=t[8+s]+t[56+s],g=t[24+s]+t[40+s],d=t[8+s]-t[56+s],e=f+g,h=t[0+s],m=(473*d-196*c+128>>8)-e,i=m-(362*(f-g)+128>>8),j=h-a,k=(362*(t[16+s]-t[48+s])+128>>8)-b,l=h+a,n=j+k,o=l+b,p=j-k,q=l-b,r=-i-(473*c+196*d+128>>8),t[0+s]=e+o,t[8+s]=m+n,t[16+s]=p-i,t[24+s]=q-r,t[32+s]=q+r,t[40+s]=i+p,t[48+s]=n-m,t[56+s]=o-e;for(s=0;s<64;s+=8)a=t[4+s],b=t[2+s]+t[6+s],c=t[5+s]-t[3+s],f=t[1+s]+t[7+s],g=t[3+s]+t[5+s],d=t[1+s]-t[7+s],e=f+g,h=t[0+s],m=(473*d-196*c+128>>8)-e,i=m-(362*(f-g)+128>>8),j=h-a,k=(362*(t[2+s]-t[6+s])+128>>8)-b,l=h+a,n=j+k,o=l+b,p=j-k,q=l-b,r=-i-(473*c+196*d+128>>8),t[0+s]=e+o+128>>8,t[1+s]=m+n+128>>8,t[2+s]=p-i+128>>8,t[3+s]=q-r+128>>8,t[4+s]=q+r+128>>8,t[5+s]=i+p+128>>8,t[6+s]=n-m+128>>8,t[7+s]=o-e+128>>8};var g="jsmp",h=1,i=[0,23.976,24,25,29.97,30,50,59.94,60,0,0,0,0,0,0,0],j=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),k=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]),l=new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),m=new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]),n=new Int16Array([3,6,0,9,12,0,0,0,1,15,18,0,21,24,0,27,30,0,33,36,0,0,0,3,0,0,2,39,42,0,45,48,0,0,0,5,0,0,4,51,54,0,57,60,0,0,0,7,0,0,6,63,66,0,69,72,0,75,78,0,81,84,0,-1,87,0,-1,90,0,93,96,0,99,102,0,105,108,0,111,114,0,0,0,9,0,0,8,117,120,0,123,126,0,129,132,0,135,138,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,141,-1,0,-1,144,0,147,150,0,153,156,0,159,162,0,165,168,0,171,174,0,177,180,0,183,-1,0,-1,186,0,189,192,0,195,198,0,201,204,0,207,210,0,213,216,0,219,222,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22]),o=new Int8Array([3,6,0,-1,9,0,0,0,1,0,0,17]),p=new Int8Array([3,6,0,9,12,0,0,0,10,15,18,0,0,0,2,21,24,0,0,0,8,27,30,0,33,36,0,-1,39,0,0,0,18,0,0,26,0,0,1,0,0,17]),q=new Int8Array([3,6,0,9,15,0,12,18,0,24,21,0,0,0,12,27,30,0,0,0,14,39,42,0,36,33,0,0,0,4,0,0,6,54,48,0,45,51,0,0,0,8,0,0,10,-1,57,0,0,0,1,60,63,0,0,0,30,0,0,17,0,0,22,0,0,26]),r=new Int16Array([6,3,0,9,18,0,12,15,0,24,33,0,36,39,0,27,21,0,30,42,0,60,57,0,54,48,0,69,51,0,81,75,0,63,84,0,45,66,0,72,78,0,0,0,60,105,120,0,132,144,0,114,108,0,126,141,0,87,93,0,117,96,0,0,0,32,135,138,0,99,123,0,129,102,0,0,0,4,90,111,0,0,0,8,0,0,16,0,0,44,150,168,0,0,0,28,0,0,52,0,0,62,183,177,0,156,180,0,0,0,1,165,162,0,0,0,61,0,0,56,171,174,0,0,0,2,0,0,40,153,186,0,0,0,48,192,189,0,147,159,0,0,0,20,0,0,12,240,249,0,0,0,63,231,225,0,195,219,0,252,198,0,0,0,24,0,0,36,0,0,3,207,261,0,243,237,0,204,213,0,210,234,0,201,228,0,216,222,0,258,255,0,264,246,0,-1,282,0,285,291,0,0,0,33,0,0,9,318,330,0,306,348,0,0,0,5,0,0,10,279,267,0,0,0,6,0,0,18,0,0,17,0,0,34,339,357,0,309,312,0,270,276,0,327,321,0,351,354,0,303,297,0,294,288,0,300,273,0,342,345,0,315,324,0,336,333,0,363,375,0,0,0,41,0,0,14,0,0,21,372,366,0,360,369,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31]),s=new Int16Array([3,6,0,12,9,0,0,0,0,18,15,0,24,21,0,0,0,-1,0,0,1,27,30,0,36,33,0,0,0,2,0,0,-2,42,45,0,48,39,0,60,54,0,0,0,3,0,0,-3,51,57,0,-1,69,0,81,75,0,78,63,0,72,66,0,96,84,0,87,93,0,-1,99,0,108,105,0,0,0,-4,90,102,0,0,0,4,0,0,-7,0,0,5,111,123,0,0,0,-5,0,0,7,114,120,0,126,117,0,0,0,-6,0,0,6,153,162,0,150,147,0,135,138,0,156,141,0,129,159,0,132,144,0,0,0,10,0,0,9,0,0,8,0,0,-8,171,198,0,0,0,-9,180,192,0,168,183,0,165,186,0,174,189,0,0,0,-10,177,195,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]),t=new Int8Array([6,3,0,18,15,0,9,12,0,0,0,1,0,0,2,27,24,0,21,30,0,0,0,0,36,33,0,0,0,4,0,0,3,39,42,0,0,0,5,0,0,6,48,45,0,51,-1,0,0,0,7,0,0,8]),u=new Int8Array([6,3,0,12,9,0,18,15,0,24,21,0,0,0,2,0,0,1,0,0,0,30,27,0,0,0,3,36,33,0,0,0,4,42,39,0,0,0,5,48,45,0,0,0,6,51,-1,0,0,0,7,0,0,8]),v=new Int32Array([3,6,0,12,9,0,0,0,1,21,24,0,18,15,0,39,27,0,33,30,0,42,36,0,0,0,257,60,66,0,54,63,0,48,57,0,0,0,513,51,45,0,0,0,2,0,0,3,81,75,0,87,93,0,72,78,0,96,90,0,0,0,1025,69,84,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,111,108,0,0,0,1281,105,102,0,117,114,0,99,126,0,120,123,0,156,150,0,162,159,0,144,147,0,129,135,0,138,132,0,0,0,2049,0,0,4,0,0,514,0,0,2305,153,141,0,165,171,0,180,168,0,177,174,0,183,186,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,228,225,0,201,210,0,219,213,0,234,222,0,216,231,0,207,192,0,204,189,0,198,195,0,243,261,0,273,240,0,246,237,0,249,258,0,279,276,0,252,255,0,270,282,0,264,267,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,315,321,0,333,342,0,312,291,0,375,357,0,288,294,0,-1,369,0,285,303,0,318,363,0,297,306,0,339,309,0,336,348,0,330,300,0,372,345,0,351,366,0,327,354,0,360,324,0,381,408,0,417,420,0,390,378,0,435,438,0,384,387,0,0,0,2050,396,402,0,465,462,0,0,0,8,411,399,0,429,432,0,453,414,0,426,423,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,0,0,1794,0,0,4353,0,0,4609,0,0,4865,444,456,0,0,0,1027,459,450,0,0,0,261,393,405,0,0,0,516,447,441,0,516,519,0,486,474,0,510,483,0,504,498,0,471,537,0,507,501,0,522,513,0,534,531,0,468,477,0,492,495,0,549,546,0,525,528,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,540,543,0,480,489,0,588,597,0,0,0,27,609,555,0,606,603,0,0,0,19,0,0,22,591,621,0,0,0,18,573,576,0,564,570,0,0,0,20,552,582,0,0,0,21,558,579,0,0,0,23,612,594,0,0,0,25,0,0,24,600,615,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,567,618,0,561,585,0,654,633,0,0,0,37,645,648,0,0,0,36,630,636,0,0,0,34,639,627,0,663,666,0,657,624,0,651,642,0,669,660,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]),w=1,x=2,y=3,z=179,A=1,B=175,C=0,D=181,E=178,F=["precision mediump float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main() {","float y = texture2D(YTexture, texCoord).r;","float cr = texture2D(CBTexture, texCoord).r - 0.5;","float cb = texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor = vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n"),G=["precision mediump float;","uniform float loaded;","varying vec2 texCoord;","void main() {","float c = ceil(loaded-(1.0-texCoord.y));","gl_FragColor = vec4(c,c,c,1);","}"].join("\n"),H=["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n"),I=[null,o,p,q],J=function(a){
this.bytes=new Uint8Array(a),this.length=this.bytes.length,this.writePos=this.bytes.length,this.index=0};J.NOT_FOUND=-1,J.prototype.tryFindNextMPEGStartCode=function(){for(var a=this.index+7>>3;a<this.writePos-2;a++)if(0===this.bytes[a]&&0===this.bytes[a+1]&&1===this.bytes[a+2])return{index:a+4<<3,code:this.bytes[a+3]};return{index:this.writePos<<3,code:J.NOT_FOUND}},J.prototype.findNextMPEGStartCode=function(){var a=this.tryFindNextMPEGStartCode();return this.index=a.index,a.code},J.prototype.nextBytesAreStartCode=function(){var a=this.index+7>>3;return a>=this.writePos-2||0===this.bytes[a]&&0===this.bytes[a+1]&&1===this.bytes[a+2]},J.prototype.nextBits=function(a){var b=this.index>>3,c=8-this.index%8;if(b>=this.writePos)throw new Error;if(c>=a)return this.bytes[b]>>c-a&255>>8-a;var d=(this.index+a)%8,e=this.index+a-1>>3,f=this.bytes[b]&255>>8-c;if(e>this.writePos)throw new Error;for(b++;b<e;b++)f<<=8,f|=this.bytes[b];if(b>=this.writePos)throw new Error;return d>0?(f<<=d,f|=this.bytes[b]>>8-d):(f<<=8,f|=this.bytes[b]),f},J.prototype.getBits=function(a){var b=this.nextBits(a);return this.index+=a,b},J.prototype.advance=function(a){return this.index+=a},J.prototype.rewind=function(a){return this.index-=a},J.prototype.push=function(a){this.bytes.set(a,this.writePos),this.writePos+=a.byteLength},a.jsmpeg=f}(window),function(a){function b(){var a=arguments[0],c=b.cache;return c[a]&&c.hasOwnProperty(a)||(c[a]=b.parse(a)),b.format.call(null,c[a],arguments)}function c(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function d(a,b){return Array(b+1).join(a)}var e={not_string:/[^s]/,number:/[def]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};b.format=function(a,f){var g,h,i,j,k,l,m,n=1,o=a.length,p="",q=[],r=!0,s="";for(h=0;h<o;h++)if(p=c(a[h]),"string"===p)q[q.length]=a[h];else if("array"===p){if(j=a[h],j[2])for(g=f[n],i=0;i<j[2].length;i++){if(!g.hasOwnProperty(j[2][i]))throw new Error(b("[sprintf] property '%s' does not exist",j[2][i]));g=g[j[2][i]]}else g=j[1]?f[j[1]]:f[n++];if("function"==c(g)&&(g=g()),e.not_string.test(j[8])&&"number"!=c(g)&&isNaN(g))throw new TypeError(b("[sprintf] expecting number but found %s",c(g)));switch(e.number.test(j[8])&&(r=g>=0),j[8]){case"b":g=g.toString(2);break;case"c":g=String.fromCharCode(g);break;case"d":g=parseInt(g,10);break;case"e":g=j[7]?g.toExponential(j[7]):g.toExponential();break;case"f":g=j[7]?parseFloat(g).toFixed(j[7]):parseFloat(g);break;case"o":g=g.toString(8);break;case"s":g=(g=String(g))&&j[7]?g.substring(0,j[7]):g;break;case"u":g>>>=0;break;case"x":g=g.toString(16);break;case"X":g=g.toString(16).toUpperCase()}(!r||e.number.test(j[8])&&j[3])&&(s=r?"+":"-",g=g.toString().replace(e.sign,"")),l=j[4]?"0"==j[4]?"0":j[4].charAt(1):" ",m=j[6]-(s+g).length,k=j[6]?d(l,m):"",q[q.length]=j[5]?s+g+k:0==l?s+k+g:k+s+g}return q.join("")},b.cache={},b.parse=function(a){for(var b=a,c=[],d=[],f=0;b;){if(null!==(c=e.text.exec(b)))d[d.length]=c[0];else if(null!==(c=e.modulo.exec(b)))d[d.length]="%";else{if(null===(c=e.placeholder.exec(b)))throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){f|=1;var g=[],h=c[2],i=[];if(null===(i=e.key.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(g[g.length]=i[1];""!==(h=h.substring(i[0].length));)if(null!==(i=e.key_access.exec(h)))g[g.length]=i[1];else{if(null===(i=e.index_access.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");g[g.length]=i[1]}c[2]=g}else f|=2;if(3===f)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d[d.length]=c}b=b.substring(c[0].length)}return d};var f=function(a,c,d){return d=(c||[]).slice(0),d.splice(0,0,a),b.apply(null,d)};a.sprintf=b,a.vsprintf=f}(window.VengoSystem),function(a,b){function c(){this.id=a.makeid()}c.prototype.__proto__=a.Events.prototype,c.prototype.adView=b,c.onReady="onReady",c.onDisplay="onDisplay",c.onClose="onClose",c.onError="onError",c.onClick="onClick",c.onIntegrate="onIntegrate",c.onImpression="onImpression",a.AdPlacement=c}(window.VengoSystem),function(a,b){function c(){this.id=a.makeid(),this.adsList=[],this.adIndex=-1,this.startShowTime=0,a.log(this+" Created")}c.prototype.__proto__=a.Events.prototype,c.prototype.id="",c.prototype.request=b,c.prototype.ad=b,c.prototype.adsList=[],c.prototype.adIndex=-1,c.prototype.startShowTime=0,c.prototype.showParams=b,c.prototype.delayed=!0,c.prototype.intervalOfPreload=15e3,c.prototype.allowAutoplay=!0,c.prototype.allowJSVideoEmulation=!0,c.prototype.allowSlideshow=!0,c.prototype.adViewImplementation=b,c.prototype.allowAnimation=!1,c.prototype.animationParams=b,c.onDisplay="onDisplay",c.onClose="onClose",c.onError="onError",c.onClick="onClick",c.onIntegrate="onIntegrate",c.onImpression="onImpression",c.prototype.loadRequest=function(b){var d=this;d.request=b.request,d.request.one(a.Request.onLoaded,function(c,e){if(b.testParams)for(var f in b.testParams)b.testParams.hasOwnProperty(f)&&(ad[f]=b.testParams[f]);b.ad=e[0],b.adType=d.request.adType,a.runOnReady(function(){d.showAd(b)})}),d.request.one(a.Request.onFailed,function(a,b){d.trigger(c.onError,d,b)}),d.request.start()},c.prototype.prepareBannerSizeParams=function(c){var d=c.adType;c.viewWidth||(c.ad.width&&a.AdViewImplementation.isSizeCacl(c.ad.width)?c.viewWidth=c.ad.width:c.ad.width?c.viewWidth=c.ad.width+"px":0==c.ad.width?c.viewWidth="100%":d.width?c.viewWidth=d.width+"px":c.viewWidth=b),c.viewHeight||(c.ad.height?c.viewHeight=c.ad.height+"px":d.height?c.viewHeight=d.height+"px":c.viewHeight=b)},c.prototype.prepareBannerAd=function(a,b,c){var d,e={};for(var f in b)b.hasOwnProperty(f)&&(d=b[f],"ad"==f?e.ad=a.ad:e[f]=d);a.params=e,this.prepareBannerSizeParams(a.params),a.params.showBlockedBySDK=!0,c<this.adsList.length-1&&(a.params.closeAfterVideo=!0),c>0&&c<this.adsList.length-1?a.params.allowAnimation=!1:a.params.allowAnimation&&(a.params.animationParams||(a.params.animationParams={}),a.params.animationParams.showAnimation=0==c,a.params.animationParams.hideAnimation=c==this.adsList.length-1),c>0&&(a.params.waitBannerReady=!1)},c.prototype.prepareBannerAds=function(a){for(var b=0;b<this.adsList.length;b++)this.prepareBannerAd(this.adsList[b],a,b)},c.prototype.addAd=function(a){var c=this.adsList.length,d={params:b,ad:a,adViewImplementation:b,preloadTimeout:0,preloadError:!1,showOnVisible:!1};this.adsList.push(d),this.prepareBannerAd(d,this.showParams,c,!1),this.planBannerAdPreload(c);var e=c>0?this.adsList[c-1]:b;e&&(e.params.closeAfterVideo=!0,e.params.allowAnimation&&(e.params.animationParams.hideAnimation=!1),e.adViewImplementation&&(e.adViewImplementation.forceCloseAfterVideo(),e.params.allowAnimation&&(e.adViewImplementation.animationParams.hideAnimation=!1)))},c.prototype.addAds=function(a){for(var b=0;b<a.length;b++)this.addAd(a[b])},c.prototype.clearAds=function(){if(this.adsList){for(var a=0;a<this.adsList.length;a++){var b=this.adsList[a];b.preloadTimeout&&clearTimeout(b.preloadTimeout)}this.adsList=[],this.adIndex=-1}},c.prototype.getNextAd=function(){for(;this.adIndex<this.adsList.length-1;){var a=this.adsList[++this.adIndex];if(!a.preloadError)return a}return b},c.prototype.runOnVisible=function(b,c){if(this.delayed){var d=b.afterNode?b.afterNode:b.parentNode;"script"==d.tagName.toLowerCase()&&(d=d.parentNode),a.runOnVisible(d,c)}else c()},c.prototype.showNextBannerAd=function(){var a=this.getNextAd();return!!a&&(a.adViewImplementation?a.adViewImplementation.showWaterfallAd():(a.params.showBlockedBySDK=!1,this.preloadBannerAd(this.adIndex)),!0)},c.prototype.onBannerAdVisible=function(){var a=this.adsList[this.adIndex];a&&(a.showOnVisible=!1,a.adViewImplementation.showWaterfallAd(!1))},c.prototype.onBannerAdReady=function(){0==this.adIndex&&this.trigger(a.AdPlacement.onReady,this)},c.prototype.onBannerAdDisplay=function(){var a=this.adsList[this.adIndex];a.params.closeAfterVideo&&a.adViewImplementation.forceCloseAfterVideo(),0==this.adIndex&&this.trigger(c.onDisplay,this)},c.prototype.onBannerAdAutoClose=function(a){var b=this.adsList[a];a!=this.adIndex?(b.adViewImplementation.close(),b.preloadError=!0):this.showNextBannerAd()||(this.close(b),this.clearAds(),this.trigger(c.onClose,this))},c.prototype.onBannerAdManualClose=function(){this.close(this.adsList[this.adIndex]),this.clearAds(),this.trigger(c.onClose,this)},c.prototype.onBannerAdError=function(a){var b=this.adsList[a];b&&(a!=this.adIndex?(b.adViewImplementation.close(),b.preloadError=!0):this.showNextBannerAd()||(this.close(b),this.clearAds(),this.trigger(c.onError,this,"Failed to load banner content")))},c.prototype.onBannerAdClick=function(a,b){this.trigger(c.onClick,this,b)},c.prototype.onBannerImpression=function(a){this.trigger(c.onImpression,this)},c.prototype.preloadBannerAd=function(b){var c=this.adsList[b],d=c.params;c.preloadTimeout>0&&clearTimeout(c.preloadTimeout),c.preloadTimeout=0,c.adViewImplementation=new a.BannerAdView({container:d.parentNode,afterNode:d.afterNode,ad:d.ad,viewWidth:d.viewWidth,viewHeight:d.viewHeight,viewMargin:d.viewMargin,allowAnimation:d.allowAnimation,animationParams:d.animationParams,showBlockedBySDK:d.showBlockedBySDK,videoQuality:this.videoQuality,videoIndex:this.videoIndex,disablePreload:this.disablePreload}),c.adViewImplementation.on(a.BannerAdView.onReady,this.onBannerAdReady.bind(this)),c.adViewImplementation.on(a.BannerAdView.onDisplay,this.onBannerAdDisplay.bind(this)),c.adViewImplementation.on(a.BannerAdView.onAutoClose,this.onBannerAdAutoClose.bind(this,b)),c.adViewImplementation.on(a.BannerAdView.onManualClose,this.onBannerAdManualClose.bind(this)),c.adViewImplementation.on(a.BannerAdView.onError,this.onBannerAdError.bind(this,b)),c.adViewImplementation.on(a.BannerAdView.onClick,this.onBannerAdClick.bind(this)),c.adViewImplementation.on(a.BannerAdView.onImpression,this.onBannerImpression.bind(this)),c.adViewImplementation.showAd()},c.prototype.planBannerAdPreload=function(a){if(0!=a){var b=this.adsList[a],c=this.startShowTime+a*this.intervalOfPreload-(new Date).getTime();c<0&&(c=0),b.preloadTimeout=setTimeout(this.preloadBannerAd.bind(this,a),c)}},c.prototype.showVideoAd=function(b){var d=this,e=b.adType;a.runAfterAutoplayCheck(function(){d.adViewImplementation=new a.VideoAdView({container:b.parentNode,afterNode:b.afterNode,ad:b.ad,viewWidth:b.viewWidth||e.width+"px",viewHeight:b.viewHeight||e.height+"px",allowAnimation:d.allowAnimation,animationParams:d.animationParams,videoQuality:b.videoQuality,videoIndex:b.videoIndex}),d.adViewImplementation.allowAutoplay=d.allowAutoplay,d.adViewImplementation.allowJSVideoEmulation=d.allowJSVideoEmulation,d.adViewImplementation.forceJSVideoEmulation=d.forceJSVideoEmulation,d.adViewImplementation.allowSlideshow=d.allowSlideshow,d.adViewImplementation.forceSlideshow=d.forceSlideshow,d.adViewImplementation.on(a.VideoAdView.onStart,function(){d.trigger(c.onDisplay,d)}),d.adViewImplementation.on(a.VideoAdView.onComplete,function(){d.trigger(c.onClose,d)}),d.adViewImplementation.on(a.VideoAdView.onManualClose,function(){d.trigger(c.onClose,d)}),d.adViewImplementation.on(a.VideoAdView.onError,function(){d.trigger(c.onError,d,"Failed to load video")}),d.adViewImplementation.showAd()})},c.prototype.close=function(a){a&&a.adViewImplementation&&(a.adViewImplementation.close(),a.adViewImplementation=b)},c.prototype.forceClose=function(){var a=b;a=this.adViewImplementation?this.adViewImplementation:this.adsList[this.adIndex].adViewImplementation,a&&a.forceClose()},c.prototype.showAd=function(b){this.showParams=b,0==this.adsList.length&&(this.addAd(b.ad),this.getNextAd()),this.startShowTime=(new Date).getTime();var d=this.adsList[this.adIndex];d.ad instanceof a.BannerAd?(d.showOnVisible=!0,this.preloadBannerAd(this.adIndex),this.runOnVisible(d.params,this.onBannerAdVisible.bind(this))):d.ad instanceof a.VideoAd&&this.runOnVisible(this.showParams,function(){this.showVideoAd(this.showParams)}.bind(this)),this.trigger(c.onIntegrate,this)},c.prototype.toString=function(){return"[iVengo.AdView#"+this.id+"]"},a.AdView=c}(window.VengoSystem),function(iVengo,undefined){function AdViewImplementation(a){this.id=iVengo.makeid(),this.container=a.container,this.afterNode=a.afterNode,this.ad=a.ad,this.viewWidth=a.viewWidth,this.viewHeight=a.viewHeight,this.viewMargin=a.viewMargin,this.gui={},this.allowAnimation=a.allowAnimation,this.animationParams=a.animationParams,this.showBlockedBySDK=a.showBlockedBySDK!=undefined&&Boolean(a.showBlockedBySDK)}AdViewImplementation.prototype.id=undefined,AdViewImplementation.prototype.container=undefined,AdViewImplementation.prototype.ad=undefined,AdViewImplementation.prototype.viewWidth=undefined,AdViewImplementation.prototype.viewHeight=undefined,AdViewImplementation.prototype.gui=undefined,AdViewImplementation.prototype.allowAnimation=undefined,AdViewImplementation.prototype.animationParams=undefined,AdViewImplementation.prototype.showBlockedBySDK=!1,AdViewImplementation.isSizeCacl=function(a){return!(!a||!a.startsWith)&&a.startsWith("calc")},AdViewImplementation.getCalcSize=function(value,size){var equationRegEx=/calc\((.*)\)/i,innards;(innards=equationRegEx.exec(value))&&(value=innards[1]);for(var paramRegEx=/([0-9]+)(%|px|em|pt)/i,urlParam;urlParam=paramRegEx.exec(value);){var amount=urlParam[1],start=urlParam.index,units=urlParam[2],length=urlParam[0].length;amount="%"==units?Math.floor(size*(parseInt(amount)/100)):"px"==units?parseInt(amount):0,value=value.substr(0,start)+amount.toString()+value.substr(start+length)}return eval(value)},AdViewImplementation.prototype.isShowAnimationAllowed=function(){return!!this.allowAnimation&&(!this.animationParams||this.animationParams.showAnimation!==!1)},AdViewImplementation.prototype.isHideAnimationAllowed=function(){return!!this.allowAnimation&&(!this.animationParams||this.animationParams.hideAnimation!==!1)},AdViewImplementation.prototype.deattachView=function(a){var b=this.gui[a];b&&(b.parentNode&&b.parentNode.removeChild(b),this.gui[a]=undefined,b=undefined)},AdViewImplementation.prototype.getFixedViewportWidth=function(){if(iVengo.isMobilePhone()&&window.orientation!==undefined){var a=iVengo.viewportManipulator.getHostPageViewportTag();if(a){var b=a.getAttribute("content"),c=/.*width\s*=\s*(\d+)/.exec(b);if(c)return parseInt(c[1],10)}}return undefined},AdViewImplementation.prototype.getScale=function(){if("VengoVision"==iVengo.config.system)return undefined;var a=this.getFixedViewportWidth();if(!this.ad.type.fullscreen&&a){var b=a/iVengo.viewportManipulator.getDeviceWidth(),c=.01;if(Math.abs(1-b)>c)return b}return undefined},AdViewImplementation.prototype.setElementZoom=function(a,b,c){b?iVengo.setStyle(a,{transform:"scale("+b+")",transformOrigin:c,webkitTransform:"scale("+b+")",webkitTransformOrigin:c}):iVengo.setStyle(a,{transform:"",transformOrigin:"",webkitTransform:"",webkitTransformOrigin:""})},AdViewImplementation.prototype.parsePixelSize=function(a){var b=/^\s*(\d+)\s*px$/,c=b.exec(a);return c?parseInt(c[1],10):undefined},AdViewImplementation.prototype.parsePercentSize=function(a){var b=/^\s*(\d+)\s*%$/,c=b.exec(a);return c?parseInt(c[1],10)/100:undefined},AdViewImplementation.prototype.getRootElement=function(){return this.gui.root},AdViewImplementation.prototype.adjustSize=function(){var a=this.getScale();if(a){var b=this.getRootElement();if(b){var c,d,e,f,g,h;(g=this.parsePixelSize(this.viewWidth))?(c=Math.round(g*a),d=!0):c=(h=this.parsePercentSize(this.viewWidth)&&b.parentElement)?Math.round(b.parentElement.clientWidth*h):Math.round((this.ad.width?this.ad.width:this.ad.type.width)*a),(g=this.parsePixelSize(this.viewHeight))?(e=Math.round(g*a),f=!0):e=(h=this.parsePercentSize(this.viewHeight)&&b.parentElement)?Math.round(b.parentElement.clientHeight*h):Math.round((this.ad.height?this.ad.height:this.ad.type.height)*a);var i,j;i=d?c+"px":this.viewWidth,j=f?e+"px":this.viewHeight,iVengo.setStyle(b,{width:i,height:j}),iVengo.setStyle(this.gui.wrapper,{width:this.ad.width?Math.round(this.ad.width*a)+"px":"100%",height:this.ad.height?Math.round(this.ad.height*a)+"px":"100%"})}}},AdViewImplementation.prototype.startWatchingSize=function(){var a=this.getScale();if(a&&!this.watchingSize){this.watchingSize=!0,this.adjustSize();var b=this.getRootElement();b&&b.parentElement&&(this.adjustSizeBound=this.adjustSize.bind(this),b.parentElement.addEventListener("resize",this.adjustSizeBound))}},AdViewImplementation.prototype.stopWatchingSize=function(){var a=this.getScale();if(a&&this.watchingSize){this.watchingSize=!1;var b=this.getRootElement();b&&b.parentElement&&b.parentElement.removeEventListener("resize",this.adjustSizeBound)}},AdViewImplementation.prototype.createRoot=function(){this.gui.root=iVengo.createElement("div",!0,{position:"relative",width:this.viewWidth,height:this.viewHeight,visibility:"hidden",overflow:"hidden",webkitOverflowScrolling:"touch"}),this.afterNode&&this.afterNode.parentNode==this.container&&this.afterNode.nextSibling?this.container.insertBefore(this.gui.root,this.afterNode.nextSibling):this.container.appendChild(this.gui.root),this.gui.wrapper=iVengo.createElement("div",!0,{position:"absolute",width:this.ad.width?this.ad.width+"px":"100%",height:this.ad.height?this.ad.height+"px":"100%",right:"0",bottom:"0",left:"0",top:"0",margin:"auto"}),this.ad.minWidth||this.ad.minHeight?(this.gui.scrollContainer=iVengo.createElement("div",!0,{position:"absolute",width:"100%",minWidth:this.ad.minWidth?this.ad.minWidth+"px":"0px",height:"100%",minHeight:this.ad.minHeight?this.ad.minHeight+"px":"0px"}),this.gui.root.appendChild(this.gui.scrollContainer),this.gui.scrollContainer.appendChild(this.gui.wrapper)):this.gui.root.appendChild(this.gui.wrapper)},AdViewImplementation.DEFAULT_SHOW_HIDE_DURATION=500,AdViewImplementation.prototype.animateShow=function(a){var b=this,c=this.getRootElement(),d=0,e={position:"relative",zIndex:"auto",visibility:"visible",height:this.viewHeight,opacity:1};if(this.isShowAnimationAllowed()&&(d=this.animationParams&&this.animationParams.showDuration?this.animationParams.showDuration:AdViewImplementation.DEFAULT_SHOW_HIDE_DURATION),!d)return iVengo.setStyle(c,e),void(a&&a());var f=function(a){iVengo.setStyle(c,{position:"relative",zIndex:"auto",height:0,opacity:0,transition:"height "+d+"ms, opacity "+d+"ms ease-in"}),setTimeout(function(){iVengo.setStyle(c,e),setTimeout(function(){c.style.transition="",a&&a()},d)}.bind(this),1)};setTimeout(function(){iVengo.frameManipulator.isInsideIFrame()&&iVengo.frameManipulator.canManipulateParent()?(iVengo.frameManipulator.show(d,b.viewHeight,function(){a&&a()}),f()):f(a)}.bind(this),10)},AdViewImplementation.prototype.destroyRoot=function(){this.deattachView("wrapper"),this.deattachView("scrollContainer"),this.deattachView("root")},AdViewImplementation.DEFAULT_SHOW_CLOSE_BUTTON_DURATION=500,AdViewImplementation.prototype.showCloseButton=function(){var a=this;!this.gui.closeButton&&this.gui.root&&(this.gui.closeButtonContainer=document.createElement("div"),iVengo.resetStyle(this.gui.closeButtonContainer),iVengo.setStyle(this.gui.closeButtonContainer,{position:"absolute",width:"48px",height:"48px",right:"0",top:"0",zIndex:"2"}),this.gui.wrapper.appendChild(this.gui.closeButtonContainer),this.gui.closeButton=document.createElement("a"),iVengo.resetStyle(this.gui.closeButton),iVengo.setStyle(this.gui.closeButton,{position:"relative",width:"100%",height:"100%"}),this.gui.closeButton.href="#",this.gui.closeButtonContainer.appendChild(this.gui.closeButton),this.gui.closeImage=document.createElement("img"),iVengo.resetStyle(this.gui.closeImage),this.gui.closeImage.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkJDQTQ5NjUxNjVGMTFFNEE1MTJBRDg3QjQ1OEJBMEIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkJDQTQ5NjYxNjVGMTFFNEE1MTJBRDg3QjQ1OEJBMEIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGQkNBNDk2MzE2NUYxMUU0QTUxMkFEODdCNDU4QkEwQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGQkNBNDk2NDE2NUYxMUU0QTUxMkFEODdCNDU4QkEwQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pjw8gR0AAATCSURBVHjatFZfTFNnFL/39rZwYQ6Eij5sCgXdTHgxkVLJHniCh2UEitnaJQgv0z0oiFgCXGhLSylmUrMBC7hFkumEPQATYjJ4gWUL2KLOzAfBSfmzPTgFBnPQP/f23p1zuSVNKSx78CZfgHPO9/t93zm/7xxIURTbCYKIgyUSOz+O5zjK6/XuW19fTwgEg0o0xqlUXFJS0qZGo3lFK5UCmJQx9pKwArQMHk0Q2vjnFdXf/92xwcFBzbTHnUyQlKik6dAWK68gRIHM0eau6UtKvAajYSHxjX1IpIgiIEi4QUcEAa7Q90NDh2y2Zu3S4lJCQUHB4ifnzv6hVh/YYOLjg7jJ5/erlpdfJn7Vc/2tsbGxw4ePHPGZzWZPcUnJc5mEDN8gkgBPwH925crxBpbVGo3GuWar9VFGZuam7KPCp5IPItkWvF7GbLGc6O/ry3K0Ot2mWtMTsNNyvJSi7bS0X716HE6Sc83lmjpfWTkr51YRdfXwJ9nSNZrANzdv/qTNyXkB4DpKQRE1NTUzMgERJgjdHRk5WFdXpwUSBJ/x+/2QkXg+Mp8xPimtPp+PwT2CKCL4qWNHj659UFT0ggiz/L2+TjWZzTqDwTBXefHibDAYZCCoqL6+/gTWdBeFoY1rgJisTE1xIBBIqKyqmkUMi8WSi5hhAg6Ukr64uMDY7fZHmBZaoQiVlZUttLW1ac1NTSexNlEk+DuPPifEVFRUzIHCMEaJGIiFmNLhOI5znS4tnTF89OFDKPiXsHpgdWPxWZadRLBGlp3Cv2W75EMb+tiG+skIH+7t+thgeIiYiE389vTp14cOpv05MT5+B5ydclDPDqAtks9xsbKtsaFhKgocV+fExPgdxERs+q+1tURBEIhUtXojXJOIwirtLS0PSJIk4KcW0oDSJBwOh7aJZe/ZwCcrLVIEVGqqegMxEZuG4kDOaTE+Lo6LoRb8m7bZ7R5KoRCszc15aIQiTlqt1vvy+9mxB7EQE7Ep4jV/dByw8SGe9ANbDDmG1aLFFFnh5GiEm+iEUIiCmz2Q31LkLUTEQkzEpvcnJ29QlIJYXVlOBOdqxKuVdN7U2HiyxeHQQWHvWbbSgs2OAkIdFBRrcz+qDsIKYFEkRSC2LNPTM0aDJNOu/y1TiIkl01K9fhawrxFgcPXeuDGasj95ed7r7cXAEM93wwt142ngBlOyfLujJNyJPozBWNyD9oX5+V7AWkFMxJa6KTxrVX5+/vvZ2dkvoXH9DNVnNBkZxeXl5c9anc7pGFLcTiG0k5xvb93KeDY3N6xSqfzlZ8689/jxrwcmJn68+2ZSUjDcrumR4eE0vV5f4HK1T16orJqFBpbAMAwX0dt3bXbQGGlojL6ujo53qi9dyhsYGBiTmx0f7qYKMDxva3N6ak21p+BhkecvbLdrcg8VSj4A93d2fPGu6bJJ53S2ehBL3stHzgNFzWXTk1BIIKqrq/M809NpNmvzL9Dvff85cKwWXd/t21kOR6sbMSLGwF4j0wYjc5EpLCxcOvvpud9TUlI3GUYemT6/anV1JeF6d8/bP4yOwsTce2R27jr0+/rTB4eGNB63O5mkKEGlpKWYIMeToiBQ2tzctRIY+sbdh75E8Fr/bflXgAEAuGEkCR7B/QEAAAAASUVORK5CYII=",iVengo.setStyle(this.gui.closeImage,{position:"relative",width:"50%",height:"50%",marginLeft:"50%"}),this.gui.closeButton.appendChild(this.gui.closeImage),this.gui.closeButton.onclick=function(b){return iVengo.log(a+" Close button pressed"),a.onCloseButtonClicked(),b.preventDefault(),!1},this.getScale()&&this.setElementZoom(this.gui.closeButtonContainer,this.getScale(),"right top"))},AdViewImplementation.prototype.hideAndClose=function(a,b){if(!this.hideInProgress){this.hideInProgress=!0;var c=this,d=this.getRootElement(),e=0;this.isHideAnimationAllowed()&&(e=this.animationParams&&this.animationParams.hideDuration?this.animationParams.hideDuration:AdViewImplementation.DEFAULT_SHOW_HIDE_DURATION);var f=function(){d.style.transition="height "+e+"ms, opacity "+e+"ms",d.style.height=0,d.style.opacity=0};iVengo.frameManipulator.isInsideIFrame()&&iVengo.frameManipulator.canManipulateParent()?(f(),iVengo.frameManipulator.hide(e,b,function(){c.close(),a&&a()})):e?(f(),setTimeout(function(){var d=function(){c.close(),a&&a()};b?(b(),setTimeout(d,20)):d()},e)):(d.style.height=0,d.style.opacity=0,this.close(),a&&a())}},AdViewImplementation.prototype.hideCloseButton=function(a){var b=this,c=function(){b.deattachView("closeImage"),b.deattachView("closeButton"),b.deattachView("closeButtonContainer")};a?iVengo.Animation.run(this,"closeButtonAnimation",new iVengo.NumberAnimation(AdViewImplementation.DEFAULT_SHOW_CLOSE_BUTTON_DURATION,parseFloat(b.gui.closeButtonContainer.style.opacity),0,function(a){b.gui.closeButtonContainer.style.opacity=a},undefined,function(){c()})):c()},AdViewImplementation.prototype.showWatermark=function(){if(!this.gui.watermark&&this.gui.background&&this.gui.root){var a=this.isTopLine();if(!a){var b,c=this.gui.wrapper;"VengoVision"==iVengo.config.system?(a||(c=this.gui.background),b="top right"):b="bottom left",this.gui.watermark=new iVengo.Watermark(this.ad.type);var d=this.gui.watermark.attach(c);this.getScale()&&this.setElementZoom(d,this.getScale(),b)}}},AdViewImplementation.prototype.hideWatermark=function(){this.gui.watermark&&(this.gui.watermark.detach(),this.gui.watermark=undefined)},AdViewImplementation.prototype.showClickScreen=function(){var a=this;!this.gui.clickScreen&&this.gui.root&&(this.gui.clickScreen=document.createElement("a"),iVengo.resetStyle(this.gui.clickScreen),iVengo.setStyle(this.gui.clickScreen,{position:"absolute",width:"100%",height:"100%",left:0,right:0,top:0,bottom:0}),this.gui.clickScreen.href="#",this.gui.clickScreen.onclick=function(b){return iVengo.log(a+" Banner clicked"),a.onClicked(),b.preventDefault(),!1},this.gui.wrapper.appendChild(this.gui.clickScreen))},AdViewImplementation.prototype.hideClickScreen=function(){this.deattachView("clickScreen")},iVengo.AdViewImplementation=AdViewImplementation}(window.VengoSystem),function(a,b){function c(){this.key=a.config.system+"-analytics",this.iframe=b}c.prototype.isTracked=function(){try{return window.top[this.key]}catch(a){return window[this.key]}},c.prototype.setTracked=function(){try{window.top[this.key]=!0}catch(a){window[this.key]=!0}},c.prototype.track=function(){if(!this.isTracked()){this.setTracked();var a=function(){this.iframe=this.createFrame(),this.runTrackingCode(this.iframe.contentWindow)}.bind(this);if(document.body)a();else var b=setInterval(function(){document.body&&(clearInterval(b),a())},100)}},c.prototype.trackEvent=function(a,b){if(this.iframe){var c={hitType:"event",eventCategory:"Videos",eventAction:a};b&&(c.eventValue=b),this.iframe.contentWindow.eval("ga('send', JSON.parse('"+JSON.stringify(c)+"'))")}},c.prototype.createFrame=function(){var a=document.createElement("iframe");return a.width="0",a.height="0",a.marginwidth="0",a.marginheight="0",a.frameborder="0",a.style.border="0px",a.style.verticalAlign="bottom",a.style.visibility="hidden",a.style.display="none",document.body.appendChild(a),a},c.prototype.runTrackingCode=function(a){var b="",c="";try{b=window.top.location.toString(),c=window.top.location.host}catch(d){b=window.location.toString(),c=window.location.host}a.document.write("    <script>    (function ( i, s, o, g, r, a, m ) {\t  i['GoogleAnalyticsObject'] = r;\t  i[r] = i[r] || function () {\t\t  (i[r].q = i[r].q || []).push( arguments )\t\t}, i[r].l = 1 * new Date();\t  a = s.createElement( o ),\t\tm = s.getElementsByTagName( o )[0];\t  a.async = 1;\t  a.src = g;\t  m.parentNode.insertBefore( a, m )\t})( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' );\t\tga( 'create', 'UA-81804420-1', 'auto' );\tga( 'set', 'location', '"+b+"' );\tga( 'send', 'pageview' );\t</script>    "),a.document.write("    <script type='text/javascript'>    var wamid = '3582';    var typ = '3';    var Wvar=[];    Wvar.push(\"domain\",\""+c+'");    (function(){      var w = document.createElement("script");      w.type = "text/javascript";      w.src = "https://cstatic.weborama.fr/js/wam/customers/wamfactory_dpm.wildcard.min.js?rnd="+new Date().getTime();      w.async = true;      document.head.appendChild(w);    })();    </script>    '),a.document.close()},c.prototype.toString=function(){return"[iVengo.Analytics]"},a.analytics=new c}(window.VengoSystem),function(a,b){function c(a,c,d,e,f,g,h){var i=this;this.duration=a,this.from=c,this.to=d,this.interpolator=e,this.setter=f,this.easing=g,this.canceled=!1,this.startTime=b,this.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(function(){a&&a(i.now())},1e3/60)},this.onFinish=h}function d(a){return a<1/2.75?7.5625*a*a:a<2/2.75?(a-=1.5/2.75,7.5625*a*a+.75):a<2.5/2.75?(a-=2.25/2.75,7.5625*a*a+.9375):(a-=2.625/2.75,7.5625*a*a+.984375)}function e(a,b,d,e,f,g){c.call(this,a,b,d,c.Interpolator.NUMERIC,e,f,g)}function f(a,b){this.animations=a,this.runningNumber=0,this.onFinish=b}c.prototype.now=function(){return window.performance?window.performance.now():Date.now?Date.now():(new Date).now()},c.prototype.start=function(){return this.startTime=b,this.canceled=!1,0===this.duration?(this.setter&&this.setter(this.to),void(this.onFinish&&this.onFinish())):(this.requestAnimationFrame.call(window,this.processTick.bind(this)),void(this.setter&&this.setter(this.from)))},c.prototype.cancel=function(){this.canceled=!0},c.prototype.processTick=function(a){if(!this.canceled){this.startTime||(this.startTime=a);var b=a-this.startTime,c=Math.min(Math.max(0,b/this.duration),1);this.easing&&(c=this.easing(c));var d=this.interpolator(this.from,this.to,c);this.setter&&this.setter(d),b<this.duration?this.requestAnimationFrame.call(window,this.processTick.bind(this)):this.onFinish&&this.onFinish()}},c.run=function(a,b,c){var d=a[b];d&&d.cancel(),a[b]=c;var e=c.onFinish;c.onFinish=function(){delete a[b],e&&e()},c.start()},c.Interpolator={NUMERIC:function(a,b,c){return a*(1-c)+b*c}},c.Ease={LINEAR:function(a){return a},SINE_IN:function(a){return 1-Math.sin((a+1)*Math.PI/2)},SINE_OUT:function(a){return Math.sin(a*Math.PI/2)},SINE_IN_OUT:function(a){return(Math.sin(a*Math.PI-Math.PI/2)+1)/2},QUAD_IN:function(a){return a*a},QUAD_OUT:function(a){return-1*a*(a-2)},QUAD_IN_OUT:function(a){return a=2*a,a<1?.5*a*a:(--a,-.5*(a*(a-2)-1))},CUBIC_IN:function(a){return a*a*a},CUBIC_OUT:function(a){return a-=1,a*a*a+1},CUBIC_IN_OUT:function(a){return a=2*a,a<1?.5*a*a*a:(a-=2,.5*(a*a*a+2))},QUART_IN:function(a){return a*a*a*a},QUART_OUT:function(a){return a-=1,-(a*a*a*a-1)},QUART_IN_OUT:function(a){return a=2*a,a<1?.5*a*a*a*a:(a-=2,-.5*(a*a*a*a-2))},BACK_IN:function(a){var b=1.70158;return a*a*((b+1)*a-b)},BACK_OUT:function(a){var b=1.70158;return a-=1,a*a*((b+1)*a+b)+1},BACK_IN_OUT:function(a){var b=2.5949095;return a=2*a,a<1?a*a*((b+1)*a-b)/2:(a-=2,a*a*((b+1)*a+b)/2+1)},BOUNCE_IN:function(a){return 1-d(1-a)},BOUNCE_OUT:function(a){return d(a)},BOUNCE_IN_OUT:function(a){var b=0;return a<.5?(a=2*a,b=.5*(1-d(1-a))):b=.5*d(2*a-1)+.5,b}},e.prototype.__proto__=c.prototype,f.prototype.animationFinished=function(){this.runningNumber--,0===this.runningNumber&&this.onFinish&&this.onFinish()},f.prototype.start=function(){this.runningNumber=this.animations.length;for(var a=0;a<this.animations.length;a++){var b=this.animations[a];b.onFinish=this.animationFinished.bind(this),b.start()}},f.prototype.cancel=function(){for(var a=0;a<this.animations.length;a++){var b=this.animations[a];b.cancel()}this.runningNumber=0},a.Animation=c,a.NumberAnimation=e,a.ParallelAnimation=f}(window.VengoSystem),function(a,b){function c(c,d){var e;if(e="string"==typeof d||d instanceof String?JSON.parse(d):d,a.Ad.apply(this,arguments),this.originalResponse=e,this.type=c,"VengoVision"==a.config.system&&(this.checkLoaded=!0),this.sourceUrl=a.replaceSchema(e.ad),e.width&&e.width.endsWith&&e.width.endsWith("%")&&(e.width=b),e.height&&e.height.endsWith&&e.height.endsWith("%")&&(e.height=b),this.width=e.width!==b?parseInt(e.width,10):b,this.height=e.height!==b?parseInt(e.height,10):b,this.density=e.density||1,this.vastClickThrough="",e.vast)try{var f=new a.VASTDocument(a.fillParameters(e.vast)),g=f.ad.inline,h=null;g.creatives.forEach(function(a){a.linear&&(h=a.linear)}),h&&(this.vastClickThrough=h.clickThrough,h.tracking&&h.tracking.forEach(function(a){"click"===a.type&&this.addTrackingEvent(a)}.bind(this)))}catch(i){a.debug("Failed to determine vast click url: "+i.toString())}if(e.hasOwnProperty("min_width")?this.minWidth=e.min_width:this.minWidth=this.type.minWidth,
e.hasOwnProperty("min_height")?this.minHeight=e.min_height:this.minHeight=this.type.minHeight,a.isMobilePhone()||(this.maxWidth=this.type.desktopMaxWidth,this.maxHeight=this.type.desktopMaxHeight),e.hasOwnProperty("intercept_touches")?this.interceptTouches=e.intercept_touches:this.interceptTouches=!0,this.clickUrl=e.click_url,this.autoClose=parseInt(e.auto_close,0),isNaN(this.autoClose)&&(this.autoClose=b),a.debugMode&&(this.autoClose=b),"number"==typeof e.manual_close?e.manual_close===-1?this.manualClose=b:this.manualClose=e.manual_close:"boolean"==typeof e.manual_close?e.manual_close?this.manualClose=0:this.manualClose=b:"string"==typeof e.manual_close?this.manualClose=parseInt(e.manual_close,0):this.manualClose=b,this.type.fullscreen&&(this.manualClose===b&&(this.manualClose=5),this.autoClose&&this.manualClose&&this.autoClose<this.manualClose&&(this.manualClose=Math.max(0,this.autoClose-5)),this.manualClose>10&&(this.manualClose=5)),e.hasOwnProperty("tracking")){var j,k,l,m,n;for(j in e.tracking)if(e.tracking.hasOwnProperty(j))if(k=a.TrackingEvent.typeFromString(j),l=e.tracking[j],a.isArray(l))for(n=l.length,m=0;m<n;++m)this.addTrackingEvent(new a.TrackingEvent(k,l[m]));else this.addTrackingEvent(new a.TrackingEvent(k,l))}if(e.hasOwnProperty("progressTracking")){var m,o=[],p=e.progressTracking,n=p.length;for(m=0;m<n;++m)o.push(a.TrackingEvent.fromJson(p[m]));this.progressTrackingEvents=o}if(e.hasOwnProperty("logo")){var q=typeof e.logo;"boolean"==q?this.watermark=e.logo:"number"==q?this.watermark=Boolean(e.logo):"string"==q?this.watermark=!/^(false|off)$/i.test(e.logo.toString()):this.watermark=!0}}c.prototype.__proto__=a.Ad.prototype,c.prototype.type,c.prototype.sourceUrl,c.prototype.width,c.prototype.minWidth,c.prototype.height,c.prototype.minHeight,c.prototype.density,c.prototype.interceptTouches,c.prototype.clickUrl,c.prototype.autoClose,c.prototype.maxWidth=b,c.prototype.maxHeight=b,c.prototype.watermark=!0,c.prototype.manualClose,a.BannerAd=c}(window.VengoSystem),function(a,b){function c(){var b=["kp.ru","mk.ru","zr.ru","aif.ru","drive.ru","drive2.ru","f1news.ru","localhost"],c=!1;try{var d=a.viewportManipulator.hostWindow.location.hostname;b.forEach(function(a){d.indexOf(a)>-1&&(c=!0)})}catch(e){}this.enabled="VengoVision"===a.config.system&&c,this.serverUrl="//tracking.sebbia.com/track"}c.prototype.track=function(b){if(this.enabled){var c=(new Date).getTime(),d=new Image;d.src=this.serverUrl+"?key="+b+"&rand="+c+"&domain="+a.viewportManipulator.hostWindow.location.hostname}},c.prototype.trackError=function(b,c,d){if(this.enabled){c||(c="vengo"),d||(d="5");var e="http://logger.sebbia.com/report/addPlain",f=a.getXmlHttp();f.open("POST",e,!0),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send("appName="+c+"&appVersion="+d+"&description="+encodeURIComponent(b))}},c.prototype.toString=function(){return"[iVengo.DebugTracking]"},a.debugTracking=new c}(window.VengoSystem),function(a,b){function c(){this.cache={};var b=a.localStorage.getItem("ivengo_dmp_cache");if(b)try{this.cache=JSON.parse(b)}catch(c){}}c.prototype.getValidCachedDmps=function(){var a={};if(this.cache)for(var b in this.cache)this.cache.hasOwnProperty(b)&&this.isCachedDmpValid(this.cache[b],!1)&&(a[b]=this.cache[b].value);return a},c.prototype.isCachedDmpValid=function(a,b){var c=(new Date).getTime();if(a.value&&a.syncDate){var d=(c-a.syncDate)/864e5;return b?d<5:d<7}return!1},c.prototype.loadCachedValue=function(c){var d=this.cache[c];return d&&this.isCachedDmpValid(d)?(a.debug(this+" Using dmp value from cache "+c),d):b},c.prototype.saveValueToCache=function(b,c){a.debug(this+" Saving dmp value to cache "+b),this.cache[b]={name:b,value:c,syncDate:(new Date).getTime()},a.localStorage.setItem("ivengo_dmp_cache",JSON.stringify(this.cache))},c.prototype.loadDmp=function(c,d){a.debug(this+" Attempting to load info from dmp "+c.name);var e=a.getXmlHttp(),f=!1,g=function(){f||(f=!0,d())},h=setTimeout(function(){g()},a.isMobilePhone()?1e4:1e3);e.open("POST",c.link,!0);try{e.withCredentials=!0}catch(i){return void d()}e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){4==e.readyState&&(h&&(clearTimeout(h),h=b),200==e.status?(a.debug(this+" Dmp response received "+c.name),c.value=e.responseText,g()):(a.debug(this+" Failed with query dmp "+e.status+": "+e.responseText),g()))}.bind(this),e.send()},c.prototype.loadData=function(b,c){var d={},e=!1,f=function(){e=!0;var a={};for(var b in d)if(d.hasOwnProperty(b)){var f=d[b];a[b]=f.value}c(a)}.bind(this),g=function(){if(!e){for(var a in d)if(d.hasOwnProperty(a)){var b=d[a];if(!b.loaded)return}f()}}.bind(this);for(var h in b)if(b.hasOwnProperty(h)){var i=h,j=b[h],k=this.loadCachedValue(i),l={name:i,link:j,value:"",loaded:!1};d[i]=l,k&&(l.value=k.value,l.loaded=!0),k&&this.isCachedDmpValid(k,!0)||(a.debug(this+(k?" Soft":" Hard")+" cache update for dmp ["+l.name+"]"),this.loadDmp(l,function(a){a.loaded=!0,this.saveValueToCache(a.name,a.value),g()}.bind(this,l)))}g()},c.prototype.toString=function(){return"[iVengo.DmpManager]"},a.dmpManager=new c}(window.VengoSystem),function(a,b){function c(b,c){if(this.id=a.makeid(),this.adType=b,!this.adType)throw new Error(this+" Invalid ad type");this.maxValidQty=3,this.dsp=[],this.dspName=c,this.validDspList=[],this.queue=[],this.loading=[],this.started=!1,this.cancelled=!1,this.complete=!1}c.prototype.__proto__=a.Events.prototype,c.onLoaded="onLoaded",c.onComplete="onComplete",c.onCancelled="onCancelled",c.prototype.makeDspLoaded=function(a){if(a.loaded)return!1;a.loaded=!0,a.xmlHttp=b;var c=this.loading.indexOf(a);return c>=0&&this.loading.splice(c,1),!0},c.prototype.addValidDsp=function(a){this.validDspList.push(a),this.trigger(c.onLoaded,a.ad)},c.prototype.convertLoadedDspToAd=function(c){try{var d=JSON.parse(JSON.stringify(c.wrapper));"rest_593"===c.name&&(d.ad="https://s.vengovision.ru/video/69/593/plista.html",d.auto_close=0),"rest_965"===c.name&&(d.ad="https://s.vengovision.ru/video/rest_965.html"),"rest_977"===c.name&&(d.ad="https://s.vengovision.ru/video/209/997/index.html"),"rest_981"===c.name&&(d.ad="https://s.vengovision.ru/video/209/1001/index.html"),d.vast=c.vast,d.vastDescriptor=c.vastDescriptor,d.logo=!1,d.intercept_touches=!1;var e=JSON.stringify(d),f=a.Ad.fromString(this.adType,e);return f.dspName=c.name,f}catch(g){return a.error(this+" Failed to wrap 3rd party ad"),b}},c.prototype.start=function(){if(this.started)throw new Error(this+" Already started");this.started=!0,a.additionalTracking.load(function(){var c=a.additionalTracking.getDsps();for(var d in c)c.hasOwnProperty(d)&&(this.dspName&&this.dspName!==d||this.dsp.push({name:d,link:c[d].url,wrapper:c[d].wrapper,loaded:!1,xmlHttp:b,vast:b,vastDescriptor:b}));var e=a.getUrlParameter("dsp_index");if(e){var f=parseInt(e,10);f>=0&&f<this.dsp.length&&(this.dsp=[this.dsp[f]])}for(var g=0;g<this.dsp.length;g++){var h=this.dsp[g];this.queue.push(h)}this.check()}.bind(this))},c.prototype.isCancelled=function(){return this.cancelled},c.prototype.isComplete=function(){return this.complete},c.prototype.hasResult=function(){return this.validDspList.length>0},c.prototype.cancelRunningRequests=function(){a.debug(this+" Cancelling all requests");for(var b=0;b<this.loading.length;++b){var c=this.loading[b];c.xmlHttp.abort()}this.queue.splice(0,this.queue.length)},c.prototype.cancel=function(){this.complete||(this.complete=!0,this.cancelled=!0,this.cancelRunningRequests(),this.trigger(c.onCancelled))},c.prototype.checkSuccess=function(){(0==this.queue.length&&0==this.loading.length&&this.validDspList.length>0||this.validDspList.length>=this.maxValidQty)&&(this.complete=!0,this.cancelRunningRequests(),this.trigger(c.onComplete))},c.prototype.notifyNoAds=function(){this.complete||(this.complete=!0,this.trigger(c.onComplete))},c.prototype.check=function(){if(!this.complete)if(this.validDspList.length>=this.maxValidQty)this.checkSuccess();else if(0==this.queue.length&&0==this.loading.length)a.debug(this+" No available advertising from 3rd party dsp"),setTimeout(function(){this.checkSuccess(),this.notifyNoAds()}.bind(this),0);else for(var b=this.maxValidQty-this.validDspList.length-this.loading.length;this.queue.length>0&&this.loading.length<b;){var c=this.queue.shift();this.loading.push(c),this.load(c)}},c.prototype.isValidVast=function(a){return a.mediaFiles.length>0},c.prototype.load=function(b){if(!b.link)return this.makeDspLoaded(b),void this.check();a.debug(this+" Attempting to load info from dsp "+b.name);var c=a.getXmlHttp();b.xmlHttp=c;var d=setTimeout(function(){b.loaded=!0,this.check()}.bind(this),a.isMobilePhone()?1e4:1e3);c.open("GET",a.fillParameters(b.link,{player_width:"640",player_height:"360"}),!0),c.withCredentials=!0,c.onreadystatechange=function(){if(4==c.readyState){if(!this.makeDspLoaded(b))return;if(d&&(clearTimeout(d),d=0),200==c.status){a.debug(this+" Dsp response received "+b.name);var e=c.responseText;try{a.vastParse(e,function(a){this.isValidVast(a)&&(b.vast=e,b.vastDescriptor=JSON.stringify(a),b.ad=this.convertLoadedDspToAd(b),b.ad&&(this.addValidDsp(b),this.checkSuccess())),this.check()}.bind(this),function(b){a.debug(this+" Dsp returned invalid VAST with error ["+b+"]"),this.check()}.bind(this))}catch(f){a.debug(this+" Failed to parse dsp response "+b.name+": "+f.message),this.check()}}else a.debug(this+" Failed to query dsp "+b.name+": "+c.status),this.check()}}.bind(this),c.send()},c.prototype.toString=function(){return"[iVengo.DspLoader#"+this.id+"]"},a.DspLoader=c}(window.VengoSystem),function(a,b){a.reportError=function(a){}}(window.VengoSystem),function(a,b){function c(){var c=function(c){try{return c.VengoFailsafe&&a.isArray(c.VengoFailsafe)?c.VengoFailsafe:(c.VengoFailsafe=[],c.VengoFailsafe)}catch(d){return b}};this.failsafe=c(window.top),this.failsafe||(this.failsafe=c(window))}c.prototype.getParentContainerId=function(a){try{var b=JSON.parse(a);return b.parentId}catch(c){return""}},c.prototype.isDuplicateRequest=function(b){try{var c,d=JSON.stringify(b),e=this.failsafe.length;for(c=0;c<e;++c){if(this.failsafe[c]===d)return!0;if(this.getParentContainerId(this.failsafe[c])===b.parentId)return!0}}catch(f){a.warn(this+"Failed to apply failsafe, invalid integration parameters?")}return!1},c.prototype.recordRequest=function(b){if(b.parentId||b.parentClass||b.smartParentId||b.smartParentSelector||b.parentElement)try{var c=JSON.stringify(b);this.failsafe.push(c)}catch(d){a.warn(this+"Failed to apply failsafe, invalid integration parameters?")}},c.prototype.toString=function(){return"[iVengo.Failsafe]"},a.failsafe=new c}(window.VengoSystem),function(a,b){function c(){this.isMobile=a.isiOS()||a.isAndroid(),this.enabled=!1}c.prototype.__proto__=a.Events.prototype,c.prototype.isEnabled=function(){return this.enabled},c.prototype.enable=function(){this.enabled||(this.enabled=!0,this.isMobile&&!a.frameManipulator.isInsideIFrame()&&(this.initialScroll=document.body.scrollTop,this.fakeContent=document.createElement("div"),a.resetStyle(this.fakeContent),this.fakeContent.style.position="absolute",this.fakeContent.style.top="0",this.fakeContent.style.left="0",this.fakeContent.style.background="rgba(255,255,255,1)",this.fakeContent.style.display="inline-block",this.fakeContent.style.width="100%",this.fakeContent.style.height="1000000px",document.body.appendChild(this.fakeContent)))},c.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.isMobile&&!a.frameManipulator.isInsideIFrame()&&(this.fakeContent.parentNode.removeChild(this.fakeContent),document.body.scrollTop=this.initialScroll))},a.fullscreenMode=new c}(window.VengoSystem),function(a,b){function c(){this.checkInProgress=!1,this.checkPerformed=!1,this.latitude=b,this.longitude=b,this.accuracy=b,this.classbacks=[]}c.prototype.queryLocation=function(){if(!this.checkInProgress){this.checkInProgress=!0;var b=!1,c=function(){if(!b)for(b=!0,this.checkPerformed=!0,this.checkInProgress=!1;this.classbacks.length;){var a=this.classbacks.shift();a(this.latitude,this.longitude,this.accuracy)}}.bind(this);if(navigator.geolocation){var d={enableHighAccuracy:!1,timeout:1e4},e=(setTimeout(function(){this.checkInProgress&&(a.log(this+" Geolocation timeout, proceeding"),c())}.bind(this),1e4),function(b){a.log(this+" Geolocation recieved, proceeding"),b&&b.coords&&(b.coords.accuracy&&(this.accuracy=b.coords.accuracy),b.coords.latitude&&(this.latitude=b.coords.latitude),b.coords.longitude&&(this.longitude=b.coords.longitude)),c()}.bind(this)),f=function(b){a.log(this+" Failed to recieve geolocation, proceeding"),c()}.bind(this);navigator.geolocation.getCurrentPosition(e,f,d)}else c()}},c.prototype.getLocation=function(a){this.checkPerformed?a(this.latitude,this.longitude,this.accuracy):this.checkInProgress?this.classbacks.push(a):(this.classbacks.push(a),this.queryLocation())},c.prototype.toString=function(){return"[iVengo.Geo]"},a.geo=new c}(window.VengoSystem),function(a,b){function c(){this.id=a.makeid(),this.gui={},this.gui.adView=new a.AdView,this.gui.adView.delayed=!1,this.state=c.STATE_IDLE,a.log(this+" Created")}c.prototype.__proto__=a.Events.prototype,c.prototype.request,c.prototype.ad,c.prototype.gui,c.prototype.state,c.STATE_IDLE="idle",c.STATE_LOADING_REQUEST="loadingRequest",c.STATE_LOADING_BANNER="loadingBanner",c.STATE_READY="ready",c.STATE_DISPLAYING="displaying",c.STATE_FAILED="failed",c.STATE_CLOSED="closed",c.onReady="onReady",c.onDisplay="onDisplay",c.onClose="onClose",c.onError="onError",c.onClick="onClick",c.onImpression="onImpression",c.prototype.mustWaitForLoading=function(){return!document.body},c.prototype.waitForSufficientLoading=function(b){if(document.body)a.log("Will show banner immediatly"),b();else{a.log("Delaying banner display; Waiting for document body to be created");var c=setInterval(function(){document.body&&(clearInterval(c),b())},100)}},c.prototype.loadRequest=function(b){var d=this;return d.state!==c.STATE_IDLE?void a.error(d+" Cannot load request, invalid state: "+d.state):(d.request=b.request,d.state=c.STATE_LOADING_REQUEST,d.request.one(a.Request.onLoaded,function(a,c){var e=c[0];if(b.testParams)for(var f in b.testParams)b.testParams.hasOwnProperty(f)&&(e[f]=b.testParams[f]);d.loadAd(e)}),d.request.one(a.Request.onFailed,function(a,b){d.state=c.STATE_FAILED,d.trigger(c.onError,d,b)}),void d.request.start())},c.prototype.loadAd=function(d){var e=this;if(e.state!==c.STATE_LOADING_REQUEST&&e.state!==c.STATE_IDLE)return void a.error(e+" Cannot load ad, invalid state: "+e.state);if(e.mustWaitForLoading())return void e.waitForSufficientLoading(function(){e.loadAd(d)});e.ad=d,e.state=c.STATE_LOADING_BANNER;var f=a.viewportManipulator.hostWindow,g=a.viewportManipulator.getViewportScale(),h=a.isiOS()&&a.frameManipulator.isInsideIFrame();e.gui.background=document.createElement("div"),a.resetStyle(e.gui.background),a.setStyle(e.gui.background,{position:h?"absolute":"fixed",outline:"none",width:""+Math.round(f.innerWidth*g)+"px",height:""+Math.round(f.innerHeight*g)+"px",margin:"0px",padding:"0px",left:"-100%",top:"0",zIndex:Math.pow(2,53),visibility:"hidden",background:"rgba(0,0,0,0.5)"}),window.document.body.appendChild(e.gui.background);f.innerWidth,f.innerHeight;this.gui.adView.one(a.AdView.onDisplay,function(){a.viewportManipulator.saveState(),a.scrollingManipulator.saveState(),a.fullscreenMode.enable(),a.viewportManipulator.setUnscaledViewport(),a.scrollingManipulator.disableScrolling(),a.setStyle(e.gui.background,{width:"100%",height:"100%"}),e.state=c.STATE_READY,e.trigger(c.onReady,e)}),this.gui.adView.one(a.AdView.onClose,function(){a.fullscreenMode.disable(),a.viewportManipulator.restoreViewport(),a.scrollingManipulator.reenableScrolling(),e.checkInterval&&(clearInterval(e.checkInterval),e.checkInterval=b),e.close(),e.trigger(c.onClose,e)}),this.gui.adView.one(a.AdView.onError,function(a,b){e.state=c.STATE_FAILED,e.trigger(c.onError,e,b)}),this.gui.adView.on(a.AdView.onClick,function(a,b){e.trigger(c.onClick,e,b)}),this.gui.adView.on(a.AdView.onImpression,function(a){e.trigger(c.onImpression,e)}),this.gui.adView.allowAutoplay=this.allowAutoplay,this.gui.adView.allowJSVideoEmulation=this.allowJSVideoEmulation,this.gui.adView.forceJSVideoEmulation=this.forceJSVideoEmulation,this.gui.adView.allowSlideshow=this.allowSlideshow,this.gui.adView.forceSlideshow=this.forceSlideshow,e.gui.adView.showAd({parentNode:e.gui.background,ad:e.ad,adType:e.ad.type,viewWidth:"100%",viewHeight:"100%"})},c.prototype.showAd=function(){var b=this;return b.state!==c.STATE_READY?void a.error(b+" Cannot show ad, invalid state: "+b.state):(a.setStyle(b.gui.background,{left:"0",visibility:"visible"}),b.state=c.STATE_DISPLAYING,void b.trigger(c.onDisplay,b))},c.prototype.close=function(){var a=this;a.gui.adView&&a.gui.adView.close(),a.gui.background&&a.gui.background.parentNode&&a.gui.background.parentNode.removeChild(a.gui.background),a.gui={},a.state!==c.STATE_FAILED&&(a.state=c.STATE_CLOSED)},c.prototype.forceClose=function(){this.gui.adView&&this.gui.adView.forceClose()},c.prototype.toString=function(){return"[iVengo.Interstitial#"+this.id+"]"},a.Interstitial=c}(window.VengoSystem),function(a,b){function c(a,b){this.clients=[],this.receiver=a,this.messageHandler=this.receiveMessage.bind(this),this.methodRx=new RegExp("^"+b+"\\w+"),window.addEventListener("message",this.messageHandler,!1)}c.prototype.destroy=function(){a.log(this+" destroyed"),window.removeEventListener("message",this.messageHandler)},c.prototype.addClient=function(b){a.log(this+" Added client #"+this.clients.length),this.clients.push(b)},c.prototype.sendMessage=function(a,b,c){var d=Array.prototype.slice.call(arguments,2),e={method:b,args:d},f=JSON.stringify(e);a.postMessage(f,"*")},c.prototype.broadcastMessage=function(a,b){for(var c=0;c<this.clients.length;c++)this.sendMessage.apply(this,[this.clients[c].contentWindow].concat(Array.prototype.slice.call(arguments)))},c.prototype.receiveMessage=function(a){for(var b=a.source,c=-1,d=0;d<this.clients.length;d++)if(b==this.clients[d].contentWindow){c=d;break}if(!(c<0))try{var e=JSON.parse(a.data),f=e.method,g=e.args;if(!this.methodRx.test(f))throw new Error("Security exception, cannot call method "+f);this.receiver[f].apply(this.receiver,[b].concat(g))}catch(h){}},c.prototype.toString=function(){return"[iVengo.MessageBus]"},a.MessageBus=c}(window.VengoSystem),function(a,b){function c(){this.parameters=[],this.restoreParams(),this.onParametersChanged()}c.prototype.saveParams=function(){if(a.localStorage.isWebstorageSupported())try{a.localStorage.setItem(a.config.system+"-parameters",JSON.stringify(this.parameters))}catch(b){a.error(this.toString()+" Failed to save parameters",b)}else a.log(this.toString()+" Skipping save parameters: localStorage not available")},c.prototype.restoreParams=function(){if(a.localStorage.isWebstorageSupported()){var b=a.localStorage.getItem(a.config.system+"-parameters");if(b)try{this.parameters=JSON.parse(b),a.log(this.toString()+" Restored parameters",this.parameters)}catch(c){a.error(this.toString()+" Failed to restore parameters",c)}}else a.log(this.toString()+" Failed to restore parameters: localStorage not available")},c.prototype.convertToString=function(a){switch(typeof a){case"object":return"object";case"function":return"function";default:return a+""}},c.prototype.mergeParameters=function(a,c){var d,e,f,g,h,i=[],j=a.length,k=c.length;for(d=0;d<j;++d)f=a[d],f.foundMatch=!1;for(d=0;d<k;++d)if(g=c[d],g.value){for(h=!1,e=0;e<j;++e)if(f=a[e],g.name==f.name){g.value==f.value?i.push({name:g.name,value:g.value,synched:!0}):i.push({name:g.name,value:g.value,synched:!1}),f.foundMatch=!0,h=!0;break}h||i.push({name:g.name,value:g.value,synched:!1})}for(d=0;d<j;++d)if(f=a[d],!f.foundMatch){if(!f.value&&f.synched)continue;i.push({name:f.name,value:b,synched:!1})}return i},c.prototype.setParams=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push({name:c,value:this.convertToString(a[c])});var d=this.getAllParams();this.parameters=this.mergeParameters(d,b),this.onParametersChanged()},c.prototype.setParam=function(a,c){c=c?this.convertToString(c):b;var d,e,f=this.parameters.length;for(d=0;d<f;++d)if(e=this.parameters[d],e.name==a)return void(e.value!=c&&(e.value=c,e.synched=!1,this.onParametersChanged()));c&&(this.parameters.push({name:a,value:c,synched:!1}),this.onParametersChanged())},c.prototype.getParam=function(a){var c,d,e=this.parameters.length;for(c=0;c<e;++c)if(d=this.parameters[c],d.name==a)return d.value;return b},c.prototype.getAllParams=function(){var a,b,c=[],d=this.parameters.length;for(a=0;a<d;++a)b=this.parameters[a],b.value&&c.push({name:b.name,value:b.value});return c},c.prototype.clearParam=function(a){this.setParam(a,b)},c.prototype.clearAllParams=function(){var a,c,d=this.parameters.length;for(a=0;a<d;++a)c=this.parameters[a],c.value=b,c.synched=!1;this.onParametersChanged()},c.prototype.onParametersChanged=function(){this.saveParams(),this.needsSynchronization()&&this.synchronize(JSON.parse(JSON.stringify(this.parameters)))},c.prototype.needsSynchronization=function(){var a,b=this.parameters.length;for(a=0;a<b;++a)if(!this.parameters[a].synched)return!0;return!1},c.prototype.synchronize=function(b){if(!this.synchronizing){this.synchronizing=!0,a.debug(this+" Starting synchronization");var c=a.serverUrl+"setparams",d=this,e=a.getXmlHttp();e.open("POST",c,!0);try{e.withCredentials=!0}catch(f){return a.error(d+" withCredentials attribute for xmlHttpRequest is not supported, aborting"),void this.onSynchronizationFailed(b)}e.onreadystatechange=function(){4==e.readyState&&(200==e.status||204==e.status?d.onSynchronizationComplete(b):(a.debug(d+" Failed with code "+e.status+": "+e.responseText),d.onSynchronizationFailed(b)))},a.commonApiParameters.getBasicParameters(!1,function(c){var f={};for(var g in c)c.hasOwnProperty(g)&&(f[g]=c[g]);f.params={};var h,i,j=b.length;for(h=0;h<j;++h)i=b[h],i.value&&(f.params[i.name]=i.value),i.synched=!0;a.debug(d+" Sending params: "+JSON.stringify(f.params)),e.send(JSON.stringify(f))})}},c.prototype.onSynchronizationComplete=function(b){a.debug(this+" Parameters synchronized"),this.synchronizing=!1,this.parameters=this.mergeParameters(b,this.parameters),this.onParametersChanged()},c.prototype.onSynchronizationFailed=function(b){a.error(this+" Failed to synchronize parameters"),this.synchronizing=!1,setTimeout(function(){this.onParametersChanged()}.bind(this),15e3)},c.prototype.toString=function(){return"[iVengo.ParamsManager]"},a.ParamsManager=c}(window.VengoSystem),function(iVengo,undefined){var blockKeyword="block-"+iVengo.config.system.toLowerCase();iVengo.passbackAdriver=function(parentContainerId){var parentContainer=document.getElementById(parentContainerId),adRiverScriptTag=parentContainer.nextElementSibling;try{var params,adriverScriptWithKeyword,findDataset=function(a){return a&&a.dataset&&a.dataset.adriver?a.dataset.adriver:a.parentNode?findDataset(a.parentNode):undefined},dataset=findDataset(parentContainer);if(dataset)params=eval("(function() {return {"+dataset+"};})()");else{var adriverScript=adRiverScriptTag.innerHTML,paramsRegex=/(new\s*adriver\(\")([^,"]*)(\"\s*,\s*)(\{[^}]*\})([^)]*\))/,scriptParts=paramsRegex.exec(adriverScript);params=eval("(function() { var params = "+scriptParts[4]+"; return params; })()")}var randomNumber=Math.floor(9e3*Math.random())+1e3,newContainerId="pb_"+randomNumber,newContainer=window.top.document.createElement("div");newContainer.id=newContainerId,parentContainer.parentNode.insertBefore(newContainer,parentContainer.nextSibling),params.keyword?params.keyword+=";"+blockKeyword:params.keyword=blockKeyword;var customVariableName="adriver_custom_targeting_"+iVengo.config.system.toLowerCase();params.custom||(params.custom={}),params.custom[customVariableName]=blockKeyword,adriverScriptWithKeyword='new adriver("'+newContainerId+'", '+JSON.stringify(params)+")"}catch(e){return void iVengo.error("Failed to understand adriver integration, aborting passback")}window.top.eval(adriverScriptWithKeyword)}}(window.VengoSystem),function(a,b){function c(){}c.prototype.getElementHeight=function(a){return parseInt(a.height)+parseInt(a.paddingTop)+parseInt(a.paddingBottom)+parseInt(a.borderTopWidth)+parseInt(a.borderBottomWidth)+parseInt(a.marginTop)+parseInt(a.marginBottom)},c.prototype.getChildrenBlocks=function(b,c){for(var d=b.children,e=[],f=0;f<d.length;f++){var g=d[f],h=window.getComputedStyle(g),i=this.getElementHeight(h);if(h.hasOwnProperty("display")&&("block"==h.display||"list-item"==h.display)){var j=[];i>c&&(j=this.getChildrenBlocks(g,c)),j.length>0?e=e.concat(j):e.push({block:g,offset:a.getElementPosY(g)})}}return e},c.prototype.getBlockIndexByHeight=function(a,b,c){var d,e,f=b;for(d=0;d<a.length;d++)e=a[d],e.offset>f&&(f=e.offset);f<b&&(f=b);var g=b+Math.floor((f-b)*c);for(d=0;d<a.length&&(e=a[d],e.offset==f||e.offset<g);d++);return d},c.prototype.findSmartContainer=function(c,d,e,f){var g="percent",h=50,i=0,j=f;d!=b?(g="paragraph",i=parseInt(d),isNaN(h)&&(i=0),i<0&&(i=0)):(e!=b&&(h=parseInt(e)),isNaN(h)&&(h=50),h/=100,h<0&&(h=0),h>1&&(h=1));var k,l=this.getElementHeight(window.getComputedStyle(c)),m=this.getChildrenBlocks(c,l*(j?.1:1));k="percent"==g?this.getBlockIndexByHeight(m,a.getElementPosY(c),h):i;var n=document.createElement("div");return n.className="vengo-generated",a.resetStyle(n),a.setStyle(n,{display:"none"}),k>=m.length?c.appendChild(n):m[k].block.parentNode.insertBefore(n,m[k].block),n},c.prototype.getIntegrationContainer=function(c,d){var e,f=this;if(c.parentId)a.runOnReady(function(){e=document.getElementById(c.parentId),e?d(e):(a.error(f+" Cannot find view with id: "+c.parentId+" to attach banner"),d(b))}.bind(this));else if(c.parentClass)a.runOnReady(function(){var g=document.getElementsByClassName(c.parentClass);return 0===g.length?(a.error(f+' Cannot find view with class: "'+c.parentClass+'" to attach banner'),void d(b)):(g.length>1&&a.warn(f+' Multiple elements with class "'+c.parentClass+'", inserting banner into first one'),e=g[0],void d(e))}.bind(this));else if(c.smartParentId)a.runOnReady(function(){return(e=document.getElementById(c.smartParentId))?void d(this.findSmartContainer(e,c.smartParentParagraph,c.smartParentPosition,Boolean(c.smartSubBlocks))):(a.error(f+" Cannot find view with id: "+c.smartParentId+" to attach banner"),void d(b))}.bind(this));else if(c.smartParentSelector)a.runOnReady(function(){return(e=document.querySelector(c.smartParentSelector))?void d(this.findSmartContainer(e,c.smartParentParagraph,c.smartParentPosition,Boolean(c.smartSubBlocks))):(a.error(f+" Cannot find view with selector: "+c.smartParentSelector+" to attach banner"),void d(b))}.bind(this));else{var g=document.scripts[document.scripts.length-1];e=g.parentNode,d(e)}},c.prototype.toString=function(){return"[iVengo.PositionDetector]"},a.positionDetector=new c}(window.VengoSystem),function(a,b){function c(b,d){var e=this;if(this.id=b,this.requestsChain=d,this.requestsChain){this.requestsChain.on("onLoaded",function(a,b,d){e.ad=b[0],e.request=d,e.trigger(c.onLoaded,e)}),this.requestsChain.on("onFailed",function(a,b){e.trigger(c.onFailed,e,b)}),this.requestsChain.start();var f=function(b){if(e.ad)try{var c=JSON.parse(b.data);if(c.iVengoBannerRequest)try{c.bannerId===e.id&&(a.debug(e+" Recieved banner request from iframe"),b.source.postMessage(JSON.stringify({iVengoBannerResponse:!0,bannerId:e.id,adType:e.request.response.adType.key,adJson:e.request.response.responseText}),b.origin))}catch(d){a.error(e+" Failed to respond to banner request "+c.bannerId)}}catch(d){}};window.addEventListener("message",f,!1)}a.log(this+" Created")}c.prototype.__proto__=a.Events.prototype,c.prototype.id,c.prototype.requestsChain,c.prototype.ad,c.prototype.request,c.onLoaded="onLoaded",c.onFailed="onFailed",c.prototype.toString=function(){return"[iVengo.PreloadedAd#"+this.id+"]"},a.PreloadedAd=c}(window.VengoSystem),function(a,b){var c,d=new a.Events;a.startWatchingDocumentState=function(){a.isLegacyBrowser()?c=!0:"complete"===document.readyState?c=!0:window.addEventListener("load",function b(a){window.removeEventListener("load",b,!1),c=!0,d.trigger("ready")},!1)},a.isDocumentReady=function(){return c},a.runOnReady=function(a){c?a():d.one("ready",a)}}(window.VengoSystem),function(a,b){function c(b){this.id=a.makeid(),"string"==typeof b.adType||b.adType instanceof String?this.adType=a.AdType.fromString(b.adType):this.adType=b.adType,b.ad?this.ad=b.ad:this.initParams(b),a.log(this+" Created")}c.prototype.__proto__=a.Events.prototype,c.prototype.ad=b,c.prototype.id="",c.prototype.adType=b,c.prototype.adPlace="",c.prototype.adUnitId="",c.prototype.geo=!1,c.prototype.accuracy,c.prototype.latitude,c.prototype.longitude,c.prototype.mobileOnly=!1,c.prototype.desktopOnly=!1,c.onStart="onStart",c.onLoaded="onLoaded",c.onFailed="onFailed",c.onThirdPartyAd="onThirdPartyAd";var d,e=500,f=function(){d=(new Date).getTime()},g=function(){if(d){var a=(new Date).getTime();return a-d}return 2*e};c.prototype.initParams=function(b){this.adPlace=b.adPlace,this.adUnitId=b.adUnitId,this.geo=b.geo,this.accuracy=b.accuracy,this.latitude=b.latitude,this.longitude=b.longitude,this.mobileOnly=b.mobileOnly,this.desktopOnly=b.desktopOnly,this.expand=b.expand,this.dspName=b.dspName||a.getUrlParameter("dsp_name"),this.disableAdditionalDsp=Boolean(b.disableAdditionalDsp)},c.prototype.start=function(){var b=this;a.additionalTracking.sendTracking("onAdRequest"),a.debug(this+" Prepairing "+this.adType+" "+this.adUnitId),this.trigger(c.onStart,this),this.ad?(setTimeout(function(){this.processResponse(this.ad)}.bind(this),5),a.log(this+" Imitation started")):this.getRequestParams(function(c){var d=function(){var h=g();h>e?(a.log(b+" Starting"),f(),b.sendRequest(c)):(a.log(b+" Delaying"),setTimeout(d,e))};d()})},c.prototype.appendParametersFromUrl=function(b){var c=a.getUrlParameters();for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])},c.prototype.getRequestParams=function(b){a.commonApiParameters.getBasicParameters(this.geo,function(c){c.device_id||(c.device_id=a.getRandomUDID()),c.type=this.adType.key,this.latitude&&this.longitude&&(c.lat=this.latitude,c.lon=this.longitude,this.accuracy&&(c.acc=this.accuracy)),this.adPlace?c.ad_place=this.adPlace:this.adType===a.AdType.BANNER_TOPLINE?c.ad_place="topline":this.adType===a.AdType.BANNER_INLINE&&(c.ad_place="inline"),this.adUnitId&&(c.ad_unit_id=this.adUnitId),"deny"===this.expand?c.expand="1":"only"===this.expand&&(c.expand="2"),"VengoVision"===a.config.system&&(this.mobileOnly&&(c.mobileOnly="1"),this.desktopOnly&&(c.desktopOnly="1")),this.appendParametersFromUrl(c),b(a.commonApiParameters.paramsToString(c))}.bind(this),!0)},c.prototype.shouldQueryAdditionalDsp=function(){return"VengoVision"==a.config.system&&(this.adType==a.AdType.BANNER_INLINE||this.adType==a.AdType.BANNER_INSITE||this.adType==a.AdType.BANNER_TOPLINE)&&!this.disableAdditionalDsp},c.prototype.shouldUseImhoAdditionaDsp=function(){return"iVengo"==a.config.system&&!this.disableAdditionalDsp},c.prototype.processResponse=function(b){var d=a.Ad.fromString(this.adType,b);d.dspName=a.config.system;var e=/s\.vengovision\.ru\/video\/(\d+)\/(\d+)\/index.html/,f=e.exec(d.sourceUrl);f&&(d.campaignId=f[1],d.creativeId=f[2]),this.response={adType:this.adType,ad:d,responseText:b},this.trigger(c.onLoaded,this,[d])},c.prototype.sendRequest=function(d){var e,f=a.serverUrl,g=this,h=a.getXmlHttp(),i=[];this.shouldQueryAdditionalDsp()&&(e=new a.DspLoader(this.adType,this.dspName),e.on("onLoaded",function(a){l?g.trigger(c.onLoaded,g,[a]):i.push(a)}),e.on("onComplete",function(){k()}));var j=!1,k=function(){if(!m&&l&&(!e||e.hasResult()||e.isComplete())){if(j)return;j=!0,i.length>0?g.trigger(c.onLoaded,g,i):g.trigger(c.onFailed,g,n)}},l=!1,m=!1,n=b,o=setTimeout(function(){s("Request timed out",!0)},1e4),p=function(d){if(!l){l=!0,m=!0,o&&(clearTimeout(o),o=b),a.debug(g+" Finished successfully"),e&&e.cancel();try{var f=d.responseText;g.processResponse(f)}catch(h){
a.exception(g+" Failed to parse response "+h.message+" | "+d.responseText,h),g.trigger(c.onFailed,g,"Failed to parse server response")}}},q=function(){if(g.shouldUseImhoAdditionaDsp()){var b=a.additionalTracking.getImhoAd(g.adType);if(b)return a.debug(g+" No direct ad, using imho ad instead"),g.response={adType:g.adType,ad:b,responseText:b.originalResponse},g.trigger(c.onLoaded,g,[b]),!0}return!1},r=function(){l||(l=!0,o&&(clearTimeout(o),o=b),q()||(a.debug(g+" Finished succesfully, but no ad recieved"),a.additionalTracking.sendTracking("onAdUnavailable"),n="No ads available.",k()))},s=function(c,d){l||(l=!0,o&&(clearTimeout(o),o=b),q()||(a.debug(g+" "+c),n=c,h.abort(),k()))};if(e&&this.dspName)setTimeout(r,0);else{h.open("POST",f,!0);try{h.withCredentials=!0}catch(t){return void setTimeout(function(){a.error(g+" withCredentials attribute for xmlHttpRequest is not supported, aborting ad request"),g.trigger(c.onFailed,g,"Cross-site cookies are not supported")},0)}h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.onreadystatechange=function(){if(4==h.readyState){if(l)return;a.debugTracking.track("o-request-"+h.status),200==h.status?p(h):204==h.status?r():s("Failed with code "+h.status+": "+h.responseText)}},a.debugTracking.track("o-request-sent"),h.send(d)}e&&e.start()},c.prototype.toString=function(){return"[iVengo.Request#"+this.id+"]"},a.Request=c}(window.VengoSystem),function(a,b){function c(b){this.id=a.makeid(),this.requests=[],b.ad?this.makeSimulationRequest(b):this.makeStandardRequests(b),a.log(this+" Created")}c.prototype.__proto__=a.Events.prototype,c.prototype.id="",c.prototype.requests=[],c.prototype.lastError="",c.onStart="onStart",c.onLoaded="onLoaded",c.onFailed="onFailed",c.prototype.makeSimulationRequest=function(b){var c=a.AdType.fromString(b.adType),d=new a.Request({ad:b.ad,adType:c});this.requests.push(d)},c.prototype.makeStandardRequests=function(c){var d,e,f,g,h,i,j,k,l;if(d=a.makeArray(c.adType),e=a.makeArray(c.adUnitId),f=a.makeArray(c.adPlace),l=d.length,f.length!==l&&0!==f.length)throw new Error("You must provide the same amount of elements in adPlace array and adType array");if(e.length!==l&&0!==e.length)throw new Error("You must provide the same amount of elements in adUnitId array and adType array");for(k=0;k<l;++k){if(g=a.AdType.fromString(d[k]),h=e?e[k]:b,i=f?f[k]:b,!g)throw new Error("Unknown ad type: "+d[k]);var m;try{m=JSON.parse(JSON.stringify(c))}catch(n){throw a.exception(this+" Failed to parse params "+n.message,n),n}m.adType=g,m.adUnitId=h,m.adPlace=i,m.desktopOnly=Boolean(c.desktopOnly),m.mobileOnly=Boolean(c.mobileOnly),m.disableAdditionalDsp=Boolean(c.disableAdditionalDsp),j=new a.Request(m),this.requests.push(j)}},c.prototype.start=function(){a.log(this+" Starting chain of "+this.requests.length+" requests"),this.trigger(c.onStart,this),this.loadNextRequest()},c.prototype.loadNextRequest=function(){var b=this,d=this.requests.shift();d?(d.on(a.Request.onLoaded,function(d,e){a.log(b+" Finished successfully"),b.trigger(c.onLoaded,b,e,d)}),d.one(a.Request.onFailed,function(a,c){b.lastError=c,b.loadNextRequest()}),d.start()):(a.log(this+" Failed: "+b.lastError),b.trigger(c.onFailed,b,b.lastError))},c.prototype.toString=function(){return"[iVengo.RequestsChain#"+this.id+"]"},a.RequestsChain=c}(window.VengoSystem),function(a,b){function c(){a.frameManipulator.canManipulateParent()?this.hostWindow=a.frameManipulator.getHostWindow():this.hostWindow=window}c.prototype.__proto__=a.Events.prototype,c.prototype.saveState=function(){this.startScrollX=this.hostWindow.scrollX,this.startScrollY=this.hostWindow.scrollY},c.prototype.disableScrolling=function(){this.scrollingDisabled||(window.scrollTo(0,this.startScrollY),this.css=document.createElement("style"),this.css.type="text/css",this.css.innerHTML="html, body {     overflow-x:hidden !important;     margin:0 !important;     padding:0 !important;     min-width:0 !important; }",document.getElementsByTagName("head")[0].appendChild(this.css),this.scrollingDisabled=!0)},c.prototype.reenableScrolling=function(){this.scrollingDisabled&&(this.css.parentNode&&this.css.parentNode.removeChild(this.css),window.scrollTo(this.startScrollX,this.startScrollY),this.scrollingDisabled=!1)},c.prototype.toString=function(){return"[iVengo.ScrollingManipulator]"},a.scrollingManipulator=new c}(window.VengoSystem),function(a,b){var c,d,e=a.config.udidUrl,f=!1,g=!1,h=b,i=[],j=0,k=function(b){a.localStorage.setItem("ivengo_udid_default",b.defaultUdid),a.localStorage.setItem("ivengo_udid_sync_time",b.lastSyncTime),a.localStorage.setItem("ivengo_udid_anonymous",Boolean(b.anonymous)?"true":"false")},l=function(a,b){if(!a)return!1;var c=(new Date).getTime(),d=Math.abs(Math.floor((c-a)/1e3/3600));return b?d<24:d<720},m=function(){var c=a.localStorage.getItem("ivengo_udid_default"),d=parseInt(a.localStorage.getItem("ivengo_udid_sync_time")),e="true"===a.localStorage.getItem("ivengo_udid_anonymous");return c&&l(d)?{defaultUdid:c,lastSyncTime:d,anonymous:e}:b},n=function(){var b=!1,e=!1,f=!1,g=!1,i=function(){j&&(clearInterval(j),j=0),b||(b=!0,p())};if(h&&l(d,!0))return a.log("[iVengo.UDID] Synchronization is not needed"),void i();a.log("[iVengo.UDID] Needs synchronization");var m=function(){e=!0,a.log("[iVengo.UDID] Failed to load udid in a reasonable time"),i()},n=setTimeout(function(){m()},5e3);q(function(b){var d=function(b){try{var d=JSON.parse(b.data),e=d.method;"udid"===e&&(clearTimeout(n),h=d.args[0],a.isiOS()&&r&&r.defaultUdid&&r.defaultUdid!==h&&(h=r.defaultUdid,c=!0),h&&a.localStorage.isWebstorageSupported()&&k({defaultUdid:h,lastSyncTime:(new Date).getTime(),anonymous:c}),h||(g=!0),a.log("[iVengo.UDID] Received shared udid: "+h),i())}catch(f){}},e=function(a,b,c){if(a){var d=Array.prototype.slice.call(arguments,1),e={method:b,args:d},f=JSON.stringify(e);a.postMessage(f,"*")}};if(!f){f=!0,window.addEventListener("message",d,!1),clearTimeout(n),n=setTimeout(function(){m()},5e3);var l=function(){e(b,"getUdid")};j=setInterval(l,200),l()}},function(){clearTimeout(n),i()})},o=function(b){var c="https://tracking.i-vengo.com/web/uuid.php",d="";try{d=localStorage.getItem("ivengo_udid")}catch(e){}if(h&&d){var f=a.getXmlHttp();f.open("GET",c+"?uid="+h+"&old_uid="+d,!0),f.onreadystatechange=function(){4==f.readyState&&(200==f.status?(a.log("[iVengo.UDID] Updated udid on server"),localStorage.removeItem("ivengo_udid")):a.log("[iVengo.UDID] Failed to update udid on server"),b())},f.send()}else b()},p=function(){o(function(){for(g=!0,f=!1;i.length;){var a=i.shift();a(h)}})},q=function(b,c){if(document.body){var d=document.createElement("iframe");d.width="0",d.height="0",d.marginwidth="0",d.marginheight="0",d.frameborder="0",d.style.border="0px",d.style.verticalAlign="bottom",d.style.visibility="hidden",d.style.display="none",document.body.appendChild(d),d.onload=function(){a.log("[iVengo.UDID] Loaded udid frame"),setTimeout(function(){d.contentWindow?b(d.contentWindow):c()},0)},d.onerror=function(){a.log("[iVengo.UDID] Failed to load udid frame"),c()},d.src=e}else var f=setInterval(function(){document.body&&(clearInterval(f),q(b,c))},100)},r=m();r&&(h=r.defaultUdid,c=r.anonymous,d=r.lastSyncTime),a.getCachedUdid=function(){return h},a.getUDID=function(a){g?a(h):f?i.push(a):(f=!0,i.push(a),n())},a.getRandomUDID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},a.syncUDID=function(){g||f||(f=!0,n())},a.isAnonymous=function(){return c}}(window.VengoSystem),function(a,b){var c=function(a){for(var b={},c=a.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");b[e[0]]=e[1]}return b},d=function(){var b;if(a.frameManipulator.isInsideBannerNetwork())try{b=a.frameManipulator.getHostWindow().location.search.substr(1)}catch(d){a.log("Failed to get url parameters")}else b=window.location.search.substr(1);return null!=b&&""!=b?c(b):{}};a.getUrlParameters=function(){var a={},b=d();for(var c in b)b.hasOwnProperty(c)&&0===c.indexOf("vengo_")&&(a[c.substr("vengo_".length)]=b[c]);return a},a.getUrlParameter=function(b){return a.getUrlParameters()[b]}}(window.VengoSystem),function(a,b){a.getXMLTagName=function(a){return a.tagName?a.tagName:"XML root"},a.parseXml=function(a){var b,c;return window.DOMParser?(b=new DOMParser,c=b.parseFromString(a,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.loadXML(a)),c},a.getRequiredSubtag=function(b,c){var d=b.getElementsByTagName(c);if(!d||0==d.length)throw new Error("Missing VAST tag: Required tag "+c+" is missing inside "+a.getXMLTagName(b));if(d.length>1)throw new Error("Invalid VAST: Too many tags of type "+c+" inside tag "+a.getXMLTagName(b));return d[0]},a.getOptionalDirectSubtag=function(a,b){for(var c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];if(d.tagName===b)return d;d=d.nextElementSibling}return null},a.getRequiredDirectSubtag=function(b,c){var d=a.getOptionalDirectSubtag(b,c);if(d)return d;throw new Error("Missing VAST tag: Required tag "+c+" is missing inside "+a.getXMLTagName(b))},a.getRequiredSubtags=function(b,c){var d=b.getElementsByTagName(c);if(!d||0==d.length)throw new Error("Missing VAST tag: Required tag "+c+" is missing inside "+a.getXMLTagName(b));return d},a.getOptionalSubtag=function(a,c){var d=a.getElementsByTagName(c);return d&&0!=d.length?d[0]:b},a.getOptionalSubtags=function(a,b){return a.getElementsByTagName(b)};var c=function(a){return a?a.replace("<![CDATA[","").replace("]]>",""):b};a.trim=function(a){return String.trim?a.trim():a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},a.getOptionalElementText=function(a){for(var b="",c=a.childNodes,d=0;d<c.length;d++){var e=c[d];b+=e.nodeValue}return b.trim()},a.getRequiredElementText=function(b){var c=a.getOptionalElementText(b);if(""===c)throw new Error("Text required in element "+b.nodeName);return c},a.getTagValue=function(d){return d?d.textContent?a.trim(d.textContent):d.innerHTML?a.trim(c(d.innerHTML)):b:b},a.getRequiredSubtagValue=function(b,c){var d=a.getRequiredSubtag(b,c);return a.getTagValue(d)},a.getOptionalSubtagValue=function(c,d){var e=a.getOptionalSubtag(c,d);return e?a.getTagValue(e):b},a.getRequiredAttribute=function(b,c){var d=b.getAttributeNode(c);if(!d||!d.value)throw new Error("Missing VAST attribute: Required attribute "+c+" not found in tag "+a.getXMLTagName(b));return d.value},a.getOptionalAttribute=function(a,c){var d=a.getAttributeNode(c);return d?d.value:b}}(window.VengoSystem),function(a,b){function c(c,d){a.Ad.apply(this,arguments);var e=new a.VASTDocument(d),f=e.ad.inline,g=b,h=[];f.creatives.forEach(function(a){a.linear?g=a.linear:a.companions&&h.push.apply(h,a.companions)}),this.mediaFiles=g.mediaFiles.slice(),this.videoDuration=g.duration,this.skipOffset=g.skipOffset,this.trackingEvents=[],this.trackingEvents.push.apply(this.trackingEvents,f.tracking),this.trackingEvents.push.apply(this.trackingEvents,g.tracking),this.clickThrough=g.clickThrough,this.previewUrl=f.preview,this.companions=h}c.prototype.__proto__=a.Ad.prototype,c.prototype.trackTime=function(b){var c,d,e,f=this.trackingEvents.length;for(d=0;d<f;++d)if(c=this.trackingEvents[d],!c.reported)switch(c.type){case a.TrackingEvent.IMPRESSION:c.send(),c.reported=!0;break;case a.TrackingEvent.FIRST_QUARTILE:b>this.videoDuration/4&&(c.send(),c.reported=!0);break;case a.TrackingEvent.MIDPOINT:b>this.videoDuration/2&&(c.send(),c.reported=!0);break;case a.TrackingEvent.THIRD_QUARTILE:b>3*this.videoDuration/4&&(c.send(),c.reported=!0);break;case a.TrackingEvent.PROGRESS:e="string"==typeof c.value&&c.value.indexOf("%")!==-1?Math.round(this.videoDuration*parseInt(c.value,10)/100):c.value,b>e&&(c.send(),c.reported=!0)}},a.VideoAd=c}(window.VengoSystem),function(a,b){a.updateVisibilityOffset=function(b,c){var d=b.getBoundingClientRect(),e=a.viewportManipulator.getViewportHeight(),f=c.endOffset-c.beginOffset;f<=0&&(f=d.height),0==f&&(f=1);var g=Math.max(0,d.top+c.beginOffset),h=Math.min(e,d.top+c.beginOffset+f),i=g<h?h-g:0;return c.beginOffset=d.top+c.beginOffset,c.endOffset=c.beginOffset+f,c.visibility=i/f,c.elem=b,c},a.getElementVisibilityData=function(b,c,d,e){if(e||(e=null),!b)return e;var f="body"==b.nodeName.toLowerCase(),g=b.ownerDocument.defaultView||b.ownerDocument.parentWindow;if(!g)return null;if(e&&(e=a.updateVisibilityOffset(b,e)),f){var h=a.frameManipulator.findContainingIFrame(g);return a.getElementVisibilityData(h,c,d,e)}return e?e:a.getElementVisibilityData(b,c,d,{elem:b,beginOffset:-d,endOffset:c+d,visibility:1})},a.getElementVisibility=function(c,d,e,f){d===b&&(d=100);for(var g=c,h=!0;"body"!==g.nodeName.toLowerCase();){if((e&&g!==c&&"vengo-generated"!==g.className||!e)&&("none"===g.style.display.toLowerCase()||"hidden"===g.style.visibility.toLowerCase())){h=!1;break}g=g.parentNode}if(!h)return 0;var i=f?f:c.offsetHeight!=b?c.offsetHeight:c.clientHeight,j=a.getElementVisibilityData(c,i,d);return j.visibility<=0?0:j.visibility},a.isVisible=function(b,c,d){return a.frameManipulator.isInsideBannerNetwork()&&(b=a.frameManipulator.iframeParent),a.getElementVisibility(b,c,d)>0},a.runOnVisible=function(b,c){if(a.isVisible(b,0,!0))c();else{a.debug("[iVengo.Visibility] Banner is not current visible, delaying impression");var d,e=function(){a.isVisible(b,0,!0)&&(window.removeEventListener("scroll",e,!1),clearInterval(d),a.debug("[iVengo.Visibility] Banner displayed after delay"),c())};window.addEventListener("scroll",e,!1),d=setInterval(e,500)}}}(window.VengoSystem),function(a,b){function c(a){this.adType=a,this.gui={}}c.prototype.container,c.prototype.gui,c.prototype.attach=function(c){var d=this;if(d.container!==b)return d.gui.root;var e,f;return"VengoVision"===a.config.system?(this.collapsedOffset=57,e="data:image/png;base64,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",f="http://vengovision.ru/"):(this.collapsedOffset=60,e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAQCAYAAACBSfjBAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUE3QTdGNkUyREU0MTFFNDk2NzZFRUUwRTFDRDYyODgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUE3QTdGNkQyREU0MTFFNDk2NzZFRUUwRTFDRDYyODgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozRkJCNEY2NTE2NUMxMUU0OUQyQkZGNkU5MjEzMjY2QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozRkJCNEY2NjE2NUMxMUU0OUQyQkZGNkU5MjEzMjY2QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrCefv0AAAYUSURBVHja7FgLTJV1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",f="http://www.i-vengo.com/"),d.container=c,d.gui.root=document.createElement("div"),a.resetStyle(d.gui.root),a.setStyle(d.gui.root,{overflow:"hidden",position:"absolute",width:"80px",height:"16px",zIndex:"2"}),d.container.appendChild(d.gui.root),"VengoVision"===a.config.system?a.setStyle(d.gui.root,{right:"0",top:"0"}):a.setStyle(d.gui.root,{left:"0",bottom:"0"}),d.gui.button=document.createElement("a"),a.resetStyle(d.gui.button),a.setStyle(d.gui.button,{position:"absolute",top:"0px"}),d.gui.button.href="#",d.gui.root.appendChild(d.gui.button),"VengoVision"===a.config.system?a.setStyle(d.gui.button,{left:d.collapsedOffset+"px"}):a.setStyle(d.gui.button,{right:d.collapsedOffset+"px"}),d.gui.image=document.createElement("img"),a.resetStyle(d.gui.image),a.setStyle(d.gui.image,{width:"80px",height:"16px"}),d.gui.image.src=e,d.gui.button.appendChild(d.gui.image),d.gui.button.onclick=function(a){return d.expanded?open(f):d.expand(),a.preventDefault(),!1},d.gui.root},c.prototype.animation,c.prototype.expanded,c.prototype.animate=function(b,c,d){var e=this;a.Animation.run(this,"animation",new a.NumberAnimation(500,b,c,function(b){e.gui.button&&("VengoVision"===a.config.system?a.setStyle(e.gui.button,{left:b+"px"}):a.setStyle(e.gui.button,{right:b+"px"}))},a.Animation.Ease.QUART_OUT,d))},c.prototype.expand=function(){if(!this.animation){var a=this;this.animate(this.collapsedOffset,0,function(){a.expanded=!0,setTimeout(function(){a.collapse()},3e3)})}},c.prototype.collapse=function(){this.animation||(this.expanded=!1,this.animate(0,this.collapsedOffset))},c.prototype.detach=function(){var a=this;a.container!==b&&(a.container.removeChild(a.gui.root),a.gui={},a.container=b)},a.Watermark=c}(window.VengoSystem),function(a,b){function c(a){this.handler=a,this.hiddenAttr="hidden",this.onChangeHandler=this.onChange.bind(this),this.visible=b,this.mode=b,this.hiddenAttr in document?(document.addEventListener("visibilitychange",this.onChangeHandler),this.mode=1):(this.hiddenAttr="mozHidden")in document?(document.addEventListener("mozvisibilitychange",this.onChangeHandler),this.mode=2):(this.hiddenAttr="webkitHidden")in document?(document.addEventListener("webkitvisibilitychange",this.onChangeHandler),this.mode=3):(this.hiddenAttr="msHidden")in document?(document.addEventListener("msvisibilitychange",this.onChangeHandler),this.mode=4):"onfocusin"in document?(document.onfocusin=document.onfocusout=this.onChangeHandler,this.mode=5):(document.addEventListener("pageshow",this.onChangeHandler),document.addEventListener("pagehide",this.onChangeHandler),document.addEventListener("focus",this.onChangeHandler),document.addEventListener("blur",this.onChangeHandler),this.mode=6);var c=document[this.hiddenAttr];c!==b&&(this.visible=!c)}c.prototype.isVisible=function(){return this.visible},c.prototype.onChange=function(a){var b={focus:!0,focusin:!0,pageshow:!0,blur:!1,focusout:!1,pagehide:!1};a=a||window.event;var c;c=a.type in b?b[a.type]:!document[this.hiddenAttr],c!==this.visible&&(this.visible=c,this.handler&&this.handler(c))},c.prototype.uninstall=function(){switch(this.mode){case 1:document.removeEventListener("visibilitychange",this.onChangeHandler);break;case 2:document.removeEventListener("mozvisibilitychange",this.onChangeHandler);break;case 3:document.removeEventListener("webkitvisibilitychange",this.onChangeHandler);break;case 4:document.removeEventListener("msvisibilitychange",this.onChangeHandler);break;case 5:document.onfocusin=document.onfocusout=null;break;case 6:document.addEventListener("pageshow",this.onChangeHandler),document.addEventListener("pagehide",this.onChangeHandler),document.addEventListener("focus",this.onChangeHandler),document.addEventListener("blur",this.onChangeHandler)}},a.WindowVisibilityWatcher=c}(window.VengoSystem),function(a,b){function c(b,c,d){this.object=b,this.eventName=c,this.handler=d,b.addEventListener(c,d),a.log(this+" handler for "+c+" installed")}function d(a,c){this.id=a,this.source=null,this.audio=null,this.volume=b,this.remoteMethodExecutor=c,this.paused=!0}c.prototype.uninstall=function(){this.object.removeEventListener(this.eventName,this.handler),a.log(this+" handler for "+this.eventName+" uninstalled")},c.prototype.toString=function(){return"[EventInterceptor]"},d.prototype.execRemoteMethod=function(a){this.remoteMethodExecutor.apply(null,[this.id].concat(Array.prototype.slice.call(arguments)))},d.prototype.setSource=function(a){this.source=a,this.installTouchHandler()},d.prototype.load=function(){},d.prototype.play=function(){this.paused=!1,this.audio.play()},d.prototype.pause=function(){this.paused=!0,this.audio.pause()},d.prototype.stop=function(){this.uninstallHandlers(),this.audio&&(this.audio.pause(),this.audio.src="",this.audio.stop&&this.audio.stop())},d.prototype.setCurrentTime=function(a){this.audio.currentTime=a},d.prototype.setVolume=function(a){this.volume=a,this.audio&&(this.audio.volume=a)},d.prototype.addListener=function(a){var b=this;this.audio.addEventListener(a,function(){b.execRemoteMethod("triggerEvent",a)})},d.prototype.installTouchHandler=function(){if(!this.touchInterceptor){var b=this,d=function(){a.log(b.toString()+" Intercepted first user action"),b.createAudio(),b.uninstallHandlers()},e=window.document;a.frameManipulator.isInsideIFrame()&&a.frameManipulator.canManipulateParent()&&(e=a.frameManipulator.getHostWindow().document),this.touchInterceptor=new c(e,"touchstart",d),this.mouseInterceptor=new c(e,"mousedown",d)}},d.prototype.uninstallHandlers=function(){this.touchInterceptor&&(this.touchInterceptor.uninstall(),this.touchInterceptor=b),this.mouseInterceptor&&(this.mouseInterceptor.uninstall(),this.mouseInterceptor=b)},d.prototype.currentTimeChanged=function(){this.execRemoteMethod("currentTimeChanged",this.audio.currentTime)},d.prototype.createAudio=function(){var a=this;this.audio&&this.audio.stop(),this.audio=new Audio(this.source),this.audio.ontimeupdate=this.currentTimeChanged.bind(this),this.volume!==b&&(this.audio.volume=this.volume),this.audio.play(),this.audio.addEventListener("durationchange",function(){this.execRemoteMethod("durationChanged",this.audio.duration)}.bind(this)),this.audio.addEventListener("canplay",function(){a.paused&&a.audio.pause(),a.execRemoteMethod("execCanPlay")})},d.prototype.toString=function(){return"[AudioPlayer#"+this.id+"]"},a.AudioPlayer=d}(window.VengoSystem),function(a,b){function c(c){a.AdViewImplementation.apply(this,[c]),this.state="default",this.audioPlayers={},this.manualShow=!1,this.waitiingForSdkToShow=!1,this.shown=!1,this.windowVisibilityWatcher=new a.WindowVisibilityWatcher(this.windowVisibilityChanged.bind(this)),this.delayedLock=0,this.visibilityMargin=0,this.fixedBackgroundPositionTimer=0,this.containerResizeHandler=this.containerResizeHandler.bind(this),this.containerResizeHandlerEnabled=!1,this.waitBannerReady=c.waitBannerReady==b||Boolean(c.waitBannerReady),this.videoQuality=c.videoQuality,this.videoIndex=c.videoIndex,this.disablePreload=c.disablePreload,a.log(this+" Created")}c.prototype.__proto__=a.Events.prototype,c.prototype.__proto__.__proto__=a.AdViewImplementation.prototype,c.onDisplay="onDisplay",c.onAutoClose="onAutoClose",c.onManualClose="onManualClose",c.onError="onError",c.onClick="onClick",c.onImpression="onImpression",c.prototype.receiveMessage=b,c.prototype.isBannerLoaded=!1,c.prototype.waitBannerReady=!0,c.prototype.needForceCloseAfterVideo=!1,c.prototype.clientAdditionalHeight=0,c.prototype.viewWidth=b,c.prototype.viewHeight=b,c.prototype.autoSize=!1,c.prototype.closeButtonDisabledByClient=!1,c.prototype.closeButtonVisible=!1,c.prototype.isReady=!1,c.prototype.isIFrameReady=!1,c.prototype.sendMessage=function(a,b,c){this.messageBus&&this.messageBus.sendMessage.apply(this.messageBus,Array.prototype.slice.call(arguments))},c.prototype.broadcastMessage=function(a,b){this.messageBus&&this.messageBus.broadcastMessage.apply(this.messageBus,Array.prototype.slice.call(arguments))},c.prototype.getVisibility=function(){var b=this.getRootElement(),c=this.gui.root.clientHeight;return a.frameManipulator.isInsideBannerNetwork()&&(b=a.frameManipulator.iframeParent,c=b.clientHeight),b?a.getElementVisibility(b,this.visibilityMargin,!0,c):0},c.prototype.windowVisibilityChanged=function(){this.broadcastMessage("setWindowViewable",this.windowVisibilityWatcher.isVisible())},c.prototype.updateCloseButtonVisibility=function(){var a="expanded"===this.state||this.closeButtonVisible&&!this.closeButtonDisabledByClient;a?this.gui.closeButton||this.showCloseButton():this.gui.closeButton&&this.hideCloseButton(!0)},c.prototype.setCloseButtonVisible=function(a){this.closeButtonVisible!==a&&(this.closeButtonVisible=a,this.updateCloseButtonVisibility())},c.prototype.timeout=0,c.prototype.delayedLockTimeout=0,c.prototype.viewableTimer=0,c.prototype.lastSendParamsTime=0,c.prototype.getRootElement=function(){return this.gui.background},c.prototype.adjustSize=function(){a.AdViewImplementation.prototype.adjustSize.call(this);var b=this.getScale();b&&setTimeout(function(){var a=this.gui.wrapper.clientWidth,c=this.gui.wrapper.clientHeight;this.gui.iframe.style.width=a/b+"px",this.gui.iframe.style.height=c/b+"px",this.setElementZoom(this.gui.iframe,b,"top left")}.bind(this),0)},c.prototype.clearAutoCloseTimeTracker=function(){this.autoCloseTimeTracker&&(clearInterval(this.autoCloseTimeTracker),this.autoCloseTimeTracker=b)},c.prototype.isTopLine=function(){return!(!this.gui.background||"VengoVision"!=a.config.system)&&(this.ad.type==a.AdType.BANNER_TOPLINE||this.ad.type!=a.AdType.BANNER_INLINE&&a.getElementPosY(this.gui.background)<=16)},c.prototype.getContainerSize=function(){for(var b={width:0,height:0},c=this.container;c&&!b.width;){if(getComputedStyle){var d=getComputedStyle(c);b.width=Math.max(0,parseInt(d.width)-parseInt(d.paddingLeft)-parseInt(d.paddingRight)),b.height=Math.max(0,parseInt(d.height)-parseInt(d.paddingBottom)-parseInt(d.paddingTop))}b.width||(b.width=c.clientWidth),b.height||(b.height=c.clientHeight),c=c.parentElement}if(a.frameManipulator.isInsideBannerNetwork()){var e=a.frameManipulator.guessBannerWidth();!isNaN(e)&&e>0&&(b.width=e,a.frameManipulator.alignParentNode())}return b},c.prototype.updateAutoSize=function(){var b,c,d=this.getContainerSize(),e=d.width,f=d.height;if("expanded"===this.state)this.gui&&(this.gui.background&&(this.gui.background.style.left="0px",this.gui.background.style.top="0px",this.gui.background.style.width="100%",this.shown&&(this.gui.background.style.height="100%")),this.gui.root&&(this.gui.root.style.width="100%",this.gui.root.style.height="100%"),this.adjustSize());else{this.initialViewWidth?e=a.AdViewImplementation.getCalcSize(this.initialViewWidth,d.width):this.ad.maxWidth&&e>this.ad.maxWidth&&(e=this.ad.maxWidth),this.initialViewHeight?f=a.AdViewImplementation.getCalcSize(this.initialViewHeight,d.height):this.ad.maxHeight&&f>this.ad.maxHeight&&(f=this.ad.maxHeight);var g=this.isTopLine(),h=0;!g&&this.ad.watermark&&(h=16),this.viewWidth=e+"px",b=e;var i=this.ad.type.proportion;if(i){var j=h;(this.ad.type.additionalHeight||this.clientAdditionalHeight)&&(j+=this.ad.type.additionalHeight+this.clientAdditionalHeight),c=e/i+j,this.viewHeight=c+"px"}else this.viewHeight=f+"px",c=f;this.gui&&(this.gui.background&&(this.gui.background.style.left=(d.width-e)/2+"px",this.gui.background.style.top=(d.height-f)/2+"px",this.gui.background.style.width=this.viewWidth,this.shown&&(this.gui.background.style.height=this.viewHeight)),this.gui.root&&(this.gui.root.style.width=this.viewWidth,this.gui.root.style.height=(parseInt(this.viewHeight)-h).toString()+"px",this.gui.root.style.top=h+"px"),a.frameManipulator.isInsideBannerNetwork()&&this.shown&&a.frameManipulator.resize(b+"px",c+"px"),this.adjustSize())}},c.prototype.containerResizeHandler=function(){"complete"===document.readyState&&this.autoSize&&this.updateAutoSize(),this.gui&&this.gui.bgIframe&&this.updatePositionOfFixedBackground()},c.prototype.enableContainerResizeListener=function(a){this.containerResizeHandlerEnabled!=a&&(this.containerResizeHandlerEnabled=a,this.containerResizeHandlerEnabled?window.addEventListener("resize",this.containerResizeHandler):window.removeEventListener("resize",this.containerResizeHandler))},c.prototype.onIFrameLoadSuccess=function(){this.closed||(clearTimeout(this.timeout),this.timeout=0,this.debugTrack("banner-content-loaded"),a.log(this+" Frame loaded url: "+this.gui.iframe.src),setTimeout(function(){return this.isIFrameReady=!0,this.ad.checkLoaded&&!this.isBannerLoaded?(a.log(this+" Destroying iframe because banner didn't call AdvClientApi.checkingLoaded()"),void this.triggerBannerLoadingError("Error downloading banner")):void(this.delayedLock>0?this.delayedLockTimeout=setTimeout(function(){a.warn(this+" Failed to recieve AdvClientAPI BannerLoaded in a reasonable time, aborting"),this.close(),this.trigger(c.onError);
}.bind(this),3e4):this.checkBannerReady())}.bind(this),a.isIE()?500:0))},c.prototype.onIFrameLoadError=function(){clearTimeout(this.timeout),this.timeout=0,this.debugTrack("banner-content-error"),this.triggerBannerLoadingError("Error loading banner")},c.prototype.showAd=function(){this.debugTrack("banner-start");var d=this;if(this.viewWidth===b||this.viewHeight===b)this.autoSize=!0,this.initialViewWidth=this.viewWidth,this.initialViewHeight=this.viewHeight,this.updateAutoSize(),this.enableContainerResizeListener(!0),"complete"!==document.readyState&&document.addEventListener("readystatechange",this.containerResizeHandler);else if(a.AdViewImplementation.isSizeCacl(this.viewWidth)){var e=this.getContainerSize();this.viewWidth=a.AdViewImplementation.getCalcSize(this.viewWidth,e.width)+"px"}a.log(this+" Showing ad: "+this.ad.sourceUrl+" size: "+this.viewWidth+"x"+this.viewHeight),a.addOrientationChangeListener(function(a){this.broadcastMessage("trigger","orientationChange",a)}.bind(this)),this.messageBus=new a.MessageBus(this,"advApi"),d.timeout=setTimeout(function(){a.warn(d+" Failed to load banner in a reasonable time, aborting"),d.close(),d.trigger(c.onError)},1e4),d.createRoot();var f={position:"relative",width:this.viewWidth,height:this.ad.type.fullscreen?this.viewHeight:0,opacity:0,visibility:"hidden"};this.viewMargin&&!a.frameManipulator.isInsideIFrame()&&(f.margin=this.viewMargin),d.gui.background=a.createElement("div",!0,f),a.wrapElement(d.gui.root,d.gui.background),d.gui.background.style.overflow="hidden",d.gui.iframe=a.createElement("iframe",!0,{position:"absolute",width:"100%",height:"100%",visibility:"hidden",overflow:"hidden"}),d.gui.iframe.scrolling="no",d.gui.iframe.onload=this.onIFrameLoadSuccess.bind(this),d.gui.iframe.onerror=this.onIFrameLoadError.bind(this),d.gui.iframe.src=d.ad.sourceUrl,d.gui.wrapper.appendChild(d.gui.iframe),d.ad.interceptTouches&&this.showClickScreen(),setTimeout(function(){d.messageBus.addClient(d.gui.iframe)},0)},c.prototype.show=function(){if(!this.shown){this.debugTrack("banner-displayed"),this.startShowTime=(new Date).getTime(),this.shown=!0;var d=this;d.gui.iframe.style.visibility="inherit",d.ad.watermark&&d.showWatermark(),d.ad.manualClose!==b&&(d.manualCloseTimePassed=0,d.manualCloseTimeTracker=setInterval(function(){d.manualCloseTimePassed+=100,d.manualCloseTimePassed>=1e3*d.ad.manualClose&&(d.setCloseButtonVisible(!0),clearInterval(d.manualCloseTimeTracker),d.manualCloseTimeTracker=b)},100)),d.ad.autoClose&&!a.getUrlParameter("disable_autoclose")&&(d.autoCloseTimePassed=0,d.autoCloseTimeTracker=setInterval(function(){"default"===d.state&&(d.autoCloseTimePassed+=100),d.autoCloseTimePassed>=1e3*d.ad.autoClose&&d.hideAndClose(function(){d.ad.sendTrackingEvents(a.TrackingEvent.AUTOCLOSE),d.trigger(c.onAutoClose)})},100)),this.startWatchingSize(),this.ad.type!=a.AdType.BANNER_CUBE&&this.ad.type!=a.AdType.BANNER_STANDARD&&(this.manualImpressionTracking||this.impressionTriggered||(this.debugTrack("banner-impression"),this.impressionTriggered=!0,this.ad.sendTrackingEvents(a.TrackingEvent.IMPRESSION))),d.trigger(c.onDisplay),a.frameManipulator.isInsideBannerNetwork()&&(a.frameManipulator.resize(this.viewWidth,this.viewHeight),a.frameManipulator.isAdFox&&!d.ad.type.fullscreen&&"absolute"==a.frameManipulator.iframeParent.style.position&&(a.frameManipulator.iframeParent.style.position="relative"),a.getDesktopSafariVersion()&&(a.frameManipulator.getTopContainer().style.transform="translateZ(0)")),this.animateShow(function(){d.autoSize&&d.updateAutoSize(),d.broadcastMessage("trigger","bannerReady")})}},c.prototype.onUpdateVisibility=function(b,d){var e=this.getVisibility();if(e>0){this.totalTimeViewable?this.totalTimeViewable+=b:this.totalTimeViewable=b;var f=Date.now();f-this.lastSendParamsTime>=d&&(this.resendSdkParameters(),this.lastSendParamsTime=f)}e>.5&&this.shown&&(this.ad.type!=a.AdType.BANNER_CUBE&&this.ad.type!=a.AdType.BANNER_STANDARD||this.manualImpressionTracking||this.impressionTriggered||(this.impressionTriggered=!0,this.debugTrack("banner-impression"),this.ad.sendTrackingEvents(a.TrackingEvent.IMPRESSION),this.trigger(c.onImpression))),this.setVisibility(e),this.setViewable(e>0)},c.prototype.checkBannerReady=function(){this.isReady||!this.isIFrameReady||this.delayedLock>0&&this.waitBannerReady||this.showBlockedBySDK||(this.isReady=!0,this.onBannerReady())},c.prototype.showWaterfallAd=function(c){var d=this.getRootElement();return c=c==b||Boolean(c),this.getRootElement()?(c&&a.setStyle(d,{position:"relative",zIndex:"auto",height:this.viewHeight}),this.showBlockedBySDK=!1,void this.checkBannerReady()):void a.debug(this+" Can not show preloaded banner in waterfall mode without showAd call")},c.prototype.onBannerReady=function(){var b=this;this.trigger(c.onReady),this.broadcastMessage("init","2.3","Web"),this.resendSdkParameters(),b.ad.sendTrackingEvents(a.TrackingEvent.LOADING_COMPLETE),this.manualShow&&!this.waitiingForSdkToShow||(this.waitiingForSdkToShow=!1,this.show()),this.windowVisibilityChanged(),this.lastSendParamsTime=Date.now(),this.viewableTimer=setInterval(this.onUpdateVisibility.bind(this,200,1e3),200),this.autoSize&&this.updateAutoSize()},c.prototype.startSwelling=function(){this.swellingInterval||(a.setStyle(this.gui.background,{transitionProperty:"height",transitionTimingFunction:"linear",transitionDuration:"0.1s"}),this.updateSwelling(),this.swellingInterval=setInterval(function(){this.updateSwelling()}.bind(this),10))},c.prototype.updateSwelling=function(){var c=(new Date).getTime();if(!(this.lastUpdate&&c-this.lastUpdate<110)){var d=a.viewportManipulator.getViewportHeight(),e=a.viewportManipulator.getViewportScrollY(),f=a.getElementPosY(this.gui.background,!0),g=this.parsePixelSize(this.viewHeight),h=80,i=Math.max(150,2*d/3),j=e+d-(f+this.minSwellingHeight),k=Math.max(0,Math.min(1,(j-h)/(i-h))),l=Math.round(this.minSwellingHeight+(this.maxSwellingHeight-this.minSwellingHeight)*k);l!=g&&(this.lastUpdate=c,this.viewHeight=l+"px",this.gui.background.style.height=this.viewHeight,a.frameManipulator.isInsideBannerNetwork()&&a.frameManipulator.resize(b,l+"px"))}},c.prototype.stopSwelling=function(){this.swellingInterval&&(clearInterval(this.swellingInterval),this.swellingInterval=0)},c.prototype.advApiEnableManualImpression=function(a){this.manualImpressionTracking=!0},c.prototype.advApiTriggerImpression=function(b){this.manualImpressionTracking&&!this.impressionTriggered&&(this.impressionTriggered=!0,this.debugTrack("banner-impression"),this.ad.sendTrackingEvents(a.TrackingEvent.IMPRESSION),this.trigger(c.onImpression))},c.prototype.advApiWaitUntilLoaded=function(b){0===this.delayedLock&&a.debug(this+" Banner requested to wait until loaded"),this.delayedLock++},c.prototype.advApiBannerLoaded=function(b){this.delayedLock--,0===this.delayedLock&&(clearTimeout(this.delayedLockTimeout),this.delayedLockTimeout=0,a.debug(this+" Banner loaded."),this.checkBannerReady())},c.prototype.advApiExpand=function(b){return"default"!==this.state?void this.sendMessage(b,"trigger","error","Cannot expand banner from state: "+this.state,"advApiExpand"):this.ad.type.fullscreen?void this.sendMessage(b,"trigger","error","Cannot expand fullscreen banner","advApiExpand"):(a.debug(this+" Banner expand"),this.state="expanded",this.gui.background.style.background="rgba(0,0,0,0.5)",this.gui.background.style.position="fixed",this.gui.background.style.width="100%",this.gui.background.style.height="100%",this.gui.background.style.left="0",this.gui.background.style.top="0",this.gui.background.style.zIndex=Math.pow(2,53),this.gui.wrapper.style.width="100%",this.gui.wrapper.style.height="100%",this.autoSize&&this.updateAutoSize(),this.broadcastMessage("setState","expanded"),this.setCloseButtonVisible(!0),void a.frameManipulator.expand())},c.prototype.advApiCollapse=function(b){return"expanded"!==this.state?void this.sendMessage(b,"trigger","error","Cannot collapse banner from state: "+this.state,"advApiCollapse"):(a.debug(this+" Banner collapse"),this.state="default",a.resetStyle(this.gui.background),this.gui.background.style.position="relative",this.gui.background.style.width=this.viewWidth,this.gui.background.style.height=this.viewHeight,this.gui.wrapper.style.width=this.ad.width?this.ad.width+"px":"100%",this.gui.wrapper.style.height=this.ad.height?this.ad.height+"px":"100%",this.autoSize&&this.updateAutoSize(),this.broadcastMessage("setState","default"),(!this.ad.manualClose||this.manualCloseTimePassed<1e3*this.ad.manualClose)&&this.setCloseButtonVisible(!1),void a.frameManipulator.collapse())},c.prototype.advApiClick=function(a,b,c){this.onClicked(b,!0,c)},c.prototype.advApiClose=function(a,b){var d=this;this.hideAndClose(function(){d.trigger(c.onAutoClose)})},c.prototype.advApiTrack=function(b,c,d){if(!c)throw new Error("Event not specified");var e;/https?:\/\//.test(c)?(e=new a.TrackingEvent("custom",c),e.send(this.enrichTemplateParams(d))):this.ad.sendTrackingEvents(c,d)},c.prototype.getSdkParameter=function(c,d){switch(c){case"deviceId":a.getUDID(function(a){d(a)});break;case"volume_control":var e=this.ad.originalResponse[c];a.isMobilePhone()&&(e="button"),d(e);break;case"watermark":d(this.ad.watermark);break;case"progressTracking":d(JSON.stringify(this.ad.progressTrackingEvents));break;case"dspName":d(this.ad.dspName);break;case"vastDescriptor":this.ad.originalResponse.hasOwnProperty("vast")||this.ad.originalResponse.hasOwnProperty("vastDescriptor")?this.ad.originalResponse.hasOwnProperty("vastDescriptor")?(this.ad.vastClickThrough=JSON.parse(this.ad.originalResponse.vastDescriptor).clickThroughUrl,this.resendSdkParameters(),d(this.ad.originalResponse.vastDescriptor)):a.vastParse(this.ad.originalResponse.vast,function(a){this.ad.vastClickThrough=a.clickThroughUrl,this.resendSdkParameters(),d(JSON.stringify(a))}.bind(this),function(c){a.error(this+' Invalid Ad VAST. "undefined" returned:'+c),d(b)}.bind(this)):d(b);break;case"videoQuality":d(this.videoQuality);break;case"videoIndex":d(this.videoIndex);break;case"disablePreload":d(this.disablePreload);break;case"domain":d(a.getContentPageDomain());break;default:d(this.ad.originalResponse[c])}},c.prototype.advApiGetSdkParameter=function(a,b){this.getSdkParameter(b,function(c){this.sendMessage(a,"receiveSdkParameter",b,c)})},c.prototype.advApiGetSdkParameters=function(a,c,d){var e=function(){},f=[];d.forEach(function(a){var c={name:a,value:b,received:!1};f.push(c),this.getSdkParameter(a,function(a){c.value=a,c.received=!0,e()})}.bind(this)),(e=function(){for(var b=!0,d=0;d<f.length;++d){var e=f[d];if(!e.received){b=!1;break}}if(b){var g=[];f.forEach(function(a){g.push(a.value)}),this.sendMessage(a,"receiveSdkParameter",c,g)}}.bind(this))()},c.prototype.advApiGetPositionParameters=function(b){var c=window;a.frameManipulator.isInsideIFrame()&&a.frameManipulator.canManipulateParent()&&(c=a.frameManipulator.getHostWindow());var d={windowWidth:a.viewportManipulator.getViewportWidth(),windowHeight:a.viewportManipulator.getViewportHeight(),scrollX:a.viewportManipulator.getViewportScrollX(),scrollY:a.viewportManipulator.getViewportScrollY(),bannerX:a.getElementPosX(this.gui.background,!0),bannerY:a.getElementPosY(this.gui.background,!0)};this.sendMessage(b,"receivePositionParameters",JSON.stringify(d))},c.prototype.advApiSetScroll=function(b,c){var d=JSON.parse(c),e=window;if(a.frameManipulator.isInsideIFrame()&&a.frameManipulator.canManipulateParent()&&(e=a.frameManipulator.getHostWindow()),d.scrollX||(d.scrollX=e.scrollX),d.scrollY||(d.scrollY=e.scrollY),e.scrollTo(d.scrollX,d.scrollY),a.isiOS())var f=setInterval(function(){e.scrollX===d.scrollX&&e.scrollY==d.scrollY?clearInterval(f):e.scrollTo(d.scrollX,d.scrollY)},10)},c.prototype.advApiSetAdditionalHeight=function(a,b){this.clientAdditionalHeight+=JSON.parse(b).additionalHeight,this.autoSize&&this.updateAutoSize()},c.prototype.advApiExtendAutoclose=function(b,c){var d=parseInt(c,10);isNaN(d)&&(d=0),d<=0?this.sendMessage(b,"trigger","error",'Parameter "seconds" must be greater than zero: '+c):this.ad.autoClose&&(a.debug(this+" AutoClose time was increased by "+d+" seconds"),this.autoCloseTimePassed-=1e3*d)},c.prototype.advApiPreventAutoclose=function(b){a.debug(this+" AutoClose was prevent"),this.clearAutoCloseTimeTracker()},c.prototype.advApiDisableClose=function(b,c){this.closeButtonDisabledByClient!==c&&(a.debug(this+" Close "+(c?"disabled":"enabled")),this.closeButtonDisabledByClient=c,this.updateCloseButtonVisibility())},c.prototype.advApiEnableDeviceMotion=function(a,b){var c=function(a,b,c){var d=0,e=c.length;for(d=0;d<e;++d)b[c[d]]?a[c[d]]=b[c[d]]:a[c[d]]=null};if(!this.deviceMotionHandler){if(!("ondevicemotion"in window))return;this.deviceMotionHandler=function(a){var b={};c(b,a,["eventPhase","interval","timeStamp","type"]),b.acceleration={},c(b.acceleration,a.acceleration,["x","y","z"]),b.accelerationIncludingGravity={},c(b.accelerationIncludingGravity,a.accelerationIncludingGravity,["x","y","z"]),b.rotationRate={},c(b.rotationRate,a.rotationRate,["alpha","beta","gamma"]),this.broadcastMessage("triggerDeviceMotion",JSON.stringify(b))}.bind(this),window.top.addEventListener("devicemotion",this.deviceMotionHandler)}if(!this.deviceOrientationHandler){if(!("ondeviceorientation"in window))return;this.deviceOrientationHandler=function(a){var b={};c(b,a,["eventPhase","timeStamp","absolute","alpha","beta","gamma"]),this.broadcastMessage("triggerDeviceOrientation",JSON.stringify(b))}.bind(this),window.top.addEventListener("deviceorientation",this.deviceOrientationHandler)}},c.prototype.triggerBannerLoadingError=function(b){this.closed||(a.log(this+" "+b),this.close(),this.ad.sendTrackingEvents(a.TrackingEvent.LOADING_FAILED),this.impressionTriggered||(this.impressionTriggered=!0,this.debugTrack("banner-impression-failed"),this.ad.sendTrackingEvents(a.TrackingEvent.IMPRESSION_FAILED)),this.trigger(c.onError))},c.prototype.advApiAddFixedBackground=function(b,c){var d=document.createElement("iframe");this.gui.bgIframe=d,a.resetStyle(d),d.style.position="fixed",d.style.top="0",d.style.left="0",d.style.width="100%",d.style.height="100%",d.style.webkitTransform="translateZ(0)",d.style.zIndex="1",this.gui.iframe.style.zIndex="2",d.scrolling="no",this.fixedBackgroundPositionTimer=setInterval(this.updatePositionOfFixedBackground.bind(this),1e3),this.updatePositionOfFixedBackground(),this.enableContainerResizeListener(!0);var e=this;d.onload=function(){e.sendMessage(b,"trigger","fixedBackgroundLoaded")},d.onerror=function(){e.triggerBannerLoadingError("Error loading banner fixed background")},d.src=a.getAbsoluteUrl(this.ad.sourceUrl,c);var f;if(a.frameManipulator.isInsideIFrame()&&a.frameManipulator.canManipulateParent()){f=a.frameManipulator.framesStack[a.frameManipulator.framesStack.length-1].iframeParent;var g=document.createElement("div");a.resetStyle(g);var h=window.getComputedStyle(f);g.style.margin=h.padding,g.style.position="absolute",g.style.clip="rect(auto, auto, auto, auto)",g.style.left="0",g.style.right="0",g.style.top="0",g.style.bottom="0",g.style.zIndex="0",f.style.position||(f.style.position="relative"),f.insertBefore(g,f.childNodes[0]),g.appendChild(d);for(var i=0;i<f.childNodes.length;i++){var j=f.childNodes[i];if(j!==g){var k=window.getComputedStyle(j);""!==k.opacity&&"1"!==k.opacity||(j.style.opacity="0.99")}}}else f=this.gui.wrapper,f.style.clip="rect(auto, auto, auto, auto)",f.appendChild(d);setTimeout(function(){e.messageBus.addClient(d)},0)},c.prototype.updatePositionOfFixedBackground=function(){if(this.gui.bgIframe){var b=a.getElementPosX(this.gui.wrapper,!0),c=this.gui.wrapper.getBoundingClientRect().width,d=this.gui.bgIframe.style;d.left=b+"px",d.width=c+"px"}},c.prototype.advApiEnableSwelling=function(a,b){this.minSwellingHeight=this.parsePixelSize(this.viewHeight),this.maxSwellingHeight=b,this.maxSwellingHeight>this.minSwellingHeight&&this.startSwelling()},c.prototype.advApiSetVisibilityMargin=function(a,b){this.visibilityMargin=b},c.prototype.close=function(){if(!this.closed){if(this.closed=!0,"VengoVision"===a.config.system&&!this.closeButtonClicked){var c=this.ad.dspName;this.ad.campaignId&&(c+="-"+this.ad.campaignId),this.ad.creativeId&&(c+="-"+this.ad.creativeId);var d=(new Date).getTime();(d-this.startShowTime)/1e3}this.messageBus.destroy(),this.messageBus=null,this.windowVisibilityWatcher.uninstall(),this.windowVisibilityWatcher=null,this.enableContainerResizeListener(!1),this.autoSize&&document.removeEventListener("readystatechange",this.containerResizeHandler);for(var e in this.audioPlayers)this.audioPlayers.hasOwnProperty(e)&&this.advApiDestroyAudio(e);this.stopSwelling(),"expanded"===this.state&&this.advApiCollapse(),this.manualCloseTimeTracker&&(clearInterval(this.manualCloseTimeTracker),this.manualCloseTimeTracker=b),clearInterval(this.viewableTimer),this.viewableTimer=null,this.clearAutoCloseTimeTracker(),this.stopWatchingSize(),this.setViewable(!1),this.setVisibility(0),this.setCloseButtonVisible(!1),this.hideClickScreen(),this.hideWatermark(),0!=this.fixedBackgroundPositionTimer&&(clearInterval(this.fixedBackgroundPositionTimer),this.fixedBackgroundPositionTimer=0),a.log(this+" wait banner events"),setTimeout(function(){a.externalElementsManager.destroyElements(this),this.deattachView("iframe"),this.destroyRoot(),this.deattachView("background"),a.log(this+" closed")}.bind(this),3e3)}},c.prototype.forceClose=function(){this.onCloseButtonClicked()},c.prototype.execRemoteAudioMethod=function(b,c){var d=this.audioPlayers[b];return d?void this.sendMessage.apply(this,[d.client,"audioMethodCall"].concat(Array.prototype.slice.call(arguments))):void a.warn(this+" Invalid audio id: "+b)},c.prototype.forceCloseAfterVideo=function(){this.isIFrameReady?(this.broadcastMessage("forceCloseAfterVideo"),this.needForceCloseAfterVideo=!1):this.needForceCloseAfterVideo=!0},c.prototype.advApiCreateAudio=function(b,c){if(this.audioPlayers[c])return void a.warn(this+" Duplicate audio id: "+c);var d=new a.AudioPlayer(c,this.execRemoteAudioMethod.bind(this));d.client=b,this.audioPlayers[c]=d,a.log(this+" Created audio with id: "+c)},c.prototype.advApiDestroyAudio=function(b,c){var d=this.audioPlayers[c];return d&&d.client!==b?void a.error(this+" Cannot destroy another's audio : "+c):d?(d.stop(),delete this.audioPlayers[c],void a.log(this+" Audio destroyed with id: "+c)):void a.warn(this+" Invalid audio id: "+c)},c.prototype.advApiAudioMethod=function(b,c,d){var e=this.audioPlayers[c];if(!e)return void a.warn(this+" Invalid audio id: "+c);var f=Array.prototype.slice.call(arguments,3),g=e[d];return g?void e[d].apply(e,f):void a.warn(this+" Method not found in audio: "+d)},c.prototype.advApiEnableManualShow=function(b){this.manualShow=!0,a.debug(this+" Banner requested to manual show")},c.prototype.advApiShow=function(b){return this.manualShow?void(this.showBlockedBySDK?(this.waitiingForSdkToShow=!0,a.warn(this+" Manual show locked with waterfall mode")):this.show()):void a.warn(this+" Manual show not enabled")},c.prototype.advApiAbortShow=function(b,c){this.manualShow?this.triggerBannerLoadingError(c):a.warn(this+" Manual show not enabled")},c.prototype.advApiCheckingLoaded=function(){a.log(this+" Banner downloaded correctly"),this.isBannerLoaded=!0},c.prototype.advApiVideoProgress=function(b,c,d){"VengoVision"===a.config.system&&a.analytics.trackEvent(c,d)},c.prototype.advApiInitializeExternalElement=function(b,c){a.externalElementsManager.createElement(this,c)},c.prototype.advApiSendExternalElementCommand=function(b,c,d){a.externalElementsManager.sendCommand(this,c,d)},c.prototype.onClicked=function(b,d,e){this.ad.sendTrackingEvents(a.TrackingEvent.CLICK,this.enrichTemplateParams(b)),d||open(this.ad.clickUrl),this.trigger(c.onClick,this,e?e:this.ad.clickUrl),"VengoVision"===a.config.system&&a.analytics.trackEvent("click")},c.prototype.onCloseButtonClicked=function(){var b=this;"expanded"===this.state?this.advApiCollapse():(this.closeButtonClicked=!0,this.ad.sendTrackingEvents(a.TrackingEvent.CLOSE),this.hideAndClose(function(){b.trigger(c.onManualClose)}))},c.prototype.hideAndClose=function(b,c){var d=this;a.AdViewImplementation.prototype.hideAndClose.call(this,b,function(){d.broadcastMessage("trigger","bannerClosed"),c&&c()}),this.broadcastMessage("trigger","bannerClosing")},c.prototype.getTotalViewableTime=function(){return this.totalTimeViewable?Math.round(this.totalTimeViewable/1e3):0},c.prototype.setVisibility=function(a){this.visibility=a,this.broadcastMessage("setVisibility",this.visibility)},c.prototype.setViewable=function(a){this.viewable!==a&&(this.viewable=a,this.broadcastMessage("setViewable",a))},c.prototype.resendSdkParameters=function(){var a={};a.clickUrl=this.ad.clickUrl,a.vastClickThrough=this.ad.vastClickThrough,a.time=this.getTotalViewableTime(),a.visibilityMargin=this.visibilityMargin,this.broadcastMessage("setSdkParams",JSON.stringify(a)),this.needForceCloseAfterVideo&&this.forceCloseAfterVideo()},c.prototype.enrichTemplateParams=function(a){return a||(a={}),a.time=this.getTotalViewableTime(),a.platform="Web",a},c.prototype.debugTrack=function(b){a.debugTracking.track("o"+b)},c.prototype.toString=function(){return"[iVengo.BannerAdView#"+this.id+"]"},a.BannerAdView=c}(window.VengoSystem),function(a,b){function c(b,c){this.id=a.makeid(),this.bannerAdView=b,this.elementName=c,this.initializationComplete=!1,this.initialize()}c.onInitialized="onInitialized",c.onInitializationFailed="onInitializationFailed",c.prototype.haveEnoughSpace=function(a){return!0},c.prototype.initialize=function(){if(a.log(this+" Initializing element of type "+this.elementName),a.frameManipulator.isInsideIFrame()&&!a.frameManipulator.canManipulateParent())return a.warn(this+" Cancelling because can't reach top window"),void this.notifyInitializationFailed();if(a.frameManipulator.isInsideIFrame()){if(!(a.frameManipulator.isAdFox||a.frameManipulator.isDfp||a.frameManipulator.isAn))return a.warn(this+" Unknown SSP, deny banner"),void this.notifyInitializationFailed();this.bannerContainer=a.frameManipulator.getTopContainer()}else this.bannerContainer=this.bannerAdView.getRootElement(),this.bannerContainer.style.overflow="visible";for(var b=this.bannerContainer,c=b.getBoundingClientRect();!c.width&&!c.height&&b;)b=b.parentElement,c=b.getBoundingClientRect();b||(b=this.bannerContainer);var d={left:c.left+Math.max(0,(c.width-640)/2)/2,right:c.right-Math.max(0,(c.width-640)/2)/2,width:Math.min(640,c.width),top:b.offsetTop,bottom:b.offsetTop+c.height,height:Math.min(480,c.height)};return this.haveEnoughSpace(d)?(this.createRootContainer(),this.createInterface(window.top.document,this.gui.container),void this.notifyInitialized()):(a.warn(this+" Cancelling because not enough space"),void this.notifyInitializationFailed())},c.prototype.createRootContainer=function(){this.gui={},this.gui.container=a.createElement("div",!0,{display:"none",position:"relative",left:"0",top:"0",zIndex:"1",overflow:"visible"}),this.bannerContainer.insertBefore(this.gui.container,this.bannerContainer.childNodes[0])},c.prototype.createInterface=function(a,b){},c.prototype.destroy=function(){},c.prototype.notifyInitialized=function(){this.initializationComplete||(a.log(this+" Initialized"),this.initializationComplete=!0,this.bannerAdView.broadcastMessage("trigger","externalElementInitialized",this.elementName))},c.prototype.notifyInitializationFailed=function(){this.initializationComplete||(a.log(this+" Initialization failed"),this.initializationComplete=!0,this.bannerAdView.broadcastMessage("trigger","externalElementInitializationFailed",this.elementName))},c.prototype.onCommand=function(b){a.log(this+" Received command: "+b)},a.ExternalElement=c}(window.VengoSystem),function(a,b){function c(){this.elements=[]}c.prototype.getElement=function(a,c){var d,e=this.elements.length;for(d=0;d<e;++d){var f=this.elements[d];if(f.bannerAdView===a&&f.elementName===c)return f}return b},c.prototype.createElement=function(b,c){var d=this.getElement(b,c);if(d)return void a.warn(this+" Element already exists: "+c);var e={bannerAdView:b,elementName:c},f=b.ad.sourceUrl,g=f.replace(/((https?:)?\/\/.*\/)(.*\.html)/,"$1"+c+".js"),h=document.createElement("script");h.src=g,h.onload=function(){e.element=new a[c](b)},document.head.appendChild(h),e.script=h,this.elements.push(e)},c.prototype.destroyElements=function(a){var b,c=this.elements.length;for(b=0;b<c;++b){var d=this.elements[b];d.bannerAdView===a&&d.element.destroy()}},c.prototype.sendCommand=function(b,c,d){var e=this.getElement(b,c);return e?e.element?void e.element.onCommand(d):void a.warn(this+" Command sent to an element that is still loading: "+c):void a.warn(this+" Cannot send command to a element that doesn't exist: "+c)},c.prototype.toString=function(){return"[iVengo.ExternalElementsManager]"},a.externalElementsManager=new c}(window.VengoSystem),function(a,b){function c(b){var c=a.getUrlParameter("ad_type"),d=a.makeArray(b);return Boolean(c&&d.indexOf(c)===-1)}function d(b){var d="";if(!a.initialized)throw new Error("You must initialize iVengo by calling iVengo.init");if(!b||!b.adType)throw new Error("You must specify params.adType");if(a.isLegacyBrowser()&&(d=a.info("Ignoring integration: browser not supported")),b.mobileOnly&&!a.isMobilePhone()&&(d="Ignoring showAd because of the 'mobileOnly' option"),b.desktopOnly&&a.isMobilePhone()&&(d="Ignoring showAd because of the 'desktopOnly' option"),c(b.adType)&&(d="Ignoring showAd because vengo_ad_type parameter is set in the url"),d){a.info(d);var e=new a.AdPlacement;return setTimeout(function(){e.trigger(a.AdPlacement.onError,e,"Ignoring showAd because of the 'mobileOnly' option")},0),e}return null}function e(a,b){b.originalResponse&&!b.originalResponse.volume_control&&a.volumeControl&&(b.originalResponse.volume_control=a.volumeControl)}a.serverUrl=a.config.serverUrl,a.trackingServerUrl=a.config.trackingServerUrl,a.appId="",a.libVer="1.0.20",a.initialized=!1,a.init=function(b){if(a.initialized)return void a.warn("Library is already initialized, ignoring init");if(!b||!b.appId&&!b.siteId)throw new Error("No appId specified in the init function");a.getUrlParameter("dsp_name")&&a.localStorage.clearAllCache();var c=b.logLevel||"none";a.initialized=!0,a.debugMode=b.debugMode||a.getUrlParameter("debug"),a.debugMode?("iVengo"==a.config.system?a.appId="00000000":a.appId="1",a.initLog("log")):(a.appId=b.appId||b.siteId,a.initLog(c)),a.startWatchingDocumentState(),a.paramsManager=new a.ParamsManager},a.synchronize=function(b){if(b&&a.frameManipulator.isInsideIFrame()&&a.frameManipulator.canManipulateParent()){var c=window.top.document.createElement("script");c.type="text/javascript";var d='var script = document.createElement("script");script.src = "//s.i-vengo.com/js/ivengo.min.js";script.onload = function() {  iVengo.init({    appId:"'+a.appId+'",    logLevel: "none"  });  iVengo.synchronize();};document.head.appendChild(script);';c.appendChild(window.top.document.createTextNode(d)),window.top.document.head.appendChild(c)}else a.syncUDID(),a.additionalTracking.load(function(){})},a.fillSlot=function(c){var f=d(c);if(f)return f;var g,h,i,j,k,l,m,n,o,p,q;h=c.preloadedAd,o=a.makeArray(c.clickTracking),p=a.makeArray(c.displayTracking),q=a.makeArray(c.closeTracking),g=new a.AdView,g.delayed=c.delayed===b||c.delayed,g.allowAutoplay=c.allowAutoplay===b||c.allowAutoplay,g.allowJSVideoEmulation=c.allowJSVideoEmulation===b||c.allowJSVideoEmulation,g.forceJSVideoEmulation=c.forceJSVideoEmulation!==b&&c.forceJSVideoEmulation,g.allowSlideshow=c.allowSlideshow===b||c.allowSlideshow,g.forceSlideshow=c.forceSlideshow!==b&&c.forceSlideshow,g.animationParams=c.animationParams;var r=a.getUrlParameter("video_quality");g.videoQuality=r?r:c.videoQuality;var s=a.getUrlParameter("video_index");g.videoIndex=s?s:c.videoIndex,g.disablePreload=c.disablePreload;var t=function(d){if(c.testParams)for(var f in c.testParams)c.testParams.hasOwnProperty(f)&&(d[f]=c.testParams[f]);for(e(c,d),m=0,n=o.length;m<n;++m)d.addTrackingEvent(new a.TrackingEvent(a.TrackingEvent.CLICK,o[m]));for(m=0,n=p.length;m<n;++m)d.addTrackingEvent(new a.TrackingEvent(a.TrackingEvent.IMPRESSION,p[m]));for(m=0,n=q.length;m<n;++m)d.addTrackingEvent(new a.TrackingEvent(a.TrackingEvent.CLOSE,q[m]));c.allowAnimation!=b?g.allowAnimation=Boolean(c.allowAnimation):d.type.fullscreen||(g.allowAnimation="VengoVision"==a.config.system);var h={ad:d,adType:d.type,parentNode:k,afterNode:j,viewWidth:c.width,viewHeight:c.height,viewMargin:c.margin,testParams:c.testParams,allowAnimation:g.allowAnimation,animationParams:g.animationParams};g.on("onDisplay",function(){"none"===k.style.display&&(k.style.display="block")}),g.showAd(h)};return h?l=function(){t(h)}:(i=new a.RequestsChain(c),i.on("onLoaded",function(b,c){0==g.adsList.length?(t(c[0]),g.addAds(c.slice(1))):g.addAds(c),a.synchronize()}),i.on("onFailed",function(b,c){g.trigger(a.AdView.onError,g,c),a.synchronize(!0)}),l=function(){i.start()}),c.parentElement?(k=c.parentElement,delete c.parentElement,l()):("topline"===c.adType&&(c.smartParentParagraph=0),a.positionDetector.getIntegrationContainer(c,function(a){k=a,l()})),a.frameManipulator.isInsideIFrame()&&g.on("onDisplay",function(){a.frameManipulator.show()}).on("onClose",function(){a.frameManipulator.hide()}).on("onError",function(){a.frameManipulator.hide()}),g},a.showInterstitial=function(c){var e=d(c);if(e)return e;var f,g,h,i,j,k,l,m;f=c.preloadedAd,k=a.makeArray(c.clickTracking),l=a.makeArray(c.displayTracking),m=a.makeArray(c.closeTracking),h=new a.Interstitial,h.allowAutoplay=c.allowAutoplay===b||c.allowAutoplay,h.allowJSVideoEmulation=c.allowJSVideoEmulation===b||c.allowJSVideoEmulation,h.forceJSVideoEmulation=c.forceJSVideoEmulation!==b&&c.forceJSVideoEmulation,h.allowSlideshow=c.allowSlideshow===b||c.allowSlideshow,h.forceSlideshow=c.forceSlideshow!==b&&c.forceSlideshow;var n=function(b){if(c.testParams)for(var d in c.testParams)c.testParams.hasOwnProperty(d)&&(b[d]=c.testParams[d]);for(i=0,j=k.length;i<j;++i)b.addTrackingEvent(new a.TrackingEvent(a.TrackingEvent.CLICK,k[i]));for(i=0,j=l.length;i<j;++i)b.addTrackingEvent(new a.TrackingEvent(a.TrackingEvent.IMPRESSION,l[i]));for(i=0,j=m.length;i<j;++i)b.addTrackingEvent(new a.TrackingEvent(a.TrackingEvent.CLOSE,m[i]));h.one(a.Interstitial.onReady,function(){h.showAd()}),h.loadAd(b)};return f?n(f):(g=new a.RequestsChain(c),g.on("onLoaded",function(b,c){n(c[0]),a.synchronize()}),g.on("onFailed",function(b,c){h.trigger(a.Interstitial.onError,h,c),a.synchronize(!0)}),g.start()),a.frameManipulator.isInsideIFrame()&&h.on("onDisplay",function(){a.frameManipulator.expand(),a.frameManipulator.show()}).on("onClose",function(){a.frameManipulator.hide()}).on("onError",function(){a.frameManipulator.hide()}),h},a.showAd=function(c){var f=d(c);if(f)return f;if("VengoVision"===a.config.system&&a.analytics.track(),f=new a.AdPlacement,a.failsafe.isDuplicateRequest(c))return a.warn(a.failsafe+" Same integration code was called twice",c),f;if(a.failsafe.recordRequest(c),c.moved||(a.debugTracking.track("o-show-ad-start"),f.on("onReady",function(){a.debugTracking.track("o-show-ad-ready")}),f.on("onDisplay",function(){a.debugTracking.track("o-show-ad-display")}),f.on("onImpression",function(){a.debugTracking.track("o-show-ad-impression")}),f.on("onError",function(){a.debugTracking.track("o-show-ad-error")})),a.frameManipulator.isInsideIFrame()&&a.frameManipulator.canManipulateParent()&&(c.smartParentId||c.smartParentSelector)){c.moved="true";var g=window.top,h=a.config.system+"CallBack"+(new Date).getTime(),i=a.config.system+"Placement"+(new Date).getTime(),j=function(a,b,c){f.trigger(a,f,c)};return g.eval("          (function(){\n            var script = document.createElement( 'script' );\n            script.src = '"+a.config.scriptUrl+"';\n            script.onload = function () {\n              "+a.config.system+".init({\n                appId   : '"+a.appId+"',\n                logLevel: 'info'\n              });\n              window['"+i+"'] = "+a.config.system+".showAd("+JSON.stringify(c)+")\n              .on('onDisplay', function(sender, adView) { window['"+h+"_1']('onDisplay', sender, adView); })\n              .on('onClose', function(sender, adView) { window['"+h+"_2']('onClose', sender, adView); })\n              .on('onError', function(sender, adView) { window['"+h+"_3']('onError', sender, adView); })\n              .on('onIntegrate', function(sender, adView) { window['"+h+"_4']('onIntegrate', sender, adView); });\n            };\n            document.head.appendChild( script );\n          })();        "),
g[h+"_1"]=j,g[h+"_2"]=j,g[h+"_3"]=j,g[h+"_4"]=j,f}var k=function(d){c.preloadedAd=d;var e,g,h=function(b){b.on("onReady",function(b){f.trigger(a.AdPlacement.onReady,f,b)}).on("onDisplay",function(b){f.trigger(a.AdPlacement.onDisplay,f,b)}).on("onClose",function(b){f.trigger(a.AdPlacement.onClose,f,b)}).on("onError",function(b,c){f.trigger(a.AdPlacement.onError,f,c,b)}).on("onIntegrate",function(b){f.trigger(a.AdPlacement.onIntegrate,f,b)}).on("onClick",function(b,c){f.trigger(a.AdPlacement.onClick,f,c,b)}).on("onImpression",function(b,c){f.trigger(a.AdPlacement.onImpression,f,b)})};if(d instanceof a.ImhoAd){var i=function(b){e=new a.ImhoBannerView(b,d),e.on("onDisplay",function(){"none"===b.style.display&&(b.style.display="block")}),e.showAd(),h(e)};if(d.type.fullscreen){var j=window.top.document,k=j.createElement("div");k.id="ivengo-imho-"+Math.round(1e4*Math.random()+1e4),j.body.appendChild(k),i(k)}else a.positionDetector.getIntegrationContainer(c,function(a){i(a)});g=b}else d.type.fullscreen?(e=a.showInterstitial(c),h(e),g=b):(e=a.fillSlot(c),f.adView=e,h(e),g=e);return g},l=new a.RequestsChain(c),m=b,n=[],o=!0;if(!(c.parentId||c.parentClass||c.smartParentId||c.parentElement||c.smartParentSelector)){var p=document.scripts[document.scripts.length-1];c.parentElement=p.parentNode}return l.on("onLoaded",function(b,d){d.forEach(function(a){e(c,a)}),o?(m=k(d[0]),m&&m.addAds(d.slice(1)),o=!1,a.synchronize()):m&&0!=m.adsList.length?m.addAds(d):n=n.concat(d)}),l.on("onFailed",function(b,c){a.synchronize(!0),f.trigger(a.Interstitial.onError,f,c)}),l.start(),f},a.setUserParameters=function(b){if("VengoVision"!=a.config.system){if(!a.initialized)throw new Error("You must initialize iVengo by calling iVengo.init");a.paramsManager.setParams(b)}}}(window.VengoSystem),function(a,b){function c(){this.id=a.makeid()}c.prototype.__proto__=a.Events.prototype,c.onLoaded="onLoaded",c.onError="onError",c.prototype.isAdFoxScriptLoaded=function(){var a=window.top;return a.Ya&&a.Ya.adfoxCode},c.prototype.loadScript=function(){var b="https://yastatic.net/pcode/adfox/loader.js",c=window.top.document,d=c.createElement("script");d.src=b,d.onerror=function(){this.trigger(this.onError)}.bind(this),d.onload=function(){this.isAdFoxScriptLoaded()?this.trigger(a.AdFoxScriptLoader.onLoaded):this.trigger(a.AdFoxScriptLoader.onError)}.bind(this),c.head.appendChild(d)},a.AdFoxScriptLoader=c}(window.VengoSystem),function(a,b){function c(b,c){this.id=a.makeid(),this.container=b,this.ad=c,a.debug(this+" Created")}c.prototype.__proto__=a.Events.prototype,c.onDisplay="onDisplay",c.onImpression="onImpression",c.onClose="onClose",c.onClick="onClick",c.onError="onError",c.prototype.showAd=function(){a.debug(this+" Show ad started"),this.finalEventTriggered=!1;var b=function(){this.finalEventTriggered||(this.finalEventTriggered=!0,a.debug(this+" Show ad finished with error"),this.destroy(),this.ad.sendTrackingEvents(a.TrackingEvent.LOADING_FAILED),this.trigger(c.onError))}.bind(this);this.showAdTimeout=setTimeout(b,5e3),this.prepareAdFox(function(){a.debug(this+" AdFox script ready"),this.prepareImhoBridge(function(){a.debug(this+" Imho bridge ready"),this.executeImhoRequest(function(){a.debug(this+" Imho request executed")}.bind(this),b)}.bind(this),b)}.bind(this),b)},c.prototype.prepareAdFox=function(b,c){var d=new a.AdFoxScriptLoader;d.isAdFoxScriptLoaded()?b():(d.on(a.AdFoxScriptLoader.onLoaded,function(){b()}),d.on(a.AdFoxScriptLoader.onError,function(){c()}),d.loadScript())},c.prototype.prepareImhoBridge=function(b,d){a.getImhoBridge(function(d){this.imhoBridge=d,this.imhoEmitter=this.imhoBridge.createEmitter(this.ad.type),this.imhoEmitter.on(c.onDisplay,function(){this.finalEventTriggered||(this.finalEventTriggered=!0,a.debug(this+" Loaded"),clearTimeout(this.showAdTimeout),this.ad.sendTrackingEvents(a.TrackingEvent.LOADING_COMPLETE),this.trigger(c.onDisplay))}.bind(this)),this.imhoEmitter.on(c.onImpression,function(){a.debug(this+" Impression recorded"),this.ad.sendTrackingEvents(a.TrackingEvent.IMPRESSION),this.trigger(c.onImpression)}.bind(this)),this.imhoEmitter.on(c.onClick,function(){a.debug(this+" Clicked"),this.ad.sendTrackingEvents(a.TrackingEvent.CLICK),this.trigger(c.onClick)}.bind(this)),this.imhoEmitter.on(c.onError,function(){this.finalEventTriggered||(this.finalEventTriggered=!0,a.debug(this+" Error, aborting"),this.ad.sendTrackingEvents(a.TrackingEvent.NO_CONTENT),this.destroy(),this.trigger(c.onError))}.bind(this)),b()}.bind(this))},c.prototype.executeImhoRequest=function(a,b){var c,d=this.ad.code;if(this.container.id)c=this.container.id;else{var e="ivengo-"+this.id+"-"+Math.round(1e4*Math.random()+1e4);c=e,this.container.id=e}var f=/containerId:([^,]*),/,g=f.exec(d);if(g&&g[1]){var h=d.slice(0,g.index)+'containerId: "'+c+'",'+d.slice(g.index+g[0].length),i=/yaadfobj\s*=\s*(\{[\s\S]+?\});/;if(g=i.exec(h),g&&g[1]){var j=g[1],k=function(a,b){var c=j.substr(0,j.length-1),d=j.substr(j.length-1),e=",\n"+a+": function() {\n\tif (window.top['iVengo'] && window.top.iVengo['"+b+"']) {\n\t\twindow.top.iVengo."+b+"('"+this.ad.type.key+"');\n\t}\n}\n";j=c+e+d}.bind(this);k("onLoad","imhoOnDisplay"),k("onRender","imhoOnImpression"),k("onError","imhoOnError"),h=h.slice(0,g.index)+"yaadfobj = "+j+";"+h.slice(g.index+g[0].length),window.top.eval(h)}else b()}else b()},c.prototype.destroy=function(){this.destroyed=!0,this.imhoEmitter&&(this.imhoBridge.destroyEmitter(this.imhoEmitter),this.imhoEmitter=b)},c.prototype.toString=function(){return"[iVengo.ImhoBannerView#"+this.id+"]"},a.ImhoBannerView=c}(window.VengoSystem),function(a,b){function c(){this.initializeTopObject()}c.prototype.__proto__=a.Events.prototype,c.onDisplay="onDisplay",c.onImpression="onImpression",c.onClose="onClose",c.onClick="onClick",c.onError="onError",c.prototype.initializeTopObject=function(){var b=window.top;b.iVengo||(b.iVengo={}),b.iVengo.imhoEmitter||(b.iVengo.imhoEmitter=new a.Events,b.iVengo.imhoNoAds=b.iVengo.imhoEmitter.trigger.bind(b.iVengo.imhoEmitter,c.onError),b.iVengo.imhoOnDisplay=b.iVengo.imhoEmitter.trigger.bind(b.iVengo.imhoEmitter,c.onDisplay),b.iVengo.imhoOnImpression=b.iVengo.imhoEmitter.trigger.bind(b.iVengo.imhoEmitter,c.onImpression),b.iVengo.imhoOnClose=b.iVengo.imhoEmitter.trigger.bind(b.iVengo.imhoEmitter,c.onClose),b.iVengo.imhoOnClick=b.iVengo.imhoEmitter.trigger.bind(b.iVengo.imhoEmitter,c.onClick),b.iVengo.imhoOnError=b.iVengo.imhoEmitter.trigger.bind(b.iVengo.imhoEmitter,c.onError))},c.prototype.createEmitter=function(d){var e=window.top.iVengo.imhoEmitter,f=new a.Events,g=function(a){return function(){for(var c=b,e=0;e<arguments.length;++e){var g=arguments[e];"string"==typeof g&&(c=g)}c&&d&&c!==d.key||f.trigger(a)}};return f.displayCallback=g(c.onDisplay),f.impressionCallback=g(c.onImpression),f.closeCallback=g(c.onClose),f.clickCallback=g(c.onClick),f.errorCallback=g(c.onError),e.on(c.onDisplay,f.displayCallback),e.on(c.onImpression,f.impressionCallback),e.on(c.onClose,f.closeCallback),e.on(c.onClick,f.clickCallback),e.on(c.onError,f.errorCallback),f},c.prototype.destroyEmitter=function(a){var b=window.top.iVengo.imhoEmitter;b.off(c.onDisplay,a.displayCallback),b.off(c.onImpression,a.impressionCallback),b.off(c.onClose,a.closeCallback),b.off(c.onClick,a.clickCallback),b.off(c.onError,a.errorCallback)};var d=b;a.getImhoBridge=function(a){d||(d=new c),a(d)}}(window.VengoSystem),function(a,b){function c(c){this.id=a.getOptionalAttribute(c,"id"),this.width=a.getRequiredAttribute(c,"width"),this.height=a.getRequiredAttribute(c,"height"),this.top=b,this.left=b,this.right=8,this.bottom=8;var d=a.getOptionalSubtag(c,"StaticResource");d&&(this.bannerType=a.getRequiredAttribute(d,"type"),this.bannerUrl=a.getTagValue(d)),this.tracking=[];var e=a.getOptionalSubtags(c,"CompanionClickTracking");e&&[].forEach.call(e,function(b){this.tracking.push(new a.TrackingEvent(a.TrackingEvent.CLICK,a.getTagValue(b)))}.bind(this)),this.clickThrough=a.getOptionalSubtagValue(c,"CompanionClickThrough")}c.prototype.isSupported=function(){return!(!this.bannerType||!this.bannerUrl)&&0===this.bannerType.indexOf("image/")},c.prototype.mergeWithPositioningExtension=function(a){if(this.id!=a.companionId)throw new Error("Trying to merge positiong extension with wrong companion");this.top=a.top,this.left=a.left,this.right=a.right,this.bottom=a.bottom},a.CompanionAd=c}(window.VengoSystem),function(a,b){function c(b,c){var d=a.getOptionalSubtag(b,"Linear");if(d)this.linear=new a.Linear(d,c);else{var e=a.getOptionalSubtag(b,"CompanionAds");if(!e)throw new Error("Invalid creative");var f=a.getOptionalAttribute(e,"required")||"none",g=a.getRequiredSubtags(e,"Companion"),h=[];[].forEach.call(g,function(b){var c=new a.CompanionAd(b);c.isSupported()&&h.push(c)});var i=a.getOptionalSubtag(b,"CreativeExtensions");if(i){var j=a.getOptionalSubtags(i,"CreativeExtension");j&&[].forEach.call(j,function(b){var c=new a.CreativeExtension(b);"Positioning"===c.name&&h.forEach(function(a){a.id===c.companionId&&a.mergeWithPositioningExtension(c)})})}"all"===f?this.companions=h:"any"===f?(this.companions=[],h.length&&this.companions.push(h[0])):this.companions=[]}}a.Creative=c}(window.VengoSystem),function(a,b){function c(c){if(this.name=a.getRequiredAttribute(c,"name"),"Positioning"===this.name){var d=function(d){var e=a.getOptionalAttribute(c,d);if(!e)return b;var f=parseInt(e,10);return isNaN(f)?b:f};this.companionId=a.getRequiredAttribute(c,"companionId"),this.top=d("top"),this.left=d("left"),this.right=d("right"),this.bottom=d("bottom")}}a.CreativeExtension=c}(window.VengoSystem),function(a,b){function c(a,b,c){this.type=a,this.url=b,this.value=c}function d(a,c,d,e,f,g){this.url=a,this.width=c?c:b,this.height=d?d:b,this.type=e,this.scalable=Boolean(f),this.maintainAspectRatio=Boolean(g)}function e(a,b){this.type=a,this.url=b}function f(){this.title=b,this.skipOffset=b,this.preview=b,this.duration=b,this.mediaFiles=[],this.subtitles=[],this.trackingEvents=[],this.clickThroughUrl=b,this.adParameters=b}c.START="start",c.IMPRESSION="impression",c.IMPRESSION_FAILED="impression_failed",c.LOADING_FAILED="loading_failed",c.CLOSE="close",c.AUTOCLOSE="autoclose",c.FIRST_QUARTILE="firstQuartile",c.MIDPOINT="midpoint",c.THIRD_QUARTILE="thirdQuartile",c.COMPLETE="complete",c.PROGRESS="progress",c.SKIP="skip",c.CLICK="click",c.RESUME="resume",c.PAUSE="pause",a.VASTTrackingEvent=c,a.VASTMediaFile=d,a.VASTSubtitle=e,a.VASTDescriptor=f}(window.VengoSystem),function(a,b){function c(c,d){var e,f,g,h,i=a.getOptionalDirectSubtag(c,"AdTitle");for(i&&(this.title=a.getOptionalElementText(i),d&&(d.title=this.title)),this.tracking=[],e=a.getOptionalSubtags(c,"Impression"),h=0;h<e.length;h++){var j=a.TrackingEvent.fromXml(e[h]);this.tracking.push(j),d&&d.trackingEvents.push(new a.VASTTrackingEvent(a.VASTTrackingEvent.IMPRESSION,j.url,b))}for(this.creatives=[],f=a.getRequiredSubtags(c,"Creative"),h=0;h<f.length;h++)this.creatives.push(new a.Creative(f[h],d));if(this.preview=b,g=a.getOptionalSubtag(c,"Extensions")){this.preview=a.getOptionalSubtagValue(g,"Preview"),d&&(d.preview=this.preview);var k=a.getOptionalDirectSubtag(g,"Subtitles");if(k){var l=a.getOptionalSubtags(k,"Subtitle");if(l)for(this.subtitles=[],h=0;h<l.length;h++){var m=l[h],n=a.getOptionalAttribute(m,"type"),o=a.getOptionalElementText(m);if(n&&o){var p=new a.VASTSubtitle(n,o);this.subtitles.push(p),d&&d.subtitles.push(p)}}}}}a.InLine=c}(window.VengoSystem),function(a,b){function c(b,c){var d,e,f,g,h,i,j,k=a.getOptionalAttribute(b,"skipoffset"),l=a.getRequiredSubtagValue(b,"Duration");for(this.skipOffset=a.parseTime(k),this.duration=a.parseTime(l),c&&(c.skipOffset=k,c.duration=l),this.tracking=[],d=a.getOptionalSubtags(b,"Tracking"),j=0;j<d.length;++j)if(e=d[j],f=a.TrackingEvent.fromXml(e),this.tracking.push(f),c&&f.url){var m=a.getOptionalAttribute(e,"offset");c.trackingEvents.push(new a.VASTTrackingEvent(f.type,f.url,m))}for(g=a.getOptionalSubtags(b,"ClickTracking"),j=0;j<g.length;++j)f=a.TrackingEvent.fromXml(g[j]),this.tracking.push(f),c&&f.url&&c.trackingEvents.push(new a.VASTTrackingEvent(a.VASTTrackingEvent.CLICK,f.url));for(this.clickThrough=a.getOptionalSubtagValue(b,"ClickThrough"),c&&this.clickThrough&&(c.clickThroughUrl=this.clickThrough),c&&(c.adParameters=a.getOptionalSubtagValue(b,"AdParameters")),this.mediaFiles=[],h=a.getRequiredSubtags(b,"MediaFile"),j=0;j<h.length;++j)i=new a.MediaFile(h[j],c),i.isPlayable()&&this.mediaFiles.push(i);if(0===this.mediaFiles.length)throw new Error("No playable media files")}a.Linear=c}(window.VengoSystem),function(a,b){function c(c,d){if(this.type=a.getRequiredAttribute(c,"type"),this.width=a.getOptionalAttribute(c,"width"),this.height=a.getOptionalAttribute(c,"height"),this.url=a.replaceSchema(a.getTagValue(c)),d&&this.url){var e=this.width?parseInt(this.width):b,f=this.height?parseInt(this.height):b,g=a.getOptionalAttribute(c,"scalable"),h=g&&"true"===g.toLowerCase(),i=a.getOptionalAttribute(c,"maintainAspectRatio"),j=i&&"true"===i.toLowerCase();d.mediaFiles.push(new a.VASTMediaFile(this.url,e,f,this.type,h,j))}}c.prototype.isPlayable=function(){return!(!this.width||!this.height)&&!!this.url},c.prototype.toString=function(){return"[iVengo.MediaFile] "+this.type+" "+this.width+"x"+this.height},a.MediaFile=c}(window.VengoSystem),function(a,b){function c(b){this.inline=new a.InLine(a.getRequiredSubtag(b,"InLine"))}a.VASTAd=c}(window.VengoSystem),function(a,b){function c(b){this.xml=a.parseXml(b),this.root=a.getRequiredSubtag(this.xml,"VAST"),this.vastVersion=a.getOptionalAttribute(this.root,"version"),this.ad=new a.VASTAd(a.getRequiredSubtag(this.root,"Ad"))}function d(b,c,d,e){var f=a.parseXml(a.fillParameters(b)),g=a.getRequiredSubtag(f,"VAST"),h=a.getRequiredSubtag(g,"Ad"),i=a.getOptionalDirectSubtag(h,"InLine"),j=a.getOptionalSubtag(h,"Wrapper");e||(e=new a.VASTDescriptor),i?(new a.InLine(i,e),c(e)):j?a.vastParseWrapper(j,e,c,d):d("VAST doesn't container neither Wrapper nor InLine element")}a.VASTDocument=c,a.vastParse=d}(window.VengoSystem),function(a,b){function c(c,d){var e,f=a.getOptionalSubtags(c,"Impression");for(e=0;e<f.length;e++){var g=a.TrackingEvent.fromXml(f[e]);d.trackingEvents.push(new a.VASTTrackingEvent(a.VASTTrackingEvent.IMPRESSION,g.url,b))}var h=a.getOptionalDirectSubtag(c,"Creatives");if(h){var i=a.getRequiredDirectSubtag(h,"Creative"),j=a.getRequiredDirectSubtag(i,"Linear"),k=a.getOptionalSubtags(j,"Tracking");for(e=0;e<k.length;++e){var l=k[e];if(g=a.TrackingEvent.fromXml(l),g.url){var m=a.getOptionalAttribute(l,"offset");d.trackingEvents.push(new a.VASTTrackingEvent(g.type,g.url,m))}}var n=a.getOptionalSubtags(j,"ClickTracking");for(e=0;e<n.length;++e)g=a.TrackingEvent.fromXml(n[e]),d&&g.url&&d.trackingEvents.push(new a.VASTTrackingEvent(a.VASTTrackingEvent.CLICK,g.url))}}function d(b,c,d){var e=!1,f=setTimeout(function(){e||(e=!0,d("Timeout: "+b))},5e3);0===b.indexOf("http://")&&(b="https://"+b.substring(7));var g=a.getXmlHttp();g.open("GET",b,!0),g.onreadystatechange=function(){if(4===g.readyState){if(e)return;e=!0,clearTimeout(f),200===g.status?c(g.responseText):d("Failed to load VAST from url: "+b)}},g.send()}function e(b,e,f,g){c(b,e);var h=a.getRequiredSubtagValue(b,"VASTAdTagURI");d(h,function(b){a.vastParse(b,f,g,e)},g)}a.vastParseWrapper=e}(window.VengoSystem),function(a,b){var c,d,e,f="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAABM9tZGF0AAACcgYF//9u3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MCByMjM3NyAxY2E3YmI5IC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxMyAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTAgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTEyIGxvb2thaGVhZF90aHJlYWRzPTIgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAABOmWIhAzyYoAAsLycnJycnJycnJycnJycnJycnJyddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddeAAAAB0GaOBngGRgAAAAHQZpUBngGRgAAAAdBmmAzwDIwAAAAB0GagDPAMjAAAAAHQZqgM8AyMAAAAAdBmsAzwDIwAAAAB0Ga4DPAMjAAAAAHQZsAM8AyMAAAAAdBmyAzwDIwAAAAB0GbQDPAMjAAAAAHQZtgM8AyMAAAAAdBm4AzwDIwAAAAB0GboDPAMjAAAAAHQZvAM8AyMAAAAAdBm+AzwDIwAAAAB0GaADPAMjAAAAAHQZogM8AyMAAAAAdBmkAzwDIwAAAAB0GaYDPAMjAAAAAHQZqAM8AyMAAAAAdBmqAzwDIwAAAAB0GawDPAMjAAAAAHQZrgL8AyMAAAAAdBmwAvwDIwAAAAB0GbICvAMjAAAANobW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABBAAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAApJ0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAABBAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAUAAAAFAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQQAAAAAAABAAAAAAIKbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAAyAAAANABVxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAABtW1pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAXVzdGJsAAAAlXN0c2QAAAAAAAAAAQAAAIVhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAUABQABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAL2F2Y0MBQsAV/+EAF2dCwBXZAUCmhAAAAwAEAAADAMg8WLkgAQAFaMuDyyAAAAAYc3R0cwAAAAAAAAABAAAAGgAAAgAAAAAUc3RzcwAAAAAAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAAGgAAAAEAAAB8c3RzegAAAAAAAAAAAAAAGgAAA7QAAAALAAAACwAAAAsAAAALAAAACwAAAAsAAAALAAAACwAAAAsAAAALAAAACwAAAAsAAAALAAAACwAAAAsAAAALAAAACwAAAAsAAAALAAAACwAAAAsAAAALAAAACwAAAAsAAAALAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjU1LjIzLjEwMw==",g=new a.Events;a.startAutoplayCheck=function(){var b,d,e;if(!c){if(c=!0,a.debug("[iVengo.Autoplay] Starting autoplay check..."),a.isiOS())return a.debug("[iVengo.Autoplay] Autoplay is not available on iOS"),void a.completeAutoplayCheck(!1);e=setTimeout(function(){a.debug("[iVengo.Autoplay] Autoplay not available - cannot play test video in a reasonable time"),a.completeAutoplayCheck(!1)},300);try{b=document.createElement("video"),b.width=320,b.height=320,b.autoplay=!0,b.onplay=function(){a.debug("[iVengo.Autoplay] Autoplay available"),a.completeAutoplayCheck(!0),clearTimeout(e)},d=document.createElement("source"),d.src=f,d.type="video/mp4",b.appendChild(d),b.play()}catch(g){a.warn("[iVengo.Autoplay] Autoplay not available: "+g),a.completeAutoplayCheck(!1),clearTimeout(e)}}},a.completeAutoplayCheck=function(a){d||(d=!0,e=a,g.trigger("checkComplete"))},a.isAutoplayAvailable=function(){return e},a.runAfterAutoplayCheck=function(b){d?b():(g.one("checkComplete",b),a.startAutoplayCheck())}}(window.VengoSystem),function(a,b){function c(c){this.id=a.makeid(),this.src=c,this.metadata=b,this.time=0,this.currentTime=0,this.elem=document.createElement("div"),a.resetStyle(this.elem),this.elem.style.position="relative",this.canvas=document.createElement("Canvas"),a.resetStyle(this.canvas),this.canvas.style.position="absolute",this.canvas.style.left=0,this.canvas.style.right=0,this.canvas.style.bottom=0,this.canvas.style.top=0,this.canvas.style.margin="auto",this.canvas.style.maxWidth="100%",this.canvas.style.maxHeight="100%",this.elem.appendChild(this.canvas),this.muted=!0,this.targetMuted=!0,this.videoPlayer=b,this.previousTimerTick=b,this.audio=null}c.prototype.__proto__=a.Events.prototype,c.prototype.muteAnimationDuration=200,c.play="play",c.loadedmetadata="loadedmetadata",c.ended="ended",c.error="error",c.canBeUsed=function(){var a,b=document.createElement("Canvas");try{a=b.getContext("webgl")||b.getContext("experimental-webgl")}catch(c){return!1}return!!a},c.prototype.play=function(){this.loadMetadata(),this.loadingInterval=setInterval(this.loadingTimer,500)},c.prototype.getResourceSrc=function(a){var b=this.src.replace(/\/?[^\/]*$/,"");return""===b?a:b+"/"+a},c.prototype.loadMetadata=function(){var b=this,d=a.getXmlHttp(),e=this.src;e+=e.indexOf("?")===-1?"?":"&",e+="random="+(new Date).getTime(),d.open("GET",e,!0),d.onreadystatechange=function(){if(4==d.readyState)if(200==d.status){a.debug(b+" Metadata recieved");try{b.metadata={};var e=a.parseXml(d.responseText),f=a.getRequiredDirectSubtag(e,"video");b.metadata.width=parseInt(a.getRequiredSubtagValue(f,"width")),b.metadata.height=parseInt(a.getRequiredSubtagValue(f,"height")),b.metadata.duration=parseInt(a.getRequiredSubtagValue(f,"duration")),b.metadata.audio=b.getResourceSrc(a.getRequiredSubtagValue(f,"audio")),b.metadata.video=b.getResourceSrc(a.getRequiredSubtagValue(f,"video")),b.metadata.audio&&(b.audio=new Audio(a.replaceSchema(b.metadata.audio)),b.audio.load(),b.audio.volume=0,b.elem.appendChild(b.audio)),b.onResize(),b.trigger(c.loadedmetadata,b),b.continuePlayback()}catch(g){a.exception(b+" Failed to parse metadata "+g.message+" | "+d.responseText,g),b.trigger(c.error,b)}}else a.debug(b+" Failed with to load metadata "+d.status),b.trigger(c.error,b)},d.send()},c.prototype.continuePlayback=function(){if(!this.closed){this.videoPlayer&&(this.videoPlayer=null);var b=this;this.videoPlayer=new jsmpeg(this.metadata.video,{canvas:this.canvas,autoplay:!1,loop:!1,benchmark:!1,forceCanvas2D:!1,fetchAllowed:!1,duration:this.metadata.duration,prefetchDuration:5e3,onload:function(){b.videoPlayer.play(),a.debug(b+" Playback started"),b.trigger(c.play,b)},onfinished:function(){a.debug(b+" Playback ended"),b.trigger(c.ended,b)}}),this.playbackInterval||(this.playbackInterval=setInterval(this.playbackTimer.bind(this),20))}},c.prototype.playbackTimer=function(){var b=(new Date).getTime();this.previousTimerTick&&(this.time+=b-this.previousTimerTick,this.currentTime=this.time/1e3),this.previousTimerTick=b,this.onResize(),this.muted||this.videoPlayer.fetching?this.mute():this.videoPlayer.fetching||this.unmute(),this.videoPlayer.fetching!==this.videoFetching&&a.debug(this+" Fetching: "+this.videoPlayer.fetching),this.videoFetching=this.videoPlayer.fetching},c.prototype.mute=function(){var c=this;c.targetMuted!==!0&&(c.targetMuted=!0,a.debug(c+" Muting audio"),c.audioPlaying?(a.debug(c+" Pausing audio"),a.Animation.run(c,"volumeAnimation",new a.NumberAnimation(c.muteAnimationDuration,c.audio.volume,0,function(a){c.audio.volume=a},b,function(){c.audioPlaying=!1,c.audio.pause()}))):a.debug(c+" Audio is not currently playing, nothing to do"))},c.prototype.unmute=function(){var b,c,d=this;d.targetMuted!==!1&&(d.targetMuted=!1,a.debug(d+" Unmuting audio"),b=function(){d.targetMuted===!1&&(a.debug(d+" Seeking audio "),d.audio.currentTime=d.videoPlayer.getCurrentTime()+.2)},c=function(b){d.targetMuted===!1&&(a.debug(d+" Resuming audio, time delta: "+b),d.audioPlaying=!0,a.Animation.run(d,"volumeAnimation",new a.NumberAnimation(d.muteAnimationDuration,d.audio.volume,1,function(a){d.audio.volume=a})),d.audio.play())},d.seekedListener||(d.seekedListener=function(){if(d.targetMuted===!1&&!d.audioPlaying){var b=d.videoPlayer.getCurrentTime(),e=Math.round(1e3*(d.audio.currentTime-b));e>-100&&e<100?c(e):e>100?(a.debug(d+" Delaying audio resume for synchronization by "+e),setTimeout(function(){d.videoPlayer&&c(Math.round(1e3*(d.audio.currentTime-d.videoPlayer.getCurrentTime())))},e)):(a.warn(d+" Audio download is slow by "+e+", re-seeking"),d.audio.currentTime=b+.2)}},d.audio.addEventListener("seeked",d.seekedListener,!1)),d.audio.duration?b():(a.debug(d+" Audio duration is unavailable, posponing unmute"),d.durationChangeListener||(d.durationChangeListener=function(){b()},d.audio.addEventListener("durationchange",d.durationChangeListener,!1))))},c.prototype.addEventListener=function(a,b,c){this.on(a,b)},c.prototype.removeEventListener=function(a,b,c){this.off(a,b)},c.prototype.onResize=function(){var a=this,b=this.elem.clientWidth,c=this.elem.clientHeight;if(b!==this.previosElemWidth||c!==this.previosElemHeight){this.previosElemWidth=b,this.previosElemHeight=c;var d=b/a.metadata.width,e=c/a.metadata.height,f=Math.min(d,e);f<1&&(f=1),a.canvas.style.transform="scale("+f+")",a.canvas.style.webkitTransform="scale("+f+")",a.canvas.width=a.metadata.width,a.canvas.height=a.metadata.height}},c.prototype.performAudioHack=function(){var b=this;b.audioHackComplete||(a.debug(b+" Performing audio hack "),b.audioHackComplete=!0,b.audio.play(),b.audio.pause())},c.prototype.destroy=function(){var a=this;this.videoPlayer&&(this.videoPlayer.stop(),this.videoPlayer=b),a.mute(),this.audio&&(this.audio.pause(),this.audio.src="",this.audio.currentTime=0),a.closed=!0,clearInterval(a.playbackInterval),a.playbackInterval=b,this.elem.parentNode&&this.elem.parentNode.removeChild(this.elem),this.elem=b},c.prototype.toString=function(){return"[iVengo.JSVideoEmulation#"+this.id+"]"},a.JSVideoEmulation=c}(window.VengoSystem),function(a,b){function c(c){var d=this;this.id=a.makeid(),this.src=c,this.metadata=b,this.stripes={},this.time=0,this.currentTime=0,this.elem=document.createElement("div"),a.resetStyle(this.elem),this.elem.style.position="relative",this.canvas=document.createElement("Canvas"),a.resetStyle(this.canvas),this.canvas.style.position="absolute",this.canvas.style.left=0,this.canvas.style.right=0,this.canvas.style.bottom=0,this.canvas.style.top=0,this.canvas.style.margin="auto",this.elem.appendChild(this.canvas),this.muted=!0,this.targetMuted=!0;var e=b;this.playbackTimer=function(){var c=(new Date).getTime();e&&(d.time+=c-e,d.currentTime=d.time/1e3),e=c,d.onResize(),d.drawFrame(d.time)?d.muted?d.mute():d.unmute():(a.log(d+" Draw frame failed, waiting for buffering"),e=b,clearInterval(d.playbackInterval),d.playbackInterval=b,d.mute())},this.loadingTimer=function(){var a,b,c;if(d.metadata){for(a=Math.round(d.time*d.metadata.fps/1e3),b=Math.floor(a/(d.metadata.stripes.rows*d.metadata.stripes.columns)),c=b-1;c>b-5&&c>=0;--c)d.stripes[c]&&d.unloadStripe(c);for(c=b;c<b+5&&c<d.metadata.stripes.count;++c)d.stripes[c]||d.loadStripe(c)}}}c.prototype.__proto__=a.Events.prototype,c.prototype.id,c.prototype.src,c.prototype.elem,c.prototype.canvas,c.prototype.ctx,c.prototype.metadata,c.prototype.stripes,c.prototype.time,c.prototype.playbackInterval,c.prototype.loadingInterval,c.prototype.duration,c.prototype.currentTime,c.play="play",c.loadedmetadata="loadedmetadata",c.ended="ended",c.error="error",c.prototype.addEventListener=function(a,b,c){this.on(a,b)},c.prototype.removeEventListener=function(a,b,c){this.off(a,b)},c.prototype.getResourceSrc=function(a){return this.src.replace(/\/[^\/]*$/,"/"+a)},c.prototype.loadMetadata=function(){var b=this,d=a.getXmlHttp(),e=this.src;e+=e.indexOf("?")===-1?"?":"&",e+="random="+(new Date).getTime(),d.open("GET",e,!0),d.onreadystatechange=function(){if(4==d.readyState)if(200==d.status){a.debug(b+" Metadata recieved");try{b.metadata={};var e=a.parseXml(d.responseText),f=a.getRequiredSubtag(e,"video");b.metadata.width=a.getRequiredSubtagValue(f,"width"),b.metadata.height=a.getRequiredSubtagValue(f,"height"),b.metadata.fps=a.getRequiredSubtagValue(f,"fps"),b.metadata.frames=a.getRequiredSubtagValue(f,"frames"),b.metadata.duration=a.getRequiredSubtagValue(f,"duration"),b.metadata.audio=b.getResourceSrc(a.getRequiredSubtagValue(f,"audio"));var g=a.getRequiredSubtag(e,"stripes");b.metadata.stripes={},b.metadata.stripes.count=a.getRequiredSubtagValue(g,"count"),b.metadata.stripes.name=a.getRequiredSubtagValue(g,"name"),b.metadata.stripes.columns=a.getRequiredSubtagValue(g,"columns"),b.metadata.stripes.rows=a.getRequiredSubtagValue(g,"rows"),b.metadata.audio&&(b.audio=new Audio(a.replaceSchema(b.metadata.audio)),b.audio.load(),b.elem.appendChild(b.audio)),b.onResize(),b.ctx=b.canvas.getContext("2d"),b.trigger(c.loadedmetadata,b),b.continuePlayback()}catch(h){a.exception(b+" Failed to parse metadata "+h.message+" | "+d.responseText,h),b.trigger(c.error,b)}}else a.debug(b+" Failed with to load metadata "+d.status),b.trigger(c.error,b)},d.send()},c.prototype.onResize=function(){var a=this,b=this.elem.clientWidth,c=this.elem.clientHeight;if(b!==this.previosElemWidth||c!==this.previosElemHeight){this.previosElemWidth=b,this.previosElemHeight=c;var d=b/a.metadata.width,e=c/a.metadata.height,f=Math.min(d,e);a.pictureWidth=Math.min(Math.round(a.metadata.width*f),b),a.pictureHeight=Math.min(Math.round(a.metadata.height*f),c),a.pictureOffsetX=(b-a.pictureWidth)/2,a.pictureOffsetY=(c-a.pictureHeight)/2,a.canvas.width=b,a.canvas.height=c}},c.prototype.continuePlayback=function(){this.closed||this.playbackInterval||(this.playbackInterval=setInterval(this.playbackTimer,20))},c.prototype.play=function(){this.loadMetadata(),this.loadingInterval=setInterval(this.loadingTimer,500)},c.prototype.muted,c.prototype.targetMuted,c.prototype.durationChangeListener,c.prototype.seekedListener,c.prototype.performAudioHack=function(){var b=this;b.audioHackComplete||(a.debug(b+" Performing audio hack "),b.audioHackComplete=!0,b.audio.play(),b.audio.pause())},c.prototype.mute=function(){var b=this;b.targetMuted!==!0&&(b.targetMuted=!0,a.debug(b+" Muting audio"),b.audioPlaying?(a.debug(b+" Pausing audio"),b.audioPlaying=!1,b.audio.pause()):a.debug(b+" Audio is not currently playing, nothing to do"))},c.prototype.unmute=function(){var b,c,d=this;d.targetMuted!==!1&&(d.targetMuted=!1,a.debug(d+" Unmuting audio"),b=function(){d.targetMuted===!1&&(a.debug(d+" Seeking audio "),d.audio.currentTime=d.currentTime+.5)},c=function(b){d.targetMuted===!1&&(a.debug(d+" Resuming audio, time delta: "+b),d.audioPlaying=!0,d.audio.play())},d.seekedListener||(d.seekedListener=function(){if(d.targetMuted===!1&&!d.audioPlaying){var b=Math.round(1e3*(d.audio.currentTime-d.currentTime));b>-100&&b<100?c(b):b>100?(a.debug(d+" Delaying audio resume for synchronization by "+b),setTimeout(function(){c(Math.round(1e3*(d.audio.currentTime-d.currentTime)))},b)):(a.warn(d+" Audio download is slow by "+b+", re-seeking"),d.audio.currentTime=d.currentTime+.5)}},d.audio.addEventListener("seeked",d.seekedListener,!1)),d.audio.duration?b():(a.debug(d+" Audio duration is unavailable, posponing unmute"),d.durationChangeListener||(d.durationChangeListener=function(){b()},d.audio.addEventListener("durationchange",d.durationChangeListener,!1))))},c.prototype.loadStripe=function(b){var c,d=this;this.stripes[b]||(c=new Image,c.onload=function(){c.stripeReady=!0,d.continuePlayback()},c.onerror=function(){a.log(d+" Stripe "+b+" failed")},c.src=this.getResourceSrc(a.sprintf(this.metadata.stripes.name,b)),this.stripes[b]=c)},c.prototype.unloadStripe=function(a){this.stripes[a]=b},c.prototype.drawFrame=function(d){var e,f,g,h,i;return e=Math.round(d*this.metadata.fps/1e3),e>=this.metadata.frames?(a.debug(this+" Playback ended"),this.trigger(c.ended,this),!1):e===this.previousFrameNum||(this.previousFrameNum=e,f=Math.floor(e/(this.metadata.stripes.rows*this.metadata.stripes.columns)),g=this.stripes[f],g&&g.stripeReady?(e%=this.metadata.stripes.rows*this.metadata.stripes.columns,h=Math.floor(e/this.metadata.stripes.columns),i=e%this.metadata.stripes.columns,this.ctx.drawImage(g,this.metadata.width*i,this.metadata.height*h,this.metadata.width,this.metadata.height,this.pictureOffsetX,this.pictureOffsetY,this.pictureWidth,this.pictureHeight),0===f&&0===e&&(a.debug(this+" Playback started"),this.trigger(c.play,this)),!0):(this.previousFrameNum=b,!1))},c.prototype.destroy=function(){var a,c=this,d=c.metadata?c.metadata.stripes.count:0;for(c.mute(),c.closed=!0,clearInterval(c.playbackInterval),c.playbackInterval=b,clearInterval(c.loadingInterval),c.loadingInterval=b,a=0;a<d;++a)c.stripes[a]=b;this.elem.parentNode&&this.elem.parentNode.removeChild(this.elem),
this.elem=b},c.prototype.toString=function(){return"[iVengo.Slideshow#"+this.id+"]"},a.Slideshow=c}(window.VengoSystem),function(a,b){function c(b){a.AdViewImplementation.apply(this,[b]),a.log(this+" Created")}c.prototype.__proto__=a.Events.prototype,c.prototype.__proto__.__proto__=a.AdViewImplementation.prototype,c.prototype.type,c.prototype.closed,c.VideoType={VIDEO:"video",SLIDE_SHOW:"slideshow",JS_EMULATION:"jsvideoemulation"},c.VideoMediaType={VIDEO:"video/mp4",SLIDE_SHOW:"video/slideshow",JS_EMULATION:"video/jsemulation"},c.onDisplay="onDisplay",c.onStart="onStart",c.onComplete="onComplete",c.onManualClose="onManualClose",c.onError="onError",c.onClick="onClick",c.prototype.playStartTimeout,c.prototype.playbackInterval,c.prototype.skipTimer,c.prototype.createVideoView=function(b){var d,e,f,g,h,i,j,k,l,m=this;for(h=m.ad.mediaFiles.length,g=0;g<h;++g)i=m.ad.mediaFiles[g],i.type===c.VideoMediaType.JS_EMULATION?(e=!0,j=i):i.type===c.VideoMediaType.SLIDE_SHOW?(f=!0,k=i):d=!0;var n=b;if(b!==c.VideoType.VIDEO||d||(b=c.VideoType.JS_EMULATION),b!==c.VideoType.JS_EMULATION||e||(b=c.VideoType.SLIDE_SHOW),b!==c.VideoType.SLIDE_SHOW||f||(b=c.VideoType.VIDEO),b!==n&&a.warn(m+" Prefered video type is "+n.toUpperCase()+", but only got "+b.toUpperCase()),this.type=b,b===c.VideoType.VIDEO){for(a.debug(m+" Using VIDEO"),m.gui.videoView=document.createElement("video"),a.resetStyle(m.gui.videoView),m.gui.videoView.style.visibility="hidden",m.gui.videoView.style.position="absolute",m.gui.videoView.style.width="100%",m.gui.videoView.style.height="100%",m.ad.width&&m.ad.height&&(m.gui.videoView.width=this.ad.width,m.gui.videoView.height=this.ad.height),h=m.ad.mediaFiles.length,g=0;g<h;++g)i=m.ad.mediaFiles[g],l=document.createElement("source"),l.src=i.url,l.type=i.type,m.gui.videoView.appendChild(l);m.gui.wrapper.appendChild(m.gui.videoView)}else b===c.VideoType.SLIDE_SHOW?(a.debug(m+" Using SLIDESHOW"),this.gui.root.style.overflow="hidden",this.gui.videoView=new a.Slideshow(k.url),this.gui.videoView.elem.style.width="100%",this.gui.videoView.elem.style.height="100%",this.gui.wrapper.appendChild(this.gui.videoView.elem),this.gui.videoView.play()):b===c.VideoType.JS_EMULATION&&(a.debug(m+" Using JS video emulation"),this.gui.root.style.overflow="hidden",this.gui.videoView=new a.JSVideoEmulation(j.url),this.gui.videoView.elem.style.width="100%",this.gui.videoView.elem.style.height="100%",this.gui.wrapper.appendChild(this.gui.videoView.elem),this.gui.videoView.play())},c.prototype.setVideoViewVisibility=function(a){this.type===c.VideoType.VIDEO?this.gui.videoView.style.visibility=a:this.type===c.VideoType.SLIDE_SHOW&&(this.gui.videoView.elem.style.visibility=a)},c.prototype.destroyVideoView=function(){this.gui.videoView&&(this.type===c.VideoType.VIDEO?this.deattachView("videoView"):this.type!==c.VideoType.SLIDE_SHOW&&this.type!==c.VideoType.JS_EMULATION||(this.gui.videoView.destroy(),this.gui.videoView=b))},c.prototype.showAd=function(){var b=this,d=a.isAutoplayAvailable()&&this.allowAutoplay;a.log(b+" Showing ad: "+b.ad.mediaFiles[0].url),this.createRoot(),a.setStyle(this.gui.root,{backgroundColor:"#000000"}),this.showWatermark();var e=c.VideoType.VIDEO;this.forceSlideshow?e=c.VideoType.SLIDE_SHOW:this.forceJSVideoEmulation?e=c.VideoType.JS_EMULATION:0==a.isAutoplayAvailable()&&(this.allowJSVideoEmulation&&a.JSVideoEmulation.canBeUsed()?e=c.VideoType.JS_EMULATION:this.allowSlideshow&&(e=c.VideoType.SLIDE_SHOW)),this.createVideoView(e),this.gui.videoView.defaultMuted=!0,this.gui.videoView.muted=!0,this.type===c.VideoType.SLIDE_SHOW||this.type===c.VideoType.JS_EMULATION||d?(this.gui.videoView.autoplay=!0,this.activateStartTimeoutTimer()):(this.showPlayScreen(),this.displayTriggered=!0,this.trigger(c.onStart)),this.gui.videoView.addEventListener("playing",function(){b.closed||b.gui.videoView.webkitDisplayingFullscreen&&b.enableFullscreenMode()},!1),this.gui.videoView.addEventListener("play",function(){b.closed||(clearTimeout(b.playStartTimeout),b.onVideoStarted())},!1),this.gui.videoView.addEventListener("ended",function(){b.closed||(a.log(b+" Video playback ended successfully."),b.ad.sendTrackingEvents(a.TrackingEvent.COMPLETE),b.fullscreen||(b.hideAndClose(),b.trigger(c.onComplete)))},!1),this.gui.videoView.addEventListener("error",function(){a.log(b+" Video playback error, aborting."),b.onVideoError()},!1),this.gui.videoView.addEventListener("abort",function(){a.log(b+" Abort event recieved, aborting."),b.onVideoError()},!1),this.gui.videoView.addEventListener("webkitendfullscreen",function(a){b.setVideoViewVisibility("hidden"),b.showPlayScreen()},!1),this.animateShow(),b.startWatchingSize()},c.prototype.onVideoStarted=function(){var b=this;if(!b.playbackStarted){b.playbackStarted=!0,a.log(b+" Playback started"),b.setVideoViewVisibility("visible"),b.showClickScreen(),b.showSkipAfter(),b.showMuteButton(),b.showCompanions(),b.trigger(c.onStart),b.gui.videoView.muted=!1,b.gui.videoView.muted=!0;var d;b.totalTimeBufferingMs=0,b.maxBufferingTimeMs=Math.max(Math.round(1e3*b.gui.videoView.duration/3),15e3),b.playbackInterval=setInterval(function(){if(!b.closed){var c=b.gui.videoView.currentTime;if(d===c&&(b.totalTimeBufferingMs+=250,b.totalTimeBufferingMs>b.maxBufferingTimeMs))return a.warn(b+" Buffering takes too long, aborting video"),void b.onVideoError();d=c,b.ad.trackTime(Math.round(1e3*c))}},250),b.displayTriggered||b.trigger(c.onDisplay)}},c.prototype.onVideoError=function(){var b=this;b.closed||(b.close(),b.ad.sendTrackingEvents(a.TrackingEvent.IMPRESSION_FAILED),b.trigger(c.onError))},c.prototype.activateStartTimeoutTimer=function(){var b=this;b.playStartTimeout||(b.playStartTimeout=setTimeout(function(){b.closed||b.gui.videoView.currentTime>0||(a.warn(b+" Failed to load video in a reasonable time, aborting"),b.close(),b.trigger(c.onError),b.ad.sendTrackingEvents(a.TrackingEvent.IMPRESSION_FAILED))},5e3))},c.prototype.showPlayScreen=function(){var b,c=this;if(!this.gui.playScreen&&this.gui.root)if(this.gui.playScreen=document.createElement("a"),a.resetStyle(this.gui.playScreen),this.gui.playScreen.style.background="#000000",this.gui.playScreen.style.position="absolute",this.gui.playScreen.style.width="100%",this.gui.playScreen.style.height="100%",this.gui.playScreen.style.visibility="visible",this.gui.playScreen.style.overflow="hidden",this.gui.playScreen.href="#",this.gui.playScreen.onclick=function(b){return a.log(c+" Start button clicked"),c.hidePlayScreen(),c.setVideoViewVisibility("visible"),c.activateStartTimeoutTimer(),c.gui.videoView.play(),b.preventDefault(),!1},b=function(){if(!c.closed){var b=document.createElement("img");a.resetStyle(b),b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozNmMxOTE5MC0xNzczLTQ2MjAtOTYwMC05Y2NlZjAxNDhjOWUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTVBQTE0REMyNjA1MTFFNEI0NTBBNTk5NEZCMzVBREUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTVBQTE0REIyNjA1MTFFNEI0NTBBNTk5NEZCMzVBREUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzZjMTkxOTAtMTc3My00NjIwLTk2MDAtOWNjZWYwMTQ4YzllIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjM2YzE5MTkwLTE3NzMtNDYyMC05NjAwLTljY2VmMDE0OGM5ZSIvPiA8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",b.style.width="48px",b.style.height="48px",b.style.position="absolute",b.style.left="0",b.style.top="0",b.style.right="0",b.style.bottom="0",b.style.margin="auto",c.gui.playScreen.appendChild(b),c.gui.wrapper.appendChild(c.gui.playScreen)}},c.ad.previewUrl){var d=new Image;d.onload=function(){b()},d.onerror=function(){a.warn(c+" Failed to load video preview"),b()},d.src=c.ad.previewUrl,d.style.maxWidth="100%",d.style.maxHeight="100%",d.style.position="absolute",d.style.left="0",d.style.top="0",d.style.right="0",d.style.bottom="0",d.style.margin="auto",this.gui.playScreen.appendChild(d)}else a.debug(c+" No preview for video"),b()},c.prototype.hidePlayScreen=function(){this.deattachView("playScreen")},c.prototype.showSkipAfter=function(){var c=this;this.gui.skipAfter||!this.gui.root||this.fullscreen||this.ad.skipOffset!==b&&(this.gui.skipAfter=document.createElement("p"),a.resetStyle(this.gui.skipAfter),this.gui.skipAfter.style.background="rgba(255, 255, 255, 0.4)",this.gui.skipAfter.style.position="absolute",this.gui.skipAfter.style.visibility="hidden",this.gui.skipAfter.style.overflow="hidden",this.gui.skipAfter.style.right="0",this.gui.skipAfter.style.bottom="0",this.gui.skipAfter.style.paddingLeft="4px",this.gui.skipAfter.style.paddingRight="4px",this.gui.skipAfter.style.color="#000000",this.gui.skipAfter.style.fontSize="12px",this.gui.skipAfter.style.textShadow="none",c.gui.wrapper.appendChild(this.gui.skipAfter),c.skipTimer=setInterval(function(){var b=Math.round((c.ad.skipOffset-1e3*c.gui.videoView.currentTime)/1e3);if(b>=0){var d=a.sprintf("   %d ",b);a.setTextContent(c.gui.skipAfter,d),c.gui.skipAfter.style.visibility="visible"}else c.showCloseButton(),c.hideSkipAfter()},200),this.getScale()&&this.setElementZoom(this.gui.skipAfter,this.getScale(),"right bottom"))},c.prototype.hideSkipAfter=function(){this.skipTimer&&(clearInterval(this.skipTimer),this.skipTimer=b),this.deattachView("skipAfter")},c.mutedImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmMjRiZGYxYS1mZWQ5LTQxOWMtYjJmYS04NjM4YWYxYjg2NDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTE5MkQwRTkxNjVCMTFFNEJBMzRGQjMxQkY0MEEwNUUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTE5MkQwRTgxNjVCMTFFNEJBMzRGQjMxQkY0MEEwNUUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowZWRiN2M0ZS04NTQ0LTRjNzAtYTQ3NC1hOTFhNmE5OTI3OGIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ZjI0YmRmMWEtZmVkOS00MTljLWIyZmEtODYzOGFmMWI4NjQ2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",c.unmutedImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmMjRiZGYxYS1mZWQ5LTQxOWMtYjJmYS04NjM4YWYxYjg2NDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTIyNzFEMEMxNjVCMTFFNEJBMzRGQjMxQkY0MEEwNUUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTIyNzFEMEIxNjVCMTFFNEJBMzRGQjMxQkY0MEEwNUUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowZWRiN2M0ZS04NTQ0LTRjNzAtYTQ3NC1hOTFhNmE5OTI3OGIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ZjI0YmRmMWEtZmVkOS00MTljLWIyZmEtODYzOGFmMWI4NjQ2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",c.prototype.showMuteButton=function(){var b=this;this.gui.toggleAudioButton||!this.gui.root||this.fullscreen||(this.gui.toggleAudioButton=document.createElement("a"),a.resetStyle(this.gui.toggleAudioButton),this.gui.toggleAudioButton.style.visibility="visible",this.gui.toggleAudioButton.style.display="inline",this.gui.toggleAudioButton.style.position="absolute",this.gui.toggleAudioButton.style.left="0px",this.gui.toggleAudioButton.style.top="0px",this.gui.toggleAudioButton.style.width="48px",this.gui.toggleAudioButton.style.height="48px",this.gui.toggleAudioButton.href="#",b.gui.wrapper.appendChild(this.gui.toggleAudioButton),this.muteImage=document.createElement("img"),a.resetStyle(this.muteImage),this.muteImage.style.visibility="visible",this.muteImage.src=b.gui.videoView.muted?c.mutedImg:c.unmutedImg,this.muteImage.style.width="24px",this.muteImage.style.height="24px",this.muteImage.style.left="0px",this.muteImage.style.top="0px",this.gui.toggleAudioButton.appendChild(b.muteImage),b.gui.toggleAudioButton.onclick=function(a){return b.gui.videoView.performAudioHack&&b.gui.videoView.performAudioHack(),b.gui.videoView.muted=!b.gui.videoView.muted,b.muteImage.src=b.gui.videoView.muted?c.mutedImg:c.unmutedImg,a.preventDefault(),!1},this.getScale()&&this.setElementZoom(this.gui.toggleAudioButton,this.getScale(),"left top"))},c.prototype.hideMuteButton=function(){this.deattachView("toggleAudioButton")},c.prototype.showOpenButton=function(){var b=this;!this.gui.skipAfter&&this.gui.root&&this.fullscreen&&(this.gui.openButton=document.createElement("a"),a.resetStyle(this.gui.openButton),this.gui.openButton.style.background="rgba(255, 255, 255, 0.4)",this.gui.openButton.style.position="absolute",this.gui.openButton.style.visibility="visible",this.gui.openButton.style.overflow="hidden",this.gui.openButton.style.right="0",this.gui.openButton.style.bottom="0",this.gui.openButton.style.paddingLeft="4px",this.gui.openButton.style.paddingRight="4px",this.gui.openButton.style.color="#000000",this.gui.openButton.style.fontSize="18px",this.gui.openButton.style.textShadow="none",this.gui.openButton.style.minWidth="100px",this.gui.openButton.style.minHeight="48px",this.gui.openButton.style.textAlign="center",this.gui.openButton.style.verticalAlign="middle",this.gui.openButton.style.lineHeight="48px",this.gui.openButton.style.zIndex=10,a.setTextContent(b.gui.openButton,""),b.gui.wrapper.appendChild(this.gui.openButton),this.gui.openButton.onclick=function(c){return a.log(b+" Open button clicked"),b.onClicked(),c.preventDefault(),!1})},c.prototype.hideOpenButton=function(){this.deattachView("openButton")},c.prototype.showCompanions=function(){this.gui.companions||!this.gui.root||this.fullscreen||(this.gui.companions=[],this.ad.companions.forEach(function(a){var b=this.showCompanion(a);this.gui.wrapper.appendChild(b),this.gui.companions.push(b)}.bind(this)))},c.prototype.showCompanion=function(c){var d=document.createElement("div");a.resetStyle(d),d.style.position="absolute",d.style.width=c.width+"px",d.style.height=c.height+"px",["top","left","right","bottom"].forEach(function(a){c[a]&&(d.style[a]=c[a]+"px")});var e=document.createElement("a");if(a.resetStyle(e),e.style.visibility="visible",e.style.display="inline",e.style.position="absolute",e.style.width=c.width+"px",e.style.height=c.height+"px",e.style.left="0px",e.style.top="0px",e.href="#",d.appendChild(e),c.left!==b&&c.right!==b){var f=0;f=0===c.left&&0===c.right?50:Math.round(c.left/(c.left+c.right)*100),d.style.width="0px",d.style.left=f+"%",e.style.left="-"+Math.round(c.width*f/100)+"px"}if(c.top!==b&&c.bottom!==b){var g=0;g=0===c.top&&0===c.bottom?"50":Math.round(c.top/(c.top+c.bottom)*100),d.style.height="0px",d.style.top=""+g+"%",e.style.top="-"+Math.round(c.height*g/100)+"px"}var h=document.createElement("img");return a.resetStyle(h),h.style.visibility="visible",h.src=c.bannerUrl,h.style.width="100%",h.style.height="100%",e.appendChild(h),e.onclick=function(b){return c.tracking.forEach(function(b){b.type===a.TrackingEvent.CLICK&&b.send()}),open(c.clickThrough),b.preventDefault(),!1},d},c.prototype.hideCompanions=function(){this.gui.companions&&(this.gui.companions.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)}),this.gui.companions=b)},c.prototype.enableFullscreenMode=function(){var a=this;a.fullscreen||(a.fullscreen=!0,a.hideCompanions(),a.hideMuteButton(),a.hideSkipAfter(),a.showOpenButton())},c.prototype.close=function(){this.closed=!0,this.stopWatchingSize(),this.hideCompanions(),this.hideMuteButton(),this.hideSkipAfter(),this.hidePlayScreen(),this.hideCloseButton(),this.hideClickScreen(),this.hideWatermark(),this.hideOpenButton(),this.destroyVideoView(),this.destroyRoot()},c.prototype.forceClose=function(){this.onCloseButtonClicked()},c.prototype.onClicked=function(){this.ad.sendTrackingEvents(a.TrackingEvent.CLICK),open(this.ad.clickThrough),this.trigger(c.onClick,this,this.ad.clickUrl)},c.prototype.onCloseButtonClicked=function(){this.ad.sendTrackingEvents(a.TrackingEvent.SKIP),this.hideAndClose(),this.trigger(c.onManualClose)},c.prototype.toString=function(){return"[iVengo.VideoAdView#"+this.id+"]"},a.VideoAdView=c}(window.VengoSystem));